(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{111:function(e,t,n){"use strict";var a=n(24);Object.defineProperty(t,"__esModule",{value:!0}),t.formatValue=u,t.parseValue=function(e){if(o.test(e))return new Date(e);return e},t.spacer=c,t.stringify=function e(t,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;var l="";i.isNumber(n)&&(n={space:n});n=i.defaults(n,{space:r.DEFAULT_INDENT_SPACES,simple:!1,toSource:!1});var d=n.simple&&t.isSimpleTag&&(t.labels.length>0||Object.keys(t.attributes).length>0);n.toSource?t.start=o:t.textStart=o;if(t.type===s.NodeType.TEXT)l+=t.content;else{if(n.toSource&&!i.isEmpty(t.metadata)&&(l+=r.T_METADATA_MARKER+r.T_LINE_BREAK,i.each(t.metadata,function(t,a){l+="".concat(a,": "),t instanceof s.default?l+=e(t,n,0,o+l.length):l+=u(t),l+=r.T_LINE_BREAK}),l+=r.T_METADATA_MARKER+r.T_LINE_BREAK),t.type===s.NodeType.ENTITY){var h=i.first(t.children);if(!h)throw new Error("missing text node of entity");n.toSource&&(l+=r.T_ENTITY_START),l+=e(h,n,a,o+l.length),n.toSource&&(l+=r.T_ENTITY_END)}if(n.toSource&&(t.type===s.NodeType.TAG||t.type===s.NodeType.ENTITY)){t.isBlock&&(l+=c(n.space,a)),d&&1===t.children.length||(l+=r.T_TAG_START),d||(l+=t.name);var f=0;i.keys(t.attributes).forEach(function(a,c){var h=t.attributes[a];f++,(!d||f>1)&&(l+=r.T_SPACE),i.isBoolean(h)&&h?l+=a:h instanceof s.default?l+=e(t,n,0,o+l.length):l+="".concat(a,"=").concat(u(h))}),i.each(t.labels,function(e,t){f++,(!d||f>1)&&(l+=r.T_SPACE),l+="#".concat(e)}),l+=d?r.T_SPACE:r.T_TAG_END,t.isBlock&&(l+=r.T_LINE_BREAK)}n.toSource&&t.type===s.NodeType.PARAGRAPH&&(l+=c(n.space,a)),(t.isBlock||t.isWrappingTag&&!i.isEmpty(t.children))&&t.children.forEach(function(t){var i=e(t,n,a+1,o+l.length);l+=i});var T=t.nextSibling;t.isBlock&&(n.toSource&&(l=i.trimEnd(l,r.T_LINE_BREAK)),l+=r.T_LINE_BREAK,t.type!==s.NodeType.PARAGRAPH||t.isLastChild||(l+=r.T_LINE_BREAK)),n.toSource&&t.isWrappingTag&&(t.isBlockTag&&(l+=c(n.space,a)),d?t.children.length>1&&(l+=r.T_TAG_END):l+=r.T_TAG_START+r.T_TAG_CLOSING+t.name+r.T_TAG_END,t.isBlockTag&&(l+=r.T_LINE_BREAK,T&&T.isBlock&&(l+=r.T_LINE_BREAK)))}n.toSource?t.end=t.start+l.length:t.textEnd=t.textStart+l.length;return l.replace(/\n\s*\n\s*\n/g,"\n\n")};var i=a(n(31)),r=n(45),s=a(n(47)),o=/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}\.\d+Z$/;function u(e){return i.isDate(e)?e.toISOString().replace(/T00:00:00\.000Z$/,""):i.isString?r.P_STRING_LITERAL_UNQUOTED_TESTER.test(e)?e:JSON.stringify(e):i.isBoolean(e)?JSON.stringify(e):i.isNumber(e)&&!i.isNaN(e)&&e!==1/0||e!==-1/0?JSON.stringify(e):null}function c(e,t){return t<=0?"":i.repeat(r.T_SPACE,e*t)}},120:function(e,t,n){},123:function(e,t,n){},125:function(e,t,n){},14:function(e,t,n){"use strict";var a=n(24),i=n(25);Object.defineProperty(t,"__esModule",{value:!0}),t.tokenize=l,t.parse=c,Object.defineProperty(t,"Tokenizer",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(t,"TextStream",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"TextLine",{enumerable:!0,get:function(){return s.TextLine}}),Object.defineProperty(t,"Node",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"NodeType",{enumerable:!0,get:function(){return o.NodeType}}),Object.defineProperty(t,"ParseError",{enumerable:!0,get:function(){return u.default}}),t.default=void 0;var r=i(n(84)),s=a(n(52)),o=a(n(47)),u=i(n(54));function c(e,t){return new r.default(e,t).process()}function l(e,t){return console.warn("zaml.tokenize() is deprecated, please use zaml.parse() instead"),c(e,t)}var d={ParseError:u.default,Tokenizer:r.default,TextStream:s.default,TextLine:s.TextLine,Node:o.default,NodeType:o.NodeType,tokenize:l,parse:c};t.default=d},145:function(e,t,n){},147:function(e,t,n){},149:function(e,t,n){},151:function(e,t,n){},153:function(e,t,n){},156:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),r=n(15),s=n.n(r),o=(n(80),n(4)),u=n(5),c=n(7),l=n(6),d=n(8),h=(n(82),n(61)),f=function(e){function t(){return Object(o.a)(this,t),Object(c.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"App"},i.a.createElement(h.a,{defaultSource:"#\u5404\u65b9\u57fa\u672c\u4fe1\u606f\n\u7532\u65b9\uff1a[\u5317\u4eac\u661f\u6838\u8f6f\u4ef6\u6709\u9650\u516c\u53f8]{ORG}\n\u7edf\u4e00\u793e\u4f1a\u4fe1\u7528\u4ee3\u7801\uff1a[345976348]{SOC}\n\u6cd5\u5b9a\u4ee3\u8868\u4eba\uff1a[\u5f20\u9e3f\u5cf0]{PER}\n\u5730\u5740\uff1a[\u5317\u4eac\u5e02\u671d\u9633\u533a\u65b9\u6052\u56fd\u9645D\u5ea72806]{LOC}\n\u4e59\u65b9\uff1a[\u5b59\u7ee7\u987a]{PER}\n\u8eab\u4efd\u8bc1\u53f7\uff1a[230101197701018888]{ID}\n\u624b\u673a\u53f7\uff1a[13945018888]{MOBILE}\n---\n\n\u7532\u4e59\u53cc\u65b9\u7ecf\u53cb\u597d\u534f\u5546\uff0c\u8fbe\u6210\u5982\u4e0b\u534f\u8bae\u3002\n\n#\u6807\u7684.\u79df\u8d41 #\u63cf\u8ff0\n\u4e00\u3001{#\u6807\u7684.\u79df\u8d41 #\u63cf\u8ff0.\u5730\u5740 #\u63cf\u8ff0.\u6570\u91cf \u7532\u65b9\u79df\u8d41\u4e59\u65b9\u6240\u6709\u7684\u4f4d\u4e8e[\u5317\u4eac\u5e02\u671d\u9633\u533a\u5357\u78e8\u623f\u8def37\u53f7]{LOC}\u95e8\u5e02\u623f[\u4e00\u95f4]{QT}}\u3002{#\u63cf\u8ff0.\u9762\u79ef \u4f7f\u7528\u9762\u79ef\u4e3a[105\u5e73\u65b9\u7c73]{AREA}}\u3002{#\u6807\u7684.\u79df\u8d41.\u79df\u671f \u79df\u671f\u4e3a[2019\u5e741\u67081\u65e5]{DATE}\u81f3[2019\u5e7412\u670831\u65e5]{DATE}}\uff1b{#\u6807\u7684.\u79df\u8d41.\u79df\u91d1 \u79df\u91d1\u4e3a[\u5341\u4e07\u5143\u4eba\u6c11\u5e01]{MONEY value=100000}}\u3002\n\n#\u6807\u7684.\u79df\u8d41.\u7528\u9014\n\u4e8c\u3001\u8be5\u95e8\u5e02\u623f\u7684\u7528\u9014\u4e3a\u65b0\u6ce8\u518c\u516c\u53f8\u7684\u7ecf\u8425\u5730\u3002\n\n#\u6807\u7684.\u4ed8\u6b3e\u65b9\u5f0f.\u94f6\u884c #\u6807\u7684.\u79df\u8d41.\u8ba1\u8d39\u65b9\u5f0f.\u6309\u6708\u7ed3\u7b97\n\u4e09\u3001\u79df\u91d1\u6309\u6708\u7ed3\u7b97\u3002{#\u7ea6\u5b9a.\u627f\u79df\u65b9.\u652f\u4ed8.\u79df\u91d1 \u7532\u65b9\u6bcf\u6708[\u4e00\u65e5]{DATE}\u5411\u4e59\u65b9\u6307\u5b9a\u8d26\u6237\u4e00\u6b21\u6c47\u5165\u5f53\u6708\u79df\u91d1\u3002}\n\n#\u7ea6\u5b9a.\u627f\u79df\u65b9.\u652f\u4ed8.\u5b9a\u91d1 #\u4e8b\u4ef6.\u5408\u540c\u751f\u6548\n\u56db\u3001\u7532\u65b9\u5e94\u4e8e\u5408\u540c\u751f\u6548\u8d77[\u4e94\u65e5\u5185]{DUE}\u5411\u4e59\u65b9\u652f\u4ed8\u5b9a\u91d1[\u4e00\u4e07\u5143\u6574]{MONEY}\u3002\n\n#\u7ea6\u5b9a.\u51fa\u79df\u65b9.\u4ea4\u4ed8.\u79df\u8d41\u7269 #\u4e8b\u4ef6.\u5c65\u7ea6.\u51fa\u79df\u65b9.\u4ea4\u4ed8\n\u4e94\u3001\u4e59\u65b9\u5e94\u5728\u6536\u5230\u5b9a\u91d1\u7ed9\u4ea4\u7ed9\u4e59\u65b9\u94a5\u5319\u7528\u4e8e\u63d0\u524d\u88c5\u4fee\u3002\u88c5\u4fee\u8d39\u7528\u7531\u7532\u65b9\u81ea\u884c\u627f\u62c5\u3002\n\n#\u7ea6\u5b9a\n\u516d\u3001{#\u7ea6\u5b9a.\u627f\u79df\u65b9.\u652f\u4ed8.\u62bc\u91d1 \u7532\u65b9\u5e94\u4e8e[\u8ba1\u79df\u65e5\u524d]{DUE}\u5411\u4e59\u65b9\u652f\u4ed8\u62bc\u91d1[\u4e00\u4e07\u5143\u6574]{MONEY}\u3002}{#\u7ea6\u5b9a.\u51fa\u79df\u65b9.\u8fd4\u8fd8\u62bc\u91d1 #\u4e8b\u4ef6.\u5408\u540c\u671f\u6ee1 #\u4e8b\u4ef6.\u5408\u540c\u89e3\u9664 \u79df\u8d41\u671f\u6ee1\u6216\u5408\u540c\u89e3\u9664\u540e[\u4e24\u65e5\u5185]{DUE}\uff0c\u4e59\u65b9\u5e94\u65e0\u606f\u8fd4\u8fd8\u3002}\n\n{#\u4e8b\u4ef6.\u8fdd\u7ea6 #\u8fdd\u7ea6\u8d23\u4efb\n  \u4e03\u3001\u8fdd\u7ea6\u8d23\u4efb\n\n  #\u4e8b\u4ef6.\u8fdd\u7ea6 #\u8fdd\u7ea6.\u4ed8\u6b3e\u65b9.\u4ed8\u6b3e #\u8fdd\u7ea6\u8d23\u4efb.\u8865\u507f.\u8fdd\u7ea6\u91d1 #\u8fdd\u7ea6\u8d23\u4efb.\u8865\u507f.\u8fdd\u7ea6\u91d1.\u8ba1\u7b97\u65b9\u5f0f.\u6bcf\u903e\u671f\u4e00\u5929\n  1. \u4ed8\u6b3e\u65b9\u672a\u6309\u7167\u7ea6\u5b9a\u4ed8\u6b3e\u7684\uff0c\u6bcf\u903e\u671f[\u4e00\u5929]{PERIOD}\uff0c\u5e94\u6309\u903e\u671f\u91d1\u989d\u7684[1%]{RATE}\u5411\u6536\u6b3e\u65b9\u652f\u4ed8\u8fdd\u7ea6\u91d1\u3002\n\n  #\u4e8b\u4ef6.\u8fdd\u7ea6 #\u8fdd\u7ea6.\u51fa\u79df\u65b9.\u4ea4\u4ed8.\u79df\u8d41\u7269 #\u8fdd\u7ea6\u8d23\u4efb.\u8865\u507f.\u8fdd\u7ea6\u91d1.\u8ba1\u7b97\u65b9\u5f0f.\u6bcf\u903e\u671f\u4e00\u5929 #\u8fdd\u7ea6\u8d23\u4efb.\u8865\u507f.\u987a\u5ef6\n  2. \u4e59\u65b9\u5ef6\u8fdf\u4ea4\u623f\u7684\uff0c\u6bcf\u903e\u671f[\u4e00\u5929]{PERIOD}\uff0c\u5e94\u5411\u7532\u65b9\u652f\u4ed8\u8fdd\u7ea6\u91d1[100\u5143]{DATE}\uff0c\u5e76\u5c06\u79df\u671f\u505a\u76f8\u5e94\u7684\u987a\u5ef6\u3002\n  \n}\n\n{#\u4e8b\u4ef6.\u4e0d\u53ef\u6297\u529b #\u7ea6\u5b9a.\u89e3\u9664\u5408\u540c\n  \u516b\u3001\u53d1\u751f\u5982\u4e0b\u60c5\u5f62\uff0c\u4efb\u4f55\u4e00\u65b9\u6709\u6743\u89e3\u9664\u5408\u540c\uff0c\u5e76\u4e0d\u627f\u62c5\u8fdd\u7ea6\u8d23\u4efb\uff1a\n\n  #\u4e8b\u4ef6.\u4e0d\u53ef\u6297\u529b.\u653f\u5e9c\u884c\u4e3a.\u62c6\u8fc1\n  1. \u8be5\u95e8\u5e02\u623f\u88ab\u653f\u5e9c\u5217\u5165\u62c6\u8fc1\u8303\u56f4\uff1b\n\n  #\u4e8b\u4ef6.\u4e0d\u53ef\u6297\u529b.\u91cd\u5927\u707e\u5bb3\n  2. \u53d1\u751f\u5730\u9707\u3001\u706b\u707e\u7b49\u4e0d\u53ef\u6297\u529b\u3002\n\n}\n\n#\u4e89\u8bae\u89e3\u51b3 #\u4e89\u8bae\u89e3\u51b3.\u65b9\u5f0f.\u6cd5\u9662\u8d77\u8bc9 #\u4e89\u8bae\u89e3\u51b3.\u5730\u70b9.\u5408\u540c\u4e00\u65b9\u6240\u5728\u5730\n\u4e5d\u3001\u53cc\u65b9\u53d1\u751f\u4e89\u8bae\u534f\u8c03\u4e0d\u6210\u7684\uff0c\u5e94\u5411\u7532\u65b9\u6240\u5728\u5730\u4eba\u6c11\u6cd5\u9662\u8d77\u8bc9\u3002\n"}))}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(i.a.createElement(f,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},41:function(e,t,n){"use strict";n.d(t,"a",function(){return h});var a=n(4),i=n(5),r=n(7),s=n(6),o=n(8),u=n(0),c=n.n(u),l=n(3),d=n.n(l),h=function(e){function t(e){return Object(a.a)(this,t),Object(r.a)(this,Object(s.a)(t).call(this,e))}return Object(o.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props,t=e.title,n=e.className,a=e.children;return c.a.createElement("div",{className:d()("pane",n)},c.a.createElement("div",{className:"pane-title"},c.a.createElement("h2",null,t)),c.a.createElement("div",{className:"pane-content"},a))}}]),t}(c.a.Component);h.defaultProps={title:"pane",className:""}},45:function(e,t,n){"use strict";var a=n(24);Object.defineProperty(t,"__esModule",{value:!0}),t.PROCESSING_TIMEOUT=t.P_MARKER=t.END_MARKERS=t.START_MARKERS=t.P_FULL_WIDTH_CHARACTER=t.P_BOOLEAN_FALSE=t.P_BOOLEAN_TRUE=t.P_STRING_LITERAL_UNQUOTED_TESTER=t.P_STRING_LITERAL_UNQUOTED=t.P_STRING_LITERAL_QUOTED=t.P_NUMBER_LITERAL=t.P_NUMBER_START=t.P_DATE_LITERAL=t.T_STRING_START=t.P_TAG_NAME=t.P_ATTRIBUTE_LIST=t.P_ATTRIBUTE_NAME=t.P_ATTRIBUTE_ASSIGN=t.P_LABEL_NAME=t.P_LABEL_START=t.P_LIST_SEPARATOR=t.P_WHITE_SPACES_EXT=t.P_WHITE_SPACE=t.P_PARAGRAPH_BREAK=t.P_SPACE_WRAPPED_LINE_BREAK=t.P_LINE_BREAK=t.P_ASSIGN_YAML=t.T_TAG_ATTRIBUTE_FAVORED_ASSIGN=t.T_METADATA_FAVORED_ASSIGN=t.T_PARAGRAPH_BREAK=t.T_LINE_BREAKS=t.T_LINE_BREAK=t.T_ASSIGN_YAML=t.T_ASSIGN_XML=t.T_TAG_END=t.T_TAG_CLOSING=t.T_TAG_START=t.T_ENTITY_END=t.T_ENTITY_START=t.P_MULTIPLE_LINE_COMMENT=t.T_SINGLE_LINE_COMMENT=t.T_METADATA_MARKER=t.T_TAB=t.T_SPACE=t.DEFAULT_INDENT_SPACES=t.createPattern=t.combinePatterns=void 0;var i=a(n(31)),r=function(e){return e.map(function(e){return i.isRegExp(e)?e.source:i.escapeRegExp(e)}).join("|")};t.combinePatterns=r;var s=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"g";return new RegExp(e,t)};t.createPattern=s;t.DEFAULT_INDENT_SPACES=2;t.T_SPACE=" ";t.T_TAB="\t";t.T_METADATA_MARKER="---";t.T_SINGLE_LINE_COMMENT="~";t.P_MULTIPLE_LINE_COMMENT="~{3,}";t.T_ENTITY_START="[";t.T_ENTITY_END="]";t.T_TAG_START="{";t.T_TAG_CLOSING="/";t.T_TAG_END="}";var o="=";t.T_ASSIGN_XML=o;var u=":\uff1a";t.T_ASSIGN_YAML=u;t.T_LINE_BREAK="\n";t.T_LINE_BREAKS="\r\n";t.T_PARAGRAPH_BREAK="\n\n";var c=u;t.T_METADATA_FAVORED_ASSIGN=c;var l=o;t.T_TAG_ATTRIBUTE_FAVORED_ASSIGN=l;t.P_ASSIGN_YAML=/[:\uff1a]/;var d=/\r?\n/g;t.P_LINE_BREAK=d;t.P_SPACE_WRAPPED_LINE_BREAK=/\s*\n\s*/g;var h=s("".concat(d.source,"\\s*").concat(d.source));t.P_PARAGRAPH_BREAK=h;var f=/[ \t]/g;t.P_WHITE_SPACE=f;t.P_WHITE_SPACES_EXT=/[\s\r\n]/g;t.P_LIST_SEPARATOR=/[,\uff0c]/g;var T=/[#\uff03]/g;t.P_LABEL_START=T;var p=/(?:[A-Za-z\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u3005\u3007\u3021-\u3029\u3038-\u303B\u3400-\u4DB5\u4E00-\u9FEF\uF900-\uFA6D\uFA70-\uFAD9]|[\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D])(?:[\.0-9A-Z_a-z\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u3005\u3007\u3021-\u3029\u3038-\u303B\u3400-\u4DB5\u4E00-\u9FEF\uF900-\uFA6D\uFA70-\uFAD9]|[\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D])*/g;t.P_LABEL_NAME=p;var E=s("[".concat([o,u].join(""),"]"),"");t.P_ATTRIBUTE_ASSIGN=E;var v=s("(?:".concat(p.source,")(?=").concat(r([f,E,"}"]),")"),"gu");t.P_ATTRIBUTE_NAME=v;var A=s("(".concat(p.source).concat(E.source,"|").concat(T.source).concat(p.source,")"));t.P_ATTRIBUTE_LIST=A;var m=v;t.P_TAG_NAME=m;t.T_STRING_START='"';t.P_DATE_LITERAL=/\d{4}-[01]\d-[0-3]\d(?:T[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))?/g;t.P_NUMBER_START=/[\d\.]/;t.P_NUMBER_LITERAL=/(\d+|\d*\.\d+|\d+\.\d*)(e\d+)?/g;t.P_STRING_LITERAL_QUOTED=/"([^"\\]|\\")*"/g;var g=/[^\s}"'\\\n]+/g;t.P_STRING_LITERAL_UNQUOTED=g;var y=new RegExp("^".concat(g.source,"$"));t.P_STRING_LITERAL_UNQUOTED_TESTER=y;t.P_BOOLEAN_TRUE=/(TRUE|True|true)/g;t.P_BOOLEAN_FALSE=/(FALSE|False|false)/g;t.P_FULL_WIDTH_CHARACTER=/(?:[\xD7\u2014\u2026\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u3001\u3002\u3005\u3007\u300A-\u300D\u3010\u3011\u3021-\u3029\u3038-\u303B\u3400-\u4DB5\u4E00-\u9FEF\uF900-\uFA6D\uFA70-\uFAD9\uFF01\uFF03\uFF05\uFF06\uFF08\uFF09\uFF0B-\uFF0D\uFF1A\uFF1B\uFF1D\uFF1F\uFF20\uFFE5]|[\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D])/g;var N=["{","[",T];t.START_MARKERS=N;var _=["}","]"];t.END_MARKERS=_;var S=s("(".concat(r([h].concat(N,["}","~{3,}","~"])),")"));t.P_MARKER=S;t.PROCESSING_TIMEOUT=1/0},47:function(e,t,n){"use strict";var a=n(24),i=n(25);Object.defineProperty(t,"__esModule",{value:!0}),t.testNode=_,t.find=S,t.findOne=b,t.parseJson=k,t.toJsonMap=R,t.parseJsonMap=I,t.default=t.WrappingTags=t.BlockTags=t.BlockNodeTypes=t.NodeTypes=t.NodeType=void 0;var r,s=i(n(99)),o=i(n(102)),u=i(n(103)),c=i(n(107)),l=i(n(53)),d=i(n(30)),h=i(n(36)),f=i(n(26)),T=a(n(31)),p=n(111),E=n(14),v=n(112);t.NodeType=r,function(e){e.FRAGMENT="fragment",e.ROOT="root",e.PARAGRAPH="paragraph",e.TAG="tag",e.ENTITY="entity",e.TEXT="text",e.COMMENT="comment"}(r||(t.NodeType=r={}));var A=T.values(r);t.NodeTypes=A;var m=[r.ROOT,r.PARAGRAPH];t.BlockNodeTypes=m;var g=["BLOCK","QUOTE","SECTION","HEADER","FOOTER"];t.BlockTags=g;var y=g.concat(["INLINE","SENTENCE","NUM","HEADING"]);t.WrappingTags=y;var N=function(e){return!0};function _(e,t){if(T.isFunction(e))return e(t);if(T.isString(e))return t.is(e);throw new TypeError("invalid finding pattern")}function S(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:N,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(_(t,e)&&n.push(e),!T.isEmpty(e.children)){var a=!0,i=!1,r=void 0;try{for(var s,o=e.children[Symbol.iterator]();!(a=(s=o.next()).done);a=!0){S(s.value,t,n)}}catch(u){i=!0,r=u}finally{try{a||null==o.return||o.return()}finally{if(i)throw r}}}return n}function b(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:N;if(_(t,e))return e;if(!T.isEmpty(e.children)){var n=!0,a=!1,i=void 0;try{for(var r,s=e.children[Symbol.iterator]();!(n=(r=s.next()).done);n=!0){var o=b(r.value,t);if(o)return o}}catch(u){a=!0,i=u}finally{try{n||null==s.return||s.return()}finally{if(a)throw i}}}}function k(e){var t=O.create(e.type,e.name,{id:e.id,attributes:I(e.attributes),metadata:I(e.metadata),content:e.content});return e.children&&T.each(e.children,function(e){t.appendChild(k(e))}),t.normalize(),t}function R(e){if(!T.isEmpty(e))return T.mapValues(e,function(e){return e instanceof O?e.toJSON():e})}function I(e){if(!T.isEmpty(e))return T.mapValues(e,function(e){return T.isPlainObject(e)?k(e):(0,p.parseValue)(e)})}var O=function(){function e(t,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(0,d.default)(this,e),(0,f.default)(this,"_source",void 0),(0,f.default)(this,"id",""),(0,f.default)(this,"type",void 0),(0,f.default)(this,"name",void 0),(0,f.default)(this,"start",-1),(0,f.default)(this,"end",-1),(0,f.default)(this,"textStart",-1),(0,f.default)(this,"textEnd",-1),(0,f.default)(this,"states",void 0),(0,f.default)(this,"attributes",void 0),(0,f.default)(this,"metadata",void 0),(0,f.default)(this,"labels",void 0),(0,f.default)(this,"parent",void 0),(0,f.default)(this,"content",void 0),(0,f.default)(this,"text",""),(0,f.default)(this,"children",void 0);var i=a.id,s=a.source,o=void 0===s?"":s,u=a.start,c=void 0===u?-1:u,l=a.end,h=void 0===l?-1:l,T=a.states,p=a.attributes,E=void 0===p?{}:p,g=a.metadata,y=void 0===g?{}:g,N=a.labels,_=void 0===N?[]:N,S=a.parent,b=a.content,k=void 0===b?"":b,R=a.text,I=void 0===R?"":R;if(t&&!A.includes(t))throw new TypeError("invalid node type ".concat(t));this.id=i||v(),this.states=T||{},this.type=t,this.name=void 0,this.start=c,this.end=h,this.textStart=-1,this.textEnd=-1,this.parent=S,this._source=void 0,this.content=void 0,this.children=[],this.labels=[],this.attributes={},this.metadata={},this.labels=[],t===r.ROOT&&(this.start=0,this.end=o.length,this._source=o),I&&this.appendText(I),m.includes(t)||[r.ENTITY,r.TAG,r.FRAGMENT].includes(t)?t!==r.PARAGRAPH&&(this.name=n,this.attributes=E,this.metadata=y,this.labels=_):t!==r.TEXT&&t!==r.COMMENT||(this.content=k)}return(0,h.default)(e,null,[{key:"create",value:function(t,n,a){return new e(t,n,a)}},{key:"createParagraph",value:function(t){return new e(r.PARAGRAPH,void 0,t)}},{key:"createRoot",value:function(t){return new e(r.ROOT,void 0,t)}},{key:"createText",value:function(t,n){return new e(r.TEXT,void 0,(0,l.default)({},n,{content:t}))}},{key:"createTag",value:function(t,n){return new e(r.TAG,t,n)}},{key:"createBlock",value:function(t){return new e(r.TAG,"BLOCK",t)}},{key:"createInlineBlock",value:function(t){return new e(r.TAG,"INLINE",t)}},{key:"fromSource",value:function(e){return(0,E.parse)(e)}},{key:"fromJSON",value:function(e){return k(e)}},{key:"createFragment",value:function(){return e.create(r.FRAGMENT)}},{key:"validNode",value:function(t){if(!(t instanceof e))throw new TypeError("invalid node")}},{key:"validParent",value:function(e){if(!T.isArray(e.children))throw new Error("node is not a valid parent")}},{key:"validChild",value:function(e){if(!e.parent)throw new Error("node is not a valid child")}},{key:"findCommonAncestor",value:function(e,t){for(var n,a=e.path,i=t.path;a.length>0&&i.length>0&&T.first(a)===T.first(i);)n=a.shift(),i.shift();if(n)return{ancestor:n,paths:[a,i]}}},{key:"createBlockByRange",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"INLINE",a=arguments.length>2?arguments[2]:void 0,i=t.startNode,r=t.startOffset,s=t.endNode,o=t.endOffset;if(!T.isNumber(r)||!T.isNumber(o))throw new TypeError("range offset must be number");if(!i.isText||!s.isText)throw new TypeError("range node must be text");if(!i.content||!s.content)throw new Error("invalid text node");if(i===s){if(r<0||r>i.content.length||o<0||o>i.content.length)throw new RangeError("sub text out of range");if(!i.parent)throw new Error("can not create block on isolated text node");var u=i.parent,d=e.createFragment(),h=e.createTag(n,(0,l.default)({},a,{text:i.content.substring(r,o)}));return r>0&&d.appendText(i.content.substring(0,r)),d.appendChild(h),o<i.content.length&&d.appendText(i.content.substring(o)),u.insertBefore(d,i),u.removeChild(i),h}var f=e.findCommonAncestor(i,s);if(f&&f.ancestor){var p=f.ancestor,E=f.paths,v=E[0][0],A=E[1][0],m=p.children.indexOf(v),g=[m,p.children.indexOf(A)].sort(),y=(0,c.default)(g,2),N=y[0],_=y[1];if(m!==N){var S=[A,v];v=S[0],A=S[1]}var b=p.extractNodes(N,_+1),k=i.isSidedDescendantOf(v,"start")&&0===r,R=s.isSidedDescendantOf(A,"end")&&o===s.content.length,I=p.findOne(function(e){return e.isBlock});if(I&&I!==p||1!==E[0].length&&!k&&1!==E[1].length&&!R){var O=e.createBlock(a);return p.insertAt(O,N),O.appendChild(b),O}var C=e.createFragment(),L=i.content;r>0&&(v.content=L.substring(r),C.appendText(L.substring(0,r)));var x=e.createTag(n,a);x.appendChild(b),C.appendChild(x);var P=s.content;return o<s.content.length&&(A.content=P.substring(0,o),C.appendText(P.substring(o))),p.insertAt(C,N),x}}}]),(0,h.default)(e,[{key:"getRootNode",value:function(){for(var e=this;e.parent;)e=e.parent;if(e!==this)return e}},{key:"is",value:function(e){return!!T.isString(e)&&(e=e.toUpperCase(),/^[A-Z]/.test(e)?this.type===r.TAG&&this.name===e:/^#/.test(e)?this.type===r.TAG&&this.labels.includes(e.substr(1)):!!/^@[A-Z]/.test(e)&&(this.type===r.ENTITY&&this.name===e.substr(1)))}},{key:"contains",value:function(t){for(e.validNode(t);t;){if(t===this)return!0;if(!t.parent)return!1;t=t.parent}return!1}},{key:"hasChild",value:function(){return this.children.length>0}},{key:"isOnlyDescendantOf",value:function(e){for(var t=e;t;){if(1!==t.children.length)return!1;if((t=t.children[0])===this)return!0}return!1}},{key:"isSidedDescendantOf",value:function(e,t){for(var n=e;n;){if(0===n.children.length)return!1;if((n="start"===t?n.firstChild:n.lastChild)===this)return!0}return!1}},{key:"createChild",value:function(t,n,a){var i=new e(t,n,a);return this.appendChild(i),i}},{key:"prependChild",value:function(e){return this.insertAt(e,0)}},{key:"appendChild",value:function(e){return this.insertAt(e,1/0)}},{key:"appendText",value:function(t,n){if(this.type===r.TEXT)return this.content=this.content||"",this.content+=t,this;if(this.lastChild&&this.lastChild.isText)this.lastChild.content+=t;else{var a=e.create(r.TEXT,void 0,(0,l.default)({},n,{content:t}));this.appendChild(a)}}},{key:"prependText",value:function(t,n){if(this.type===r.TEXT)return this.content="".concat(t).concat(this.content||""),this;var a=e.create(r.TEXT,void 0,(0,l.default)({},n,{content:t}));this.prependChild(a)}},{key:"removeChild",value:function(e){return T.pull(this.children,e),e.parent=void 0,e}},{key:"removeChildAt",value:function(e){var t=this.children[e];return T.pullAt(this.children,e),t.parent=void 0,t}},{key:"insertAt",value:function(e,t){var n,a=this;e.type===r.FRAGMENT?((n=this.children).splice.apply(n,[t,0].concat((0,u.default)(e.children))),e.children.forEach(function(e){e.parent=a}),e.children=[]):(this.children.splice(t,0,e),e.parent&&e.parent.removeChild(e),e.parent=this);return e}},{key:"insertBefore",value:function(t,n){e.validParent(this);var a=this.children.indexOf(n);return this.insertAt(t,a),t}},{key:"insertAfter",value:function(t,n){e.validParent(this);var a=this.children.indexOf(n);return this.insertAt(t,a+1),t}},{key:"replaceChild",value:function(t,n){if(e.validParent(this),t.contains(this))throw new TypeError("the new child contains the parent");if(n.parent!==this)throw new TypeError("the old child is not a child of this node");return this.insertBefore(t,n),this.removeChild(n),n}},{key:"replaceWith",value:function(t){if(e.validChild(this),!this.parent)throw new Error("can not replace isolated node");return this.parent.replaceChild(t,this),t}},{key:"setAttribute",value:function(e,t){T.set(this.attributes,e,t)}},{key:"setAttributes",value:function(e){T.merge(this.attributes,e)}},{key:"getAttribute",value:function(e){return T.get(this.attributes,e)}},{key:"hasAttribute",value:function(e){return T.has(this.attributes,e)}},{key:"removeAttribute",value:function(e){T.unset(this.attributes,e)}},{key:"clearAttributes",value:function(){this.attributes={}}},{key:"setMetadata",value:function(e,t){T.isObject(e)?T.merge(this.metadata,e):T.set(this.metadata,e,t)}},{key:"getMetadata",value:function(e){return T.get(this.metadata,e)}},{key:"removeMetadata",value:function(e){T.unset(this.metadata,e)}},{key:"clearMetadata",value:function(){this.metadata={}}},{key:"hasMetadata",value:function(e){return T.has(this.metadata,e)}},{key:"addLabel",value:function(e){if(!T.isString(e))throw new TypeError("label must be string");this.labels.includes(e)||this.labels.push(e)}},{key:"hasLabel",value:function(e){return this.labels.includes(e)}},{key:"removeLabel",value:function(e){T.pull(this.labels,e)}},{key:"clearLabels",value:function(){this.labels=[]}},{key:"normalize",value:function(){var e=this.toSource();this.isRoot&&(this._source=e),this.toString()}},{key:"getNodeById",value:function(e){return b(this,function(t){return t.id===e})}},{key:"findBy",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=t.type,i=t.name,s=t.text,o=t.source,u=t.label;return(n?b:S)(this,function(t){var n=!0;if(a&&(n=n&&a===t.type),i&&(n=n&&i===t.name),s&&t.type===r.TEXT&&t.content)if(T.isRegExp(s))n=n&&!!s.match(t.content);else{if(!T.isString(s))throw new TypeError("text filter should be RegExp or string");n=n&&t.content.includes(s)}if(o&&t._source)if(T.isRegExp(o))n=n&&!!o.match(t._source);else{if(!T.isString(o))throw new TypeError("source filter should be RegExp or string");n=n&&t._source.includes(o)}return u&&(n=T.isArray(u)?n&&T.intersection(e.labels,u).length>0:n&&e.labels.includes(u)),n})}},{key:"findOneBy",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.findBy(e,!0)}},{key:"findTextByRange",value:function(e,t){if(void 0!==this.textStart&&void 0!==this.textEnd&&this.textStart<=e&&this.textEnd>=t){if(this.type===r.TEXT)return this;if(this.hasChild())for(var n=0;n<this.children.length;n++){var a=this.children[n].findTextByRange(e,t);if(a)return a}}}},{key:"find",value:function(e){return S(this,e)}},{key:"findOne",value:function(e){return b(this,e)}},{key:"querySelectorAll",value:function(e){return S(this,e)}},{key:"querySelector",value:function(e){return b(this,e)}},{key:"splitText",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"INLINE",a=arguments.length>2?arguments[2]:void 0,i=t instanceof RegExp?t:new RegExp("[".concat(T.escapeRegExp(t),"]"),"g");console.log(i),this.find(function(e){return e.isParagraph||e.isInlineBlock}).forEach(function(t){var r=t.toString(),s=0,o=0;for(i.lastIndex=0;i.exec(r);){t.toString(),s=i.lastIndex;var u=t.children.filter(function(e){return e.isText}),c=u.find(function(e){return e.textStart<=o&&e.textEnd>o}),l=u.find(function(e){return e.textStart<s&&e.textEnd>=s});if(!c||!l)break;var d={startNode:c,startOffset:o-c.textStart,endNode:l,endOffset:s-l.textStart};e.createBlockByRange(d,n,a),o=s}})}},{key:"mergeText",value:function(){var t=this,n=[],a=this.children.length;this.children.forEach(function(i,r){if(i.isText&&n.push(i),!i.isText||r===a-1){if(n.length>1){var s,o=n.map(function(e){return e.content}).join(""),u=e.createText(o);for(t.insertBefore(u,n[0]);s=n.shift();)t.removeChild(s)}n=[]}})}},{key:"extractNodes",value:function(t,n){var a=e.createFragment();if(t<0||t>=this.children.length||n<0||n>this.children.length)throw new RangeError("invalid range of children");return this.children.slice(t,n).forEach(function(e){a.appendChild(e)}),a}},{key:"flatten",value:function(){if(this.parent){var e=this.parent,t=this.extractNodes(0,this.children.length);return e.insertBefore(t,this),e.removeChild(this),e.mergeText(),e}}},{key:"createEntities",value:function(t){var n=[];if(this.type!==r.TEXT&&console.warn("extractEntity() should exec only on text node"),!this.content||T.isEmpty(t))return n;var a=this.content;t=T.sortBy(t,["start"]);var i=e.createFragment(),s=0;return t.forEach(function(e){if(!(e.start>=e.end||e.start<s)){e.start>s&&i.appendText(a.substring(s,e.start));var t=i.createChild(r.ENTITY,e.type,{attributes:e.data});t.appendText(a.substring(e.start,e.end)),n.push(t),s=e.end}}),s<a.length&&i.appendText(a.substr(s)),this.replaceWith(i),n}},{key:"createEntitiesFromText",value:function(e){var t=this;this.toString();var n=new Map;T.each(e,function(e){var a=t.findTextByRange(e.start,e.end);void 0!==a&&(n.has(a)?n.get(a).push(e):n.set(a,[e]))}),n.forEach(function(e,t){t.createEntities(e.map(function(e){return(0,l.default)({},e,{start:e.start-(t.textStart||0),end:e.end-(t.textStart||0)})}))})}},{key:"extractEntities",value:function(){var e=(0,o.default)(s.default.mark(function e(t){var n,a,i;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.find(function(e){return e.type===r.TEXT&&!!e.parent&&e.parent.type!==r.ENTITY&&!!e.content}),a=n.map(function(e){return e.content}),!T.isFunction(t)){e.next=6;break}i=a.map(function(e){return t(e)}),e.next=13;break;case 6:if(!T.isFunction(t.extract)){e.next=12;break}return e.next=9,t.extract(a);case 9:i=e.sent,e.next=13;break;case 12:throw new TypeError("invalid extractor");case 13:n.forEach(function(e,t){var n=i[t];if(!T.isArray(n))throw new Error("invalid extraction result");e.createEntities(n)});case 14:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"removeEntity",value:function(){if(this.type!==r.ENTITY||!this.firstChild||this.firstChild.type!==r.TEXT)throw new Error("invalid entity");if(!this.parent)throw new Error("can not remove isolated entity");var t,n=this.firstChild.content||"",a=this.parent,i=this.previousSibling,s=this.nextSibling;return i&&i.isText&&(t=i),t?t.appendText(n):(t=e.create(r.TEXT,void 0,{content:n}),a.insertBefore(t,this)),s&&s.isText&&(t.appendText(s.content||""),a.removeChild(s)),a.removeChild(this),t}},{key:"toString",value:function(e){return(0,p.stringify)(this,e)}},{key:"toSource",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,p.stringify)(this,(0,l.default)({},e,{toSource:!0}))}},{key:"toJSON",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.position,n=void 0!==t&&t,a=e.textPosition,i=void 0!==a&&a,r=e.internalId,s=void 0!==r&&r;return T.omitBy({id:s?this.id:void 0,type:this.type,name:this.name,content:this.content,attributes:R(this.attributes),metadata:R(this.metadata),labels:this.labels.length?this.labels:void 0,position:n?{start:this.start,end:this.end}:void 0,textPosition:i?{start:this.textStart,end:this.textEnd}:void 0,children:T.isEmpty(this.children)?void 0:this.children.map(function(t){return t.toJSON(e)})},T.isUndefined)}},{key:"descriptor",get:function(){return this.isEntity||this.isTag||this.isText?"".concat(this.openDescriptorStart).concat(this.openDescriptorEnd):this.type}},{key:"openDescriptorStart",get:function(){switch(this.type){case r.ENTITY:return"[".concat(this.name);case r.TAG:return"{".concat(this.name);case r.TEXT:return"(text";default:return"<".concat(this.type)}}},{key:"openDescriptorEnd",get:function(){switch(this.type){case r.ENTITY:return"]";case r.TAG:return"}";case r.TEXT:return"";default:return">"}}},{key:"closingDescriptor",get:function(){switch(this.type){case r.ENTITY:return"[/".concat(this.name,"]");case r.TAG:return"{".concat(this.name,"}");case r.TEXT:return")";default:return"</".concat(this.type,">")}}},{key:"selector",get:function(){var e=this.descriptor;return this.parent&&(e="".concat(this.descriptor,"[").concat(this.childIndex,"]")),e}},{key:"rootSelector",get:function(){return this.parent?this.path.map(function(e){return e.selector}).join(" > "):this.selector}},{key:"isRoot",get:function(){return this.type===r.ROOT}},{key:"isParagraph",get:function(){return this.type===r.PARAGRAPH}},{key:"isTag",get:function(){return this.type===r.TAG}},{key:"isEntity",get:function(){return this.type===r.ENTITY}},{key:"isText",get:function(){return this.type===r.TEXT}},{key:"isPlainText",get:function(){return this.type===r.TEXT&&(!this.parent||this.parent.type!==r.ENTITY)}},{key:"isWrappingTag",get:function(){return this.isTag&&y.includes(this.name)}},{key:"isBlockTag",get:function(){return this.isTag&&g.includes(this.name)}},{key:"isSimpleTag",get:function(){return this.isTag&&["BLOCK","INLINE"].includes(this.name)}},{key:"isBlock",get:function(){var e=this.type;this.name;return m.includes(e)||this.isBlockTag}},{key:"isInlineBlock",get:function(){return this.isTag&&!this.isBlockTag}},{key:"parentNode",get:function(){return this.parent}},{key:"childNodes",get:function(){return this.children}},{key:"source",get:function(){if(this.type===r.ROOT)return this._source||"";var e=this.getRootNode();if(!e)throw new Error("ROOT node not found");return e.source.substring(this.start||0,this.end)}},{key:"innerText",get:function(){if(this.type===r.TEXT)return this.content;if(this.type===r.ENTITY){var e=this.children[0];return e?e.content:""}return this.toString()}},{key:"isFirstChild",get:function(){var e=this.parent;return!!e&&T.first(e.children)===this}},{key:"isLastChild",get:function(){var e=this.parent;return!!e&&T.last(e.children)===this}},{key:"siblings",get:function(){var e=this.parent;return e?e.children:[this]}},{key:"childIndex",get:function(){return this.siblings.indexOf(this)}},{key:"nextSibling",get:function(){if(this.parent){var e=this.childIndex;return this.siblings[e+1]||void 0}}},{key:"previousSibling",get:function(){if(this.parent){var e=this.childIndex;return this.siblings[e-1]||void 0}}},{key:"path",get:function(){for(var e=[],t=this;t;)e.unshift(t),t=t.parent;return e}},{key:"firstChild",get:function(){return e.validParent(this),T.first(this.children)}},{key:"lastChild",get:function(){return e.validParent(this),T.last(this.children)}},{key:"isOnlyChild",get:function(){return!!this.parent&&1===this.parent.children.length}}]),e}();(0,f.default)(O,"Types",r);var C=O;t.default=C},52:function(e,t,n){"use strict";var a=n(24),i=n(25);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"TextLine",{enumerable:!0,get:function(){return d.default}}),t.default=void 0;var r=i(n(53)),s=i(n(30)),o=i(n(36)),u=i(n(26)),c=a(n(31)),l=i(n(50)),d=i(n(92)),h=n(45),f=/\r?\n/g,T=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;(0,s.default)(this,e),(0,u.default)(this,"pos",void 0),(0,u.default)(this,"text",void 0),(0,u.default)(this,"tabSize",void 0),(0,u.default)(this,"lines",void 0),(0,u.default)(this,"lineOffsetIndexes",[]),(0,u.default)(this,"markers",void 0),(0,u.default)(this,"cursorStack",void 0),(0,u.default)(this,"lastMatch",""),this.pos=0,this.text=t,this.tabSize=n,this.lines=[],this.markers=[],this.cursorStack=[],this.init()}return(0,o.default)(e,[{key:"init",value:function(){var e,t=[],n=0,a=1;f.lastIndex=0;do{if(e=f.exec(this.text)){var i=e.index-n,r=this.text.substr(n,i);t.push(new d.default(t,r,a,n)),n+=i+e[0].length}else{if(this.text.length-n>0){var s=this.text.substr(n);t.push(new d.default(t,s,a,n))}}a++}while(e);this.lines=t,this.lineOffsetIndexes=c.map(t,"offset")}},{key:"getPosition",value:function(e){c.isUndefined(e)&&(e=this.pos);var t=c.sortedLastIndex(this.lineOffsetIndexes,e)-1,n=this.lines[t];if(!n)throw new Error("cursor position is invalid");return{ln:n.ln,col:e-n.offset+1,pos:e,line:n}}},{key:"sol",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.getPosition(),n=t.col,a=t.line;if(n-1===0)return!0;if(!e)return!1;var i=c.trimStart(a.text).length;return n-1<=a.length-i}},{key:"eol",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.getPosition(),n=t.col,a=t.line;return n-1===a.length||!!e&&n-1>=c.trimEnd(a.text).length}},{key:"eof",value:function(e){return c.isUndefined(e)&&(e=this.pos),e>=this.text.length}},{key:"peek",value:function(){return this.text.charAt(this.pos)}},{key:"next",value:function(){return this.pos<this.text.length?this.text.charAt(this.pos++):""}},{key:"eat",value:function(e){var t,n=this.text.charAt(this.pos)||"";return c.isUndefined(n)?t=!1:c.isString(e)?t=n===e:c.isRegExp(e)?(e.lastIndex=0,t=e.test(n)):c.isFunction(e)&&(t=e(n)),t?(this.lastMatch=n,++this.pos,n):""}},{key:"eatWhile",value:function(e){this.pos;var t,n="";do{(t=this.eat(e))&&(n+=t)}while(t&&!this.eof());return n}},{key:"eatUntil",value:function(e){this.pos;var t,n="";do{(t=this.eat(e))?this.pos--:(n+=this.peek(),this.pos++)}while(!t&&!this.eof());return n}},{key:"eatSpaces",value:function(){for(var e=this.pos;/[\s\u00a0]/.test(this.text.charAt(this.pos));)this.pos++;return this.pos>e}},{key:"search",value:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).caseInsensitive,n=-1,a="";if("string"===typeof e&&(t?e=new RegExp(c.escapeRegExp(e),"i"):-1!==(n=this.text.indexOf(e,this.pos))&&(a=e)),e instanceof RegExp){e.lastIndex=this.pos;var i=e.exec(this.text);i?(n=i.index,a=i[0]):n=-1}return{index:n,length:a.length,matched:a}}},{key:"read",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=this.text.length-this.pos;if(t<=0)return"";t<e&&(e=t);var n=this.text.substr(this.pos,e);return this.pos+=e,n}},{key:"readTo",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.toEOL,a=void 0!==n&&n,i=t.toEOF,r=void 0!==i&&i,s=t.consume,o=void 0!==s&&s,u=t.skipMatched,c=void 0!==u&&u,l=this.pos,d=this.search(e),h=d.index,f=d.length,T="",p=-1;if(a){var E=this.getPosition().line;p=E.offset+E.length}else r&&(p=this.text.length);return-1!==h&&(a||r?h<p?p=h:f=0:p=h),-1!==p&&(this.pos=p,o?(p+=f,this.pos=p):c&&(this.pos+=f),T=this.text.substring(l,p)),this.lastMatch=T,T}},{key:"readOver",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.readTo(e,(0,r.default)({},t,{consume:!0}))}},{key:"readLine",value:function(){var e=this.getPosition().line,t=e.next();if(this.eof())return"";if(t)return this.pos=t.offset,e.text;var n=e.offset+e.length-this.pos;return this.read(n)}},{key:"skipToEnd",value:function(){this.pos=this.text.length}},{key:"skipTo",value:function(e,t){var n=this.pos;return this.readTo(e,t),n!==this.pos}},{key:"skipOver",value:function(e,t){var n=this.pos;return this.readTo(e,(0,r.default)({},t,{skipMatched:!0})),n!==this.pos}},{key:"backUp",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.pos-=e}},{key:"match",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.consume,a=void 0===n||n,i=t.caseInsensitive,r=this.search(e,{caseInsensitive:i}),s=r.index,o=r.length,u=r.matched;return s!==this.pos?"":(a&&(this.pos+=o),this.lastMatch=u,u)}},{key:"resetMarker",value:function(){this.markers=[]}},{key:"pushMarker",value:function(e,t){c.isUndefined(t)&&(t=this.pos),this.markers.push({data:e,start:t})}},{key:"setMarkerData",value:function(e){var t=c.last(this.markers);t&&c.extend(t.data,e)}},{key:"getMarkerData",value:function(){var e=c.last(this.markers);return e?e.data:{}}},{key:"popMarker",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(!c.isPlainObject(e))throw new TypeError("invalid data parameter");c.isUndefined(t)&&(t=this.pos);var n=this.markers.pop();if(n){var a=n.data,i=n.start;return{text:this.text.substring(n.start||0,t),position:{start:i,end:t},data:(0,r.default)({},a,e)}}}},{key:"findLine",value:function(e){return c.find(this.lines,function(t){return c.trim(t.text)===e})}},{key:"pushCursor",value:function(e){c.isUndefined(e)&&(e=this.pos),this.cursorStack.push(this.pos),this.pos=e}},{key:"popCursor",value:function(){if(0===this.cursorStack.length)throw new Error("out of cursor stack!");return this.pos=this.cursorStack.pop(),this.pos}},{key:"debugLine",value:function(e,t,n){var a=e.ln,i=e.text;c.isUndefined(t)&&(t=(a+"").length),n&&(i=i.substring(0,n-1)+l.default.bgBlue(i.charAt(n-1))+i.substring(n)),console.log("".concat(l.default.blueBright("".concat(n?">":" "," ").concat(c.padStart(a+"",t)," |"))," ").concat(i))}},{key:"debugCursor",value:function(e,t,n){var a=e.substr(0,t-1).replace(h.P_FULL_WIDTH_CHARACTER,"XX").length;console.log(l.default.blueBright("  ".concat(c.repeat(" ",n)," | ").concat(c.repeat(" ",a),"^ ").concat(t)))}},{key:"debugState",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=this.getPosition(),a=n.ln,i=n.col,r=a-1,s=c.slice(this.lines,c.max([r-t,0]),c.min([r+t+1,this.lines.length])),o=c.max(s.map(function(e){return(e.ln+"").length}));s.forEach(function(t){var n=t.ln===a;e.debugLine(t,o,n?i:0),n&&e.debugCursor(t.text,i,o)}),console.log()}}]),e}();t.default=T},54:function(e,t,n){"use strict";var a=n(25);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(30)),r=a(n(93)),s=a(n(56)),o=a(n(95)),u=a(n(55)),c=a(n(96)),l=a(n(26)),d=function(e){function t(e,n,a,o){var c;return(0,i.default)(this,t),c=(0,r.default)(this,(0,s.default)(t).call(this,e)),(0,l.default)((0,u.default)((0,u.default)(c)),"message",void 0),(0,l.default)((0,u.default)((0,u.default)(c)),"text",void 0),(0,l.default)((0,u.default)((0,u.default)(c)),"from",void 0),(0,l.default)((0,u.default)((0,u.default)(c)),"to",void 0),c.message=e,c.text=n,c.from=a,c.to=o,c}return(0,o.default)(t,e),t}((0,c.default)(Error));t.default=d},61:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return _});var a=n(4),i=n(5),r=n(7),s=n(6),o=n(8),u=n(33),c=n(16),l=n.n(c),d=n(0),h=n.n(d),f=n(14),T=n(34),p=n(41),E=n(69),v=n(70),A=(n(141),n(143),n(145),n(67)),m=n(68),g=f.Node,y=f.NodeType,N=function(t){var n=g.create(y.ROOT);try{n=f.parse(t),e.node=n,console.info('Root node exported as global variable "node"',n)}catch(o){if(o instanceof f.ParseError){var a="\n        [ParseError]{ERROR.TYPE}: {#MESSAGE ".concat(o.message,"}\n\n        #SOURCE\n        content\n\n        from {#POS.START ").concat(o.from.ln,":").concat(o.from.col,"} to {#POS.END ").concat(o.to.ln,":").concat(o.to.col,"}\n      "),i=(n=f.parse(a)).querySelector("#SOURCE"),r=o.from.line.text;if(!i)return n;var s=i.findOneBy({type:y.TEXT});if(!s)return n;s.content="".concat(r," "),s.createEntitiesFromText([{type:"ERROR",start:o.from.col-1,end:o.to.col-1}])}else n=f.parse("Error: [".concat(o.message,"]{MESSAGE}")),console.error(o)}return n},_=function(e){function t(e){var n;return Object(a.a)(this,t),(n=Object(r.a)(this,Object(s.a)(t).call(this,e))).state={source:e.defaultSource,root:N(e.defaultSource),sourcePaneHeight:-1},n.onResize=l.a.throttle(n.onResize.bind(Object(u.a)(Object(u.a)(n))),500),n.preventSourceChange=!1,n}return Object(o.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){window.addEventListener("resize",this.onResize,{passive:!0}),this.onResize()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.onResize)}},{key:"componentWillReceiveProps",value:function(e){}},{key:"componentWillUpdate",value:function(e,t){t.selectedNode!==this.state.selectedNode&&console.log("selected node:",t.selectedNode),t.root!==this.state.root&&console.log("new node:",t.root)}},{key:"onResize",value:function(){var e=window.innerHeight-60;this.setState({sourcePaneHeight:e})}},{key:"handleSourceChange",value:function(e){this.preventSourceChange||this.setState({root:N(e),selectedNode:void 0})}},{key:"handleNodeChange",value:function(e,t){var n=this;e&&(this.preventSourceChange=!0,this.setState({source:e.toSource({simple:!0}),selectedNode:t},function(){n.preventSourceChange=!1}))}},{key:"render",value:function(){var e=this,t=this.state.source,n=this.state,a=n.root,i=n.sourcePaneHeight,r=n.selectedNode,s=n.hoveredNode;return h.a.createElement("div",{className:"zaml-editor"},h.a.createElement("header",null,h.a.createElement("a",{className:"project-link",href:"https://github.com/nexushubs/zaml-lang/tree/master/packages/zaml-editor"},h.a.createElement(A.a,{className:"logo"})," Editor"),h.a.createElement("a",{className:"github-link",href:"https://github.com/nexushubs/zaml-lang"},"View on Github")),h.a.createElement("section",{className:"editor-panes"},h.a.createElement(T.a,{split:"vertical",defaultSize:"33.33%",minSize:200},h.a.createElement(p.a,{title:"Source"},h.a.createElement(E.a,{value:t,height:i-40,onChange:function(t){return e.handleSourceChange(t)}})),h.a.createElement(T.a,{split:"vertical",defaultSize:"50%"},h.a.createElement(p.a,{title:"Visual"},h.a.createElement(v.a,{root:a,selectedNode:s||r,onSelect:function(t){return e.setState({selectedNode:t})},onChange:function(t,n){return e.handleNodeChange(t,n)}})),h.a.createElement(p.a,{title:"AST"},h.a.createElement(m.a,{root:a,selectedNode:r,onSelect:function(t){return e.setState({selectedNode:t})},onHover:function(t){return e.setState({hoveredNode:t})},onChange:function(t){return e.handleNodeChange(a,t)}}))))))}}]),t}(h.a.Component);_.defaultProps={defaultSource:"",className:"",onChange:function(){}}}).call(this,n(20))},67:function(e,t,n){"use strict";n.d(t,"a",function(){return T});var a=n(0),i=n.n(a);function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var s=i.a.createElement("title",null,"ZAML-logo"),o=i.a.createElement("path",{fill:"#fff",d:"M132.27,162.53,182.46,35.88h10.68L242.7,162.53h-9.83L216.64,122H158.11l-16.23,40.58Zm81.16-48.7L187.38,45.7l-26.7,68.13Z"}),u=i.a.createElement("path",{fill:"#fff",d:"M404.81,35.88h8.54V154.42h68.14v8.12H404.81Z"}),c=i.a.createElement("circle",{fill:"#fff",cx:91,cy:44.5,r:4}),l=i.a.createElement("path",{fill:"#fff",d:"M115.47,35.5h-5a54.66,54.66,0,0,0-1-10.36c-1.07-4.28-6.09-10.34-6.3-10.6l-1.5-1.8-5.3,11.14-1-2c-2.21-4.43-10.89-7.42-11.87-7.75l-2.19-.73L83.4,35.5H36v0c-7.77.27-14,11.14-14,19s6.23,9.71,14,10v0H89.75L22.31,154.42v8.12h92.32l4.23.11S121,159.5,121,153.5s-3.4-15-12.5-15c-6.78,0-14.5,5-23.5,7S60,147.3,54.63,147c5.75-5.44,12.61-12,19.66-19H92.56l.42-.37c1-.87,24.31-21.36,30.37-34.5s7.1-54.83,7.14-56.59l0-1.59ZM49.84,147.41c-3.23-.24-7.53-.76-9.84-1.91a10.79,10.79,0,0,1-4.46-3.93l9.58-12.91,22.46,1.73C61.06,136.77,54.88,142.66,49.84,147.41ZM95,63.5s-1.76-7.52-1-10c1-3.4,7.94-10.83,12-15h8.53c0,.53,0,1.17,0,1.9l-.1.41C109,43.74,97.93,51.53,97,53.5S96.52,61,99.31,64.66c-1.35-.1-2.72-.27-4-.44l-.09-.06A4.8,4.8,0,0,0,95,63.5ZM109,76a79.27,79.27,0,0,1-9,2.49c-5,1-13,0-13,0l3-8s11,0,15-1a22.68,22.68,0,0,0,6.55-3.2C110.86,69.46,110,72.72,109,76ZM100,55.5c1.27-4.12,11.13-10.58,14.13-12.46l.28,1.1c-.09,2-.25,4.37-.5,7-4.19,1.21-7.81,2.49-8.57,3.26-1.53,1.54-2.77,6.17-1.83,10.35a22.78,22.78,0,0,1-2.67,0C100.42,62.8,99.38,57.51,100,55.5Zm12.46,6.2a52.93,52.93,0,0,1-7,2.68c.39-2.42,1.09-5.83,2-7.11s3.41-2.62,6.16-3.69C113.36,56.12,113,58.85,112.46,61.7ZM93.9,103.48l-2.23,2.41c-2.73.33-7.34.94-10.66,1.61-5,1-14-1-14-1l5-7s10,2,15,2a46.82,46.82,0,0,0,9.79-1.43Q95.42,101.83,93.9,103.48Zm-18,18.63c-2.09.61-8.46,2.39-10.95,2.39-3,0-11-2-11-2l6-7s10,1,14,1c2.58,0,7.21-1.62,10.2-2.77C81.48,116.53,78.72,119.34,75.95,122.11Zm20.16-16.6.2-.23v0l13.94,1c-1.5,1.69-3,3.36-4.58,5L92.86,109C94,107.83,95,106.67,96.1,105.52Zm3.83-4.64c.83-1.11,1.63-2.24,2.39-3.39l15.58-.87a80.42,80.42,0,0,1-5,6.6Zm2.14-8.73c-2.72.92-7.36,2.36-10.07,2.36-4,0-14-2-14-2l4-7s12,1,17,0a29.42,29.42,0,0,0,7.62-2.87A78.48,78.48,0,0,1,102.07,92.14Zm8.3-10.92,13.49-1.45c-.29,1.68-.6,3.27-.94,4.76L109,84.78Q109.71,83,110.37,81.23Zm1.71-5q.37-1.21.71-2.4l12.31-2.66c-.18,1.52-.38,3-.59,4.49Zm13.51-9.45-11.44,1.84q.49-2.1.88-4.1l11-2.33C125.89,63.65,125.75,65.19,125.59,66.73Zm.8-9-10.45,1.6c.27-1.72.49-3.39.68-5L126.78,52C126.67,53.82,126.54,55.73,126.39,57.69Zm.64-10-9.91,1.46c.11-1.41.2-2.73.26-3.94l9.86-1.83C127.19,44.71,127.12,46.16,127,47.72Zm.35-7.55-9.85,1.1c0-.86,0-1.62,0-2.27l.54-2.71,9.36,1.76C127.44,38.62,127.41,39.35,127.38,40.17ZM103,22.5c1.6,2.16,2.45,2.8,3,5a38,38,0,0,1,1.48,7.5L95,34.5Zm-16-1c2.86,1.2,5.92,2.84,7,5l.57,1.12L91.15,34.8,86.36,35Zm-14.15,40c2.93-3.55,7-9.51,6.15-11s-9.88-8.63-14.57-12h5c3.95,2.86,15,11.13,16.6,15,.66,1.62-2.73,5.58-5,8Zm-8.69,0c2.51-3.93,6.93-11.56,5.59-14.49-1.2-2.61-7.5-6.27-11.75-8.51h4.38C65.77,41,74.46,47.72,76,51.5c.7,1.73-3,7.1-5.09,10ZM58.29,44.86c-1.17-2.24-4.34-4.68-6.84-6.36h5c3.41,2.86,9.22,8,9.44,10s-1.62,9.22-2.66,13H53.83C55.92,57,59.82,47.78,58.29,44.86ZM49.73,38.5c1.57,2.07,3.73,5.17,4,6.9.34,2.07-.46,11.5-.89,16.1H44.16c2.25-4,6.89-12.79,5.84-16a25.41,25.41,0,0,0-4.36-7ZM38,38.5h6.64c1.16,2.25,2.5,5.21,2.5,6.8,0,2.17-2.5,11.94-3.61,16.2H38a33,33,0,0,0,2-11A43.6,43.6,0,0,0,38,38.5Zm45.1,23c3.13-3,7.22-8,6.58-9.11-1.23-2.1-11.76-9.83-18.09-13.89h33.72C100.81,42.24,93.63,48.44,92.43,51c-1.05,2.24-1.78,8.57,1.36,12.27L91,61.5ZM91.43,125H77.3c3.76-3.75,7.52-7.58,11.15-11.36l13.63,1.29C97.09,119.91,92.76,123.82,91.43,125Zm28.4-31.54-14.58-.89q.75-1.37,1.44-2.76l15.15-1.15a26.58,26.58,0,0,1-1.19,3.21C120.4,92.39,120.12,92.92,119.83,93.46Z"}),d=i.a.createElement("rect",{fill:"#fff",x:255,y:36.5,width:14.69,height:15,rx:1.5,ry:1.5}),h=i.a.createElement("rect",{fill:"#fff",x:258.07,y:55.56,width:8.54,height:106.97}),f=i.a.createElement("polygon",{fill:"#fff",points:"364.01 35.88 317.88 151.85 274.33 42.9 274.33 64.8 313.82 162.53 321.72 162.53 368.93 45.7 368.93 162.53 377.47 162.53 377.47 35.88 364.01 35.88"}),T=function(e){return i.a.createElement("svg",r({id:"Layer_1","data-name":"Layer 1",viewBox:"0 0 500 180"},e),s,o,u,c,l,d,h,f)};n.p},68:function(e,t,n){"use strict";var a,i=n(40),r=n(4),s=n(5),o=n(7),u=n(6),c=n(8),l=n(16),d=n.n(l),h=n(0),f=n.n(h),T=n(34),p=(n(10),n(14)),E=n(3),v=n.n(E),A=(n(147),p.NodeType);!function(e){e.Header="header",e.Footer="footer",e.Whole="whole"}(a||(a={}));var m=function(){},g=function(e){function t(e){return Object(r.a)(this,t),Object(o.a)(this,Object(u.a)(t).call(this,e))}return Object(c.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,n=this.props,i=n.node,r=n.selectedNode,s=n.selectedPart,o=n.expandedNodes,u=n.onSelect,c=n.onSelectPart,l=n.onExpansionChange,f=n.onMouseEnter,T=n.onMouseOut;if(!i)return null;var p=s,E=o.indexOf(i.id)>-1||i.isRoot;E&&p===a.Whole&&(p=a.Header);var m=r===i,g=function(e){return function(t){t.stopPropagation(),u(i),c(e)}},y={onMouseEnter:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){e.stopPropagation(),f(i)}),onMouseOut:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){e.stopPropagation(),T(i)})},N=null;if(d.a.isEmpty(i.children)?"text"===i.type&&(N=i.content):N=h.createElement("div",{key:"children",className:"children"},d.a.map(i.children,function(n,a){return h.createElement(t,Object.assign({},e.props,{key:a,node:n}))})),i.type===A.TEXT)return h.createElement("div",Object.assign({className:v()("text",{selected:m}),onClick:g(a.Whole)},y),'"',i.content,'"');if(i.type===A.ENTITY||i.isBlock||i.isWrappingTag){var _,S=i.type===A.ENTITY,b=i.type===A.TAG;1===i.children.length&&i.firstChild.type===A.TEXT&&(_=i.firstChild.content);b||S?i.name:i.type;return h.createElement("div",Object.assign({className:v()("block",{expanded:E,selected:m&&p===a.Whole,"node-selected":m}),onClick:E?void 0:g(a.Whole)},y),i.type!==A.ROOT&&h.createElement("span",{className:"indicator",onClick:function(e){e.stopPropagation(),l(i,!E)}},"\u25be"),h.createElement("span",{className:v()("header",{selected:m&&p===a.Header}),onClick:E?g(a.Header):void 0},i.openDescriptorStart,i.labels.map(function(e){return h.createElement("span",{key:e,className:"prop label"},"#",e)}),d.a.keys(i.attributes).map(function(e){var t=i.attributes[e];return h.createElement("span",{key:e,className:"prop attribute"},h.createElement("span",{className:"key"},e),h.createElement("span",{className:"assignment"},"="),h.createElement("span",{className:"value"},JSON.stringify(t)))}),i.openDescriptorEnd),E?N:h.createElement("span",{className:"ellipsis"},d.a.truncate(_,{length:10})||"..."),h.createElement("span",{className:v()("footer",{selected:m&&p===a.Footer}),onClick:E?g(a.Footer):void 0},i.closingDescriptor))}return null}}]),t}(h.Component);g.defaultProps={node:void 0,expandedNodes:[],selectedNode:void 0,selectedPart:a.Whole,onSelect:m,onSelectPart:m,onExpansionChange:m,onMouseEnter:m,onMouseOut:m};p.NodeType;var y=function(e){function t(){return Object(r.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.selected,n=e.node,a=e.onClick;return n?f.a.createElement("span",{className:v()("zaml-tree-path-item",n.type,{selected:t}),onClick:a},n.descriptor):null}}]),t}(f.a.Component);y.defaultProps={selected:!1,node:void 0,onClick:function(){}};var N=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(o.a)(this,Object(u.a)(t).call(this,e))).state={nodeList:n.buildNodeList(e.selectedNode)},n}return Object(c.a)(t,e),Object(s.a)(t,[{key:"componentWillReceiveProps",value:function(e){var t=this.state.nodeList,n=e.selectedNode;n?d.a.includes(t,n)||this.setState({nodeList:this.buildNodeList(n)}):this.setState({nodeList:[]})}},{key:"buildNodeList",value:function(e){for(var t=[];e;)t.unshift(e),e=e.parent;return t}},{key:"render",value:function(){var e=this.props,t=e.selectedNode,n=e.onSelect,a=this.state.nodeList;return f.a.createElement("div",{className:"zaml-tree-path"},a.map(function(e){return f.a.createElement(y,{key:e.id,selected:e===t,node:e,onClick:function(){return n(e)}})}))}}]),t}(f.a.Component);N.defaultProps={selectedNode:void 0,onSelect:function(){}};var _=function(e){function t(){var e,n;Object(r.a)(this,t);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return(n=Object(o.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(i)))).state={},n}return Object(c.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return f.a.createElement("div",{className:"zaml-tree-toolbar"},"toolbar")}}]),t}(f.a.Component);_.defaultProps={};n(149),n(151);var S,b=function(e){function t(){return Object(r.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.tabs,n=e.selectedTab,a=e.onTabChange,i=e.children;return f.a.createElement("div",{className:"tab-view"},f.a.createElement("ul",{className:"tabs"},t.map(function(e){return f.a.createElement("li",{key:e,className:v()("tab",{selected:e===n}),onClick:function(){return a(e)}},f.a.createElement("span",{className:"label"},e))})),f.a.createElement("div",{className:"content"},i))}}]),t}(f.a.Component);!function(e){e.Labels="Labels",e.Attributes="Attributes",e.Metadata="Metadata"}(S||(S={}));var k=d.a.values(S),R=k[0],I=-1,O=function(e){function t(){var e,n;Object(r.a)(this,t);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return(n=Object(o.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(i)))).state={selectedTab:R,editingIndex:I,inlineError:""},n.editingElement=null,n}return Object(c.a)(t,e),Object(s.a)(t,[{key:"componentWillReceiveProps",value:function(e){e.node!==this.props.node&&this.setState({selectedTab:R,editingIndex:I})}},{key:"renderValue",value:function(e){return e instanceof p.Node?e.toSource():JSON.stringify(e)}},{key:"renderEmptyTip",value:function(){return f.a.createElement("div",{className:"select-tip"},"Please select a node")}},{key:"renderTabContent",value:function(){var e=this.props.node,t=this.state.selectedTab;if(!e)return this.renderEmptyTip();switch(t){case S.Labels:return this.renderLabelEditor(e);case S.Attributes:return this.renderAttributeEditor(e,e.attributes);case S.Metadata:return this.renderAttributeEditor(e,e.metadata)}}},{key:"focusEditingElement",value:function(){this.editingElement&&(this.editingElement.focus(),this.editingElement.select())}},{key:"handleLabelEdit",value:function(e){var t=this;this.setState({editingIndex:e},function(){t.focusEditingElement()})}},{key:"handleLabelUpdate",value:function(e){var t=this.props,n=t.node,a=t.onChange,i=this.state.editingIndex;if(n){var r=n.labels[i]||"";if(e!==r){try{p.parse("{INLINE #".concat(e,"}TESTING{/INLINE}"))}catch(s){return void this.setState({inlineError:"Invalid label"})}i===n.labels.length?n.addLabel(e):""===e||n.labels.indexOf(e)>=0?n.removeLabel(r):n.labels[i]=e}this.cancelLabelEditing(),a(n)}}},{key:"cancelLabelEditing",value:function(){this.setState({editingIndex:I,inlineError:""})}},{key:"renderLabelEditor",value:function(e){var t=this,n=this.state,a=n.editingIndex,r=n.inlineError,s=Object(i.a)(e.labels).concat([""]);return f.a.createElement("div",{className:"label-editor"},f.a.createElement("table",null,f.a.createElement("tbody",null,s.map(function(e,n){return f.a.createElement("tr",{key:e,className:v()({error:n===a&&r})},f.a.createElement("td",{className:"marker"},e||n===a?"#":""),n===a?f.a.createElement("td",null,f.a.createElement("input",{ref:function(e){return t.editingElement=e},defaultValue:e,onBlur:function(e){t.handleLabelUpdate(e.currentTarget.value)},onKeyDown:function(e){"Enter"===e.key?t.handleLabelUpdate(e.currentTarget.value):"Escape"===e.key&&t.cancelLabelEditing()}})):f.a.createElement("td",{className:"editable",onClick:function(){return t.handleLabelEdit(n)}},e))}))))}},{key:"renderAttributeEditor",value:function(e,t){var n=this,a=Object.keys(t);return f.a.createElement("div",{className:"attribute-editor"},f.a.createElement("table",null,f.a.createElement("tbody",null,a.map(function(e){return f.a.createElement("tr",{key:e},f.a.createElement("th",null,e),f.a.createElement("td",null,n.renderValue(t[e])))}))))}},{key:"render",value:function(){var e=this,t=(this.props.node,this.state.selectedTab);return f.a.createElement("div",{className:"zaml-prop-editor"},f.a.createElement(b,{tabs:k,selectedTab:t,onTabChange:function(t){return e.setState({selectedTab:t})}},this.renderTabContent()))}}]),t}(f.a.Component);O.defaultProps={onChange:function(){}};n(153);n.d(t,"a",function(){return L});var C=function(){},L=function(e){function t(){var e,n;Object(r.a)(this,t);for(var i=arguments.length,s=new Array(i),c=0;c<i;c++)s[c]=arguments[c];return(n=Object(o.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(s)))).state={selectedPart:a.Header,expandedNodes:[]},n}return Object(c.a)(t,e),Object(s.a)(t,[{key:"handleExpansionChange",value:function(e,t){var n=this.props.selectedNode,r=this.state.expandedNodes;n===e&&this.setState({selectedPart:t?a.Header:a.Whole}),t&&!d.a.includes(r,e.id)?this.setState({expandedNodes:Object(i.a)(r).concat([e.id])}):!t&&d.a.includes(r,e.id)&&this.setState({expandedNodes:d.a.without(r,e.id)})}},{key:"componentWillReceiveProps",value:function(e){var t=e.selectedNode;if(t&&t!==this.props.selectedNode){var n=this.state.expandedNodes,a=t.path.map(function(e){return e.id});this.setState({expandedNodes:d.a.union(n,a)})}}},{key:"render",value:function(){var e=this,t=this.props,n=t.root,a=t.selectedNode,i=t.onSelect,r=t.onHover,s=t.onChange,o=this.state,u=o.expandedNodes,c=o.selectedPart;return f.a.createElement("div",{className:"zaml-tree-view"},f.a.createElement(T.a,{split:"horizontal",defaultSize:"60%",minSize:200},f.a.createElement("div",{className:"tree-container"},f.a.createElement(_,null),f.a.createElement("div",{className:"tree"},f.a.createElement(g,{node:n,selectedNode:a,selectedPart:c,expandedNodes:u,onSelect:i,onSelectPart:function(t){return e.setState({selectedPart:t})},onMouseEnter:r,onMouseOut:function(){return r()},onExpansionChange:function(t,n){return e.handleExpansionChange(t,n)}})),f.a.createElement(N,{selectedNode:a,onSelect:i})),f.a.createElement(O,{node:a,onChange:s})))}}]),t}(f.a.Component);L.defaultProps={onSelect:C,onHover:C,onChange:C}},69:function(e,t,n){"use strict";var a=n(4),i=n(5),r=n(7),s=n(6),o=n(8),u=n(0),c=n.n(u),l=n(62),d=(n(116),n(118),n(120),n(38)),h=n.n(d);n(122);h.a.defineSimpleMode("zaml",{start:[{regex:/#[^#\s\n}]+/,token:"variable-3"},{regex:/{\/?([^\s}]+)}/,token:"keyword"},{regex:/[^\s{\n]+(?=[:\uff1a=][^\n])/,token:"variable-2"},{regex:/{|}/,token:"def"},{regex:/(?={)[^\s}]+/,token:"keyword"},{regex:/\[[^\]]+\]/,token:"string"},{regex:/(?:BLOCK|INLINE)\b/,token:"keyword"},{regex:/true|false|null|undefined/,token:"atom"},{regex:/0x[a-f\d]+|[-+]?(?:\.\d+|\d+\.?\d*)(?:e[-+]?\d+)?/i,token:"number"},{regex:/~[^~].*/,token:"comment"},{regex:/~~~/,token:"comment",next:"comment"},{regex:/\/(?:[^\\]|\\.)*?\//,token:"variable-3"},{regex:/[\{]/,indent:!0},{regex:/[\}]/,dedent:!0}],comment:[{regex:/.*?~~~/,token:"comment",next:"start"},{regex:/.*/,token:"comment"}],meta:{dontIndentStates:["comment"],lineComment:"~"}}),n.d(t,"a",function(){return T});var f={mode:"zaml",lineNumbers:!0,lineWrapping:!0},T=function(e){function t(e){var n;return Object(a.a)(this,t),(n=Object(r.a)(this,Object(s.a)(t).call(this,e))).state={value:e.value},n}return Object(o.a)(t,e),Object(i.a)(t,[{key:"componentWillReceiveProps",value:function(e){this.editor&&(e.height!==this.props.height&&this.editor&&this.editor.setSize(null,e.height),e.value!==this.props.value&&this.editor.setValue(e.value))}},{key:"render",value:function(){var e=this,t=this.props.onChange,n=this.state.value;return c.a.createElement("div",{className:"zaml-source"},c.a.createElement(l.Controlled,{value:n,options:f,onBeforeChange:function(t,n,a){return e.setState({value:a})},onChange:function(e){function t(t,n,a){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e,n,a){return t(a)}),editorDidMount:function(t){return e.editor=t}}))}}]),t}(c.a.Component);T.defaultProps={value:"",height:-1,onChange:function(){}}},70:function(e,t,n){"use strict";var a,i,r,s=n(4),o=n(5),u=n(7),c=n(6),l=n(8),d=n(0),h=n.n(d),f=n(14),T=n(160),p=n(140),E=n(155),v=n(157),A=n(16),m=n.n(A),g=n(3),y=n.n(g),N=(n(123),f.NodeType),_=function(e){function t(e){return Object(s.a)(this,t),Object(u.a)(this,Object(c.a)(t).call(this,e))}return Object(l.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e,n=this,a=this.props,i=a.node,r=a.selectedNode;if(!i)return null;var s=i===r,o=[];if(i.type===N.ROOT)e="div";else if(i.type===N.PARAGRAPH)e="p";else if(i.type===N.TEXT)e="span";else if(i.type===N.ENTITY){if("LINK"===i.name)return h.a.createElement("a",{className:"zaml-entity","node-name":"link","node-id":i.id,href:i.attributes.url},h.a.createElement(t,Object.assign({"node-id":i.children[0].id},this.props,{node:i.children[0]})));e="span"}else e=i.type===N.TAG?i.isBlock?"div":"span":null;return e?(m.a.isEmpty(i.children)?"text"===i.type&&o.push(i.content):o.push(h.a.createElement("span",{key:"children",className:"children"},m.a.map(i.children,function(e,a){return h.a.createElement(t,Object.assign({},n.props,{key:a,node:e}))}))),h.a.createElement(e,{className:y()("zaml-node","".concat(i.type),{block:i.isBlock,selected:s}),"node-name":i.name&&i.name.toLowerCase(),"node-id":i.id},o)):null}}]),t}(h.a.Component);n(125),n(127);n.d(t,"a",function(){return b});var S=f.NodeType,b=Object(T.a)((r=i=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(u.a)(this,Object(c.a)(t).call(this,e))).handleContextMenu=function(e,t){n.currentNode=t,n.setState({node:t})},n.state={},n}return Object(l.a)(t,e),Object(o.a)(t,[{key:"handleDoubleClick",value:function(e){var t=window.getSelection();if(0!==t.rangeCount){var n=t.getRangeAt(0),a=n.startContainer,i=a.textContent;if(i){e.preventDefault(),e.stopPropagation();for(var r=/[!?:;\u3002\uff01\uff1f\uff1a\uff1b]/g,s=0,o=i.length,u=0;r.exec(i);)if(s=u,u=r.lastIndex,r.lastIndex++,u>n.startOffset){o=u;break}n.setStart(a,s),n.setEnd(a,o)}}}},{key:"handleCreateBlock",value:function(){var e=this.props,t=e.root,n=e.onChange,a=window.getSelection();if(0!==a.rangeCount){var i=a.getRangeAt(0),r=this.getNodeByElement(i.commonAncestorContainer),s=this.getNodeByElement(i.startContainer),o=this.getNodeByElement(i.endContainer);if(r&&s&&o){var u=f.Node.createBlockByRange({startNode:s,startOffset:i.startOffset,endNode:o,endOffset:i.endOffset});a.removeAllRanges(),n(t,u)}}}},{key:"handleRemoveBlock",value:function(e){if(e){var t=this.props,n=t.root;(0,t.onChange)(n,e.flatten())}}},{key:"handleCreateEntity",value:function(e,t){if(t){var n=this.props,a=n.root,i=n.onChange,r=window.getSelection();if(r.anchorNode===r.focusNode){if(0!==r.rangeCount){var s=r.getRangeAt(0);i(a,e.createEntities([{type:t,start:s.startOffset,end:s.endOffset}])[0])}}else alert("Entity is only allowed in pure text!")}}},{key:"handleRemoveEntity",value:function(e){if(e){var t=this.props,n=t.root;(0,t.onChange)(n,e.removeEntity())}}},{key:"handleInspect",value:function(e){(0,this.props.onSelect)(e)}},{key:"handleSplitSentences",value:function(e){if(e){var t=this.props,n=t.root,a=t.onChange;e.splitText("\u3002\uff01\uff1f.!?","SENTENCE"),a(n)}}},{key:"getNodeByElement",value:function(e){var t=this.props.root;if(t){if(e.nodeType===e.TEXT_NODE||e.classList.contains("children")){if(!e.parentElement)return;e=e.parentElement}var n=e.getAttribute("node-id");if(n)return t.getNodeById(n)}}},{key:"render",value:function(){var e=this,t=this.props,n=t.root,a=t.selectedNode;return h.a.createElement("div",{className:"zaml-visual-editor",onDoubleClick:function(t){return e.handleDoubleClick(t)}},h.a.createElement(_,{node:n,selectedNode:a}))}},{key:"renderContextMenu",value:function(e){var t=this,n=this.props.commonEntityNames,a=this.getNodeByElement(e.target),i=a;if(a&&(a.type===S.TEXT&&(i=a.parent),i)){var r=i;return h.a.createElement(p.a,{id:"menu"},h.a.createElement(E.a,{disabled:!0,text:i.descriptor}),h.a.createElement(v.a,null),h.a.createElement(E.a,{text:"Create Block",onClick:function(){return t.handleCreateBlock()}}),i.isWrappingTag&&h.a.createElement(E.a,{text:"Remove Block",onClick:function(){return t.handleRemoveBlock(i)}}),i.isBlock&&h.a.createElement(E.a,{text:"Split Sentences",onClick:function(){return t.handleSplitSentences(i)}}),a.type===S.TEXT&&a.parent&&a.parent.type!==S.ENTITY&&h.a.createElement(E.a,{text:"Create Entity"},n&&n.map(function(e){return h.a.createElement(E.a,{key:e,text:e,onClick:function(){return t.handleCreateEntity(a,e)}})}),h.a.createElement(E.a,{text:"other...",onClick:function(){return t.handleCreateEntity(a,prompt("Please input entity type","PER"))}})),i.type===S.ENTITY&&h.a.createElement(E.a,{text:"Remove Entity",onClick:function(){return t.handleRemoveEntity(i)}}),h.a.createElement(v.a,null),h.a.createElement(E.a,{text:"Inspect",onClick:function(){return t.handleInspect(r)}}))}}}]),t}(h.a.Component),i.defaultProps={commonEntityNames:["PER","ORG","LOC","DATE"],onSelect:function(){},onChange:function(){}},a=r))||a},75:function(e,t,n){e.exports=n(156)},80:function(e,t,n){},82:function(e,t,n){},84:function(e,t,n){"use strict";(function(e){var a=n(24),i=n(25);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,s=i(n(30)),o=i(n(36)),u=i(n(26)),c=a(n(31)),l=i(n(50)),d=i(n(52)),h=i(n(54)),f=a(n(47)),T=n(45);!function(e){e[e.METADATA=0]="METADATA",e[e.NORMAL=1]="NORMAL",e[e.SINGLE_COMMENT=2]="SINGLE_COMMENT",e[e.MULTIPLE_COMMENT=3]="MULTIPLE_COMMENT",e[e.START=4]="START",e[e.TAG_START=5]="TAG_START",e[e.TAG_NAME=6]="TAG_NAME",e[e.ATTRIBUTE_LIST=7]="ATTRIBUTE_LIST",e[e.ATTRIBUTE_NAME=8]="ATTRIBUTE_NAME",e[e.ATTRIBUTE_ASSIGN=9]="ATTRIBUTE_ASSIGN",e[e.ATTRIBUTE_VALUE=10]="ATTRIBUTE_VALUE",e[e.ATTRIBUTE_FINISH=11]="ATTRIBUTE_FINISH",e[e.TAG_END=12]="TAG_END",e[e.LABEL_START=13]="LABEL_START",e[e.ENTITY_START=14]="ENTITY_START",e[e.ENTITY_BODY=15]="ENTITY_BODY",e[e.ENTITY_END=16]="ENTITY_END",e[e.END=17]="END",e[e.FINISH=18]="FINISH"}(r||(r={}));var p=["METADATA","NORMAL","SINGLE_COMMENT","MULTIPLE_COMMENT","START","TAG_START","TAG_NAME","ATTRIBUTE_LIST","ATTRIBUTE_NAME","ATTRIBUTE_ASSIGN","ATTRIBUTE_VALUE","ATTRIBUTE_FINISH","TAG_END","LABEL_START","ENTITY_START","ENTITY_BODY","ENTITY_END","END","FINISH"],E=function(e){return p[e]},v=function(e){var t=e.match(T.P_LINE_BREAK);return t?t.length:0},A=function(){function t(n,a){(0,s.default)(this,t),(0,u.default)(this,"text",void 0),(0,u.default)(this,"stream",void 0),(0,u.default)(this,"options",void 0),(0,u.default)(this,"parsed",void 0),this.text=n,this.stream=new d.default(n);var i={verbose:e&&"verbose"===Object({NODE_ENV:"production",PUBLIC_URL:"/zaml-lang"}).DEBUG};this.options=c.defaults(a,i),this.parsed=!1}return(0,o.default)(t,null,[{key:"from",value:function(e,n){return new t(e,n)}}]),(0,o.default)(t,[{key:"debug",value:function(){var e;this.options.verbose&&(e=console).log.apply(e,arguments)}},{key:"process",value:function(){for(var e=this,t=this.text,n=this.stream,a=Date.now(),i=r.METADATA,s=0,o=0,u=-1,d={unwrapped:!1,inline:!1,embedded:!1,isClosing:!1,key:void 0,value:void 0},p=f.default.create(f.NodeType.ROOT,void 0,{source:t}),A=[],m=p,g=function(e){return"".concat(e.type).concat(e.name?":".concat(e.name):"")},y=function(t){if(e.options.verbose){var n=A.concat([m]),a=n.map(function(e,t){var a=g(e);return a=t===n.length-1?l.default.cyanBright(a):l.default.green(a)}).join(l.default.redBright(" > "));return t&&(a+=l.default.grey("".concat(" > ").concat(g(t)))),a}},N=function(t){-1===m.start&&(m.start=n.pos),A.push(m),m=t,e.debug("push: ".concat(y(),"\n"))},_=function(t){var a=m;if(m.end=n.pos,(m.start===m.end||m.type===f.NodeType.PARAGRAPH&&!m.hasChild()&&m.parent)&&m.parent.removeChild(m),m=A.pop(),e.debug("pop : ".concat(y(a),"\n")),!m)throw b(t||"unexpected closing node")},S=function(){if(m.parent&&m.parent.type===f.NodeType.PARAGRAPH){var e=m;_(),m.removeChild(e),_(),m.appendChild(e),N(e)}},b=function(a){var i,r;return i=n.getPosition(u),r=n.pos===u?n.getPosition(u+1):n.getPosition(),e.debug("error: '".concat(a,"' at ").concat(i.ln,":").concat(i.col)),e.debug("current node:"),e.debug(m.toJSON()),e.debug("current parsing state:"),e.debug(JSON.stringify(p,null,2)),new h.default(a,t,i,r)};i!==r.FINISH;){if(Date.now()-a>=T.PROCESSING_TIMEOUT&&(this.debug("parsing timeout!"),i=r.FINISH),i===o&&u===n.pos)throw new Error("Parser fall into infinite loop!");switch(o=i,u=n.pos,this.debug(l.default.magenta("# ".concat(E(i),", pos = ").concat(n.pos))),this.options.verbose&&n.debugState(),i){case r.METADATA:n.eatWhile(T.P_WHITE_SPACES_EXT),n.match(T.T_METADATA_MARKER)||n.match(T.P_ATTRIBUTE_LIST,{consume:!1})?(m.states.metadata=!0,i=r.ATTRIBUTE_LIST):i=r.NORMAL;break;case r.NORMAL:if((n.sol(!0)||n.eol(!0))&&n.eatWhile(T.P_WHITE_SPACE),n.match(T.P_PARAGRAPH_BREAK)){_(),m.states.unwrapped&&_();break}if(s=n.pos,m.type!==f.NodeType.PARAGRAPH&&!m.isInlineBlock&&n.sol(!0)){var k=m.createChild(f.NodeType.PARAGRAPH,void 0,{start:s});N(k)}var R=n.readTo(T.P_MARKER,{toEOF:!0});R&&(0===m.children.length&&(R=c.trimStart(R)),R=R.replace(T.P_SPACE_WRAPPED_LINE_BREAK,T.T_LINE_BREAK),(R=c.trimEnd(R,T.T_LINE_BREAKS))&&m.appendText(R,{start:s,end:n.pos})),i=n.match(T.P_PARAGRAPH_BREAK,{consume:!1})?r.NORMAL:r.START;break;case r.START:s=n.pos;var I=n.eat(T.P_MARKER);if(T.P_LABEL_START.lastIndex=0,I===T.T_SINGLE_LINE_COMMENT)i=0===n.eatWhile(T.T_SINGLE_LINE_COMMENT).length?r.SINGLE_COMMENT:r.MULTIPLE_COMMENT;else if(I===T.T_TAG_START)i=r.TAG_START;else if(T.P_LABEL_START.test(I))d.unwrapped=!0,i=r.TAG_START;else if(I===T.T_TAG_END)d.isClosing=!0,i=r.TAG_END;else if(I===T.T_ENTITY_START)i=r.ENTITY_START;else{if(!n.eof())throw b("empty start");i=r.END}break;case r.SINGLE_COMMENT:case r.MULTIPLE_COMMENT:s=n.pos;var O=void 0;(O=i===r.SINGLE_COMMENT?n.readTo(T.P_LINE_BREAK):n.readTo(T.P_MULTIPLE_LINE_COMMENT,{skipMatched:!0}))&&(i===r.MULTIPLE_COMMENT&&(O=O.replace(T.P_SPACE_WRAPPED_LINE_BREAK,"\n")),O=c.trim(O)),O&&m.createChild(f.NodeType.COMMENT,void 0,{start:s,end:n.pos,content:O}),i=r.NORMAL;break;case r.TAG_START:if(n.eat(T.T_TAG_CLOSING))d.isClosing=!0,i=r.TAG_NAME;else if(n.match(T.P_LINE_BREAK))i=r.NORMAL;else if(m.type!==f.NodeType.ENTITY&&(d.unwrapped||n.eat(T.P_LABEL_START)))i=r.LABEL_START;else{var C=f.default.create(f.NodeType.TAG,"",{start:s});d.embedded?(C.states.embedded=!0,C.states.metaKey=d.key,d.embedded=!1):m.appendChild(C),N(C),i=r.TAG_NAME}if(i===r.NORMAL||i===r.LABEL_START){n.pushCursor(s);var L=n.sol(!0)?"BLOCK":"INLINE";n.popCursor(),m.type===f.NodeType.PARAGRAPH&&"BLOCK"===L&&_();var x=m.createChild(f.NodeType.TAG,L,{start:s,states:{simpleBlock:!0,unwrapped:d.unwrapped}});d.unwrapped=!1,N(x)}break;case r.TAG_NAME:var P=n.match(T.P_TAG_NAME);if(!P)throw b("expected tag name");if(d.inline="INLINE"===P,d.isClosing){if(m.type===f.NodeType.PARAGRAPH&&(n.pushCursor(s),_(),n.popCursor()),P!==m.name)throw b("unexpected closing tag");if(!n.eat(T.T_TAG_END))throw b("invalid closing tag");if(!d.inline&&!n.eol())throw b("closing block tag must take the whole line");i=r.TAG_END}else{if(m.name=P,m.isWrappingTag){if(n.pushCursor(m.start||0),"BLOCK"===m.name&&!n.sol(!0))throw b("unexpected start of block inline");n.popCursor(),m.isBlock&&S()}i=r.ATTRIBUTE_LIST}break;case r.ATTRIBUTE_LIST:var D=m.states.simpleBlock||m.states.unwrapped?T.P_WHITE_SPACE:T.P_WHITE_SPACES_EXT,B=n.eatWhile(D),M=m.states.metadata;if(M){var F=!1;if(n.match(T.T_METADATA_MARKER)){if(!n.match(T.P_LINE_BREAK))throw b("expected new line after metadata closed");F=!0}var w=v(B);if(w>1&&(F=!0),F){i=r.NORMAL,m.states.metadata=!1;break}if(m.type===f.NodeType.ROOT&&!n.match(T.P_ATTRIBUTE_LIST,{consume:!1})&&1===w){var G=m.createChild(f.NodeType.TAG,"BLOCK",{labels:m.labels,states:{unwrapped:!0},metadata:m.metadata});m.clearLabels(),m.clearMetadata(),N(G),i=r.NORMAL;break}}if(n.match(T.P_LINE_BREAK))i=r.NORMAL;else if(n.eat(T.T_TAG_END))i=r.TAG_END;else if(n.match(T.P_LABEL_START))i=r.LABEL_START;else{if(!B&&!M&&this.stream.pos>1){if(c.isEmpty(m.attributes)&&T.P_ATTRIBUTE_ASSIGN.test(n.peek())){d.key=m.name,m.name="BLOCK",m.states.simpleBlock=!0,S(),i=r.ATTRIBUTE_ASSIGN;break}throw b('expecting end of tag "}" or attribute list')}i=r.ATTRIBUTE_NAME,i=n.match(T.P_ATTRIBUTE_LIST,{consume:!1})?r.ATTRIBUTE_NAME:r.NORMAL}break;case r.ATTRIBUTE_NAME:var U=n.match(T.P_ATTRIBUTE_NAME);if(!U)throw b("expecting attribute name");d.key=U,i=r.ATTRIBUTE_ASSIGN;break;case r.ATTRIBUTE_ASSIGN:var j=n.peek();if(j===T.T_TAG_END)i=r.ATTRIBUTE_FINISH;else{if(!(j=n.eat(T.P_ATTRIBUTE_ASSIGN)))throw b('expecting assignment "=" or ":"');T.P_ASSIGN_YAML.test(j)&&n.eatSpaces(),i=r.ATTRIBUTE_VALUE}break;case r.ATTRIBUTE_VALUE:var H=n.peek(),K=void 0;if(H===T.T_TAG_START||H===T.T_ENTITY_START){d.embedded=!0,i=r.START;break}if(H===T.T_STRING_START){K=n.match(T.P_STRING_LITERAL_QUOTED);try{K=JSON.parse(K)}catch(Q){throw b("invalid string literal")}}else if(n.match(T.P_DATE_LITERAL))K=n.lastMatch,K=new Date(K);else if(T.P_NUMBER_START.test(H))K=n.match(T.P_NUMBER_LITERAL),K=parseFloat(K);else if(n.match(T.P_BOOLEAN_TRUE))K=!0;else if(n.match(T.P_BOOLEAN_FALSE))K=!1;else if(K=n.match(T.P_STRING_LITERAL_UNQUOTED),c.isNull(K))throw b("unrecognized attribute value");if(c.isNull(K))throw b("invalid attribute value");d.value=K,i=r.ATTRIBUTE_FINISH;break;case r.ATTRIBUTE_FINISH:var Y=d.key,W=d.value;d.key=void 0,d.value=void 0,c.isUndefined(W)&&(W=!0),m.states.metadata?m.setMetadata(Y,W):m.setAttribute(Y,W),this.debug("# ".concat(m.states.metadata?"metadata":"attribute"," ").concat(Y,"=").concat(JSON.stringify(W))),this.debug(),i=r.ATTRIBUTE_LIST;break;case r.TAG_END:var z=m.isBlockTag&&!d.isClosing,Z=m;d.inline=Z.isInlineBlock,m.isWrappingTag&&!d.isClosing||(m.type===f.NodeType.PARAGRAPH&&_(),_(),m.type===f.NodeType.ENTITY&&(m.setAttributes(Z.attributes),m.name=Z.name,m.removeChild(Z),i=r.ENTITY_END,Z=m,_()),Z.states.embedded&&(m.states.metadata?m.setMetadata(Z.states.metaKey,Z):m.setAttribute(Z.states.metaKey,Z))),d.isClosing&&!d.inline&&n.skipOver(T.P_LINE_BREAK),d.isClosing=!1,d.inline=!1,i=z?r.METADATA:!Z.states.embedded||Z.isWrappingTag&&!d.isClosing?r.NORMAL:r.ATTRIBUTE_LIST;break;case r.LABEL_START:var X=n.match(T.P_LABEL_NAME);if(!X)throw b("expected label name");m.addLabel(X),i=r.ATTRIBUTE_LIST;break;case r.ENTITY_START:var V=f.default.create(f.NodeType.ENTITY,"",{start:s});d.embedded?(V.states.embedded=!0,V.states.metaKey=d.key,d.embedded=!1):m.appendChild(V),N(V),i=r.ENTITY_BODY;break;case r.ENTITY_BODY:s=n.pos;var J=n.readTo(T.T_ENTITY_END,{skipMatched:!0});if(!J)throw b("empty entity");if(-1!==J.search(T.P_LINE_BREAK))throw b("unexpected line break of entity");m.appendText(J,{start:s,end:s+J.length}),i=n.eat(T.T_TAG_START)?r.TAG_START:r.ENTITY_END;break;case r.ENTITY_END:_(),i=r.NORMAL;break;case r.END:m.type!==f.NodeType.ROOT&&_(),i=r.FINISH;break;case r.FINISH:}}return p.toString(),this.parsed=!0,this.debug("parsed result:"),this.debug(JSON.stringify(p.toJSON(),null,2)),p}}]),t}();t.default=A}).call(this,n(44))},92:function(e,t,n){"use strict";var a=n(25);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(30)),r=a(n(36)),s=a(n(26)),o=function(){function e(t,n,a,r){(0,i.default)(this,e),(0,s.default)(this,"lines",void 0),(0,s.default)(this,"text",void 0),(0,s.default)(this,"ln",void 0),(0,s.default)(this,"offset",void 0),this.lines=t,this.text=n,this.ln=a,this.offset=r}return(0,r.default)(e,[{key:"prev",value:function(){return this.lines[this.ln-2]}},{key:"next",value:function(){return this.lines[this.ln]}},{key:"toJSON",value:function(){return{ln:this.ln,start:this.start,end:this.end,text:this.text}}},{key:"length",get:function(){return this.text.length}},{key:"start",get:function(){return this.offset}},{key:"end",get:function(){return this.offset+this.text.length}}]),e}();t.default=o}},[[75,2,1]]]);
//# sourceMappingURL=main.2c6799d1.chunk.js.map