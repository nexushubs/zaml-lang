(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{111:function(e,t,n){},114:function(e,t,n){},116:function(e,t,n){},136:function(e,t,n){},138:function(e,t,n){},14:function(e,t,n){"use strict";var a=n(25),r=n(24);Object.defineProperty(t,"__esModule",{value:!0}),t.tokenize=l,t.parse=u,Object.defineProperty(t,"Tokenizer",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"TextStream",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"TextLine",{enumerable:!0,get:function(){return s.TextLine}}),Object.defineProperty(t,"Node",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"NodeType",{enumerable:!0,get:function(){return o.NodeType}}),Object.defineProperty(t,"ParseError",{enumerable:!0,get:function(){return c.default}}),t.default=void 0;var i=r(n(84)),s=a(n(53)),o=a(n(46)),c=r(n(54));function u(e,t){return new i.default(e,t).process()}function l(e,t){return console.warn("zaml.tokenize() is deprecated, please use zaml.parse() instead"),u(e,t)}var d={ParseError:c.default,Tokenizer:i.default,TextStream:s.default,TextLine:s.TextLine,Node:o.default,NodeType:o.NodeType,tokenize:l,parse:u};t.default=d},140:function(e,t,n){},142:function(e,t,n){},144:function(e,t,n){},147:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(15),s=n.n(i),o=(n(80),n(8)),c=n(9),u=n(11),l=n(10),d=n(12),h=(n(82),n(61)),f=function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(h.a,{defaultSource:"---\nfoo: bar\n---\n#Question #Q #Q1 \n  What is your name?\n\n#Answer #A \n  My name is [Jack]{PER}\n"}))}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(f,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},37:function(e,t,n){"use strict";var a=n(25);Object.defineProperty(t,"__esModule",{value:!0}),t.PROCESSING_TIMEOUT=t.P_MARKER=t.END_MARKERS=t.START_MARKERS=t.P_FULL_WIDTH_CHARACTER=t.P_BOOLEAN_FALSE=t.P_BOOLEAN_TRUE=t.P_STRING_LITERAL_UNQUOTED_TESTER=t.P_STRING_LITERAL_UNQUOTED=t.P_STRING_LITERAL_QUOTED=t.P_NUMBER_VALUE=t.P_NUMBER_LITERAL_FULL=t.P_NUMBER_LITERAL=t.P_NUMBER_START=t.P_DATE_LITERAL=t.T_STRING_START=t.P_TAG_NAME_MULTILINE=t.P_TAG_NAME=t.P_ATTRIBUTE_LIST_MULTILINE=t.P_ATTRIBUTE_LIST=t.P_ATTRIBUTE_NAME_MULTILINE=t.P_ATTRIBUTE_NAME=t.P_ATTRIBUTE_ASSIGN=t.P_LABEL=t.P_VAR_NAME=t.P_LABEL_START=t.P_LIST_SEPARATOR=t.P_WHITE_SPACES_EXT=t.P_WHITE_SPACE=t.P_PARAGRAPH_BREAK=t.P_SPACE_WRAPPED_LINE_BREAK=t.P_LINE_BREAK=t.P_ASSIGN_YAML=t.T_TAG_ATTRIBUTE_FAVORED_ASSIGN=t.T_METADATA_FAVORED_ASSIGN=t.T_PARAGRAPH_BREAK=t.T_LINE_BREAKS=t.T_LINE_BREAK=t.T_ASSIGN_YAML=t.T_ASSIGN_XML=t.T_TAG_END=t.T_TAG_CLOSING=t.T_TAG_START=t.T_ENTITY_END=t.T_ENTITY_START=t.P_MULTIPLE_LINE_COMMENT=t.T_SINGLE_LINE_COMMENT=t.T_METADATA_MARKER=t.T_TAB=t.T_SPACE=t.DEFAULT_INDENT_SPACES=t.combinePatterns=void 0;var r=a(n(31)),i=function(e){return e.map(function(e){return r.isRegExp(e)?e.source:r.escapeRegExp(e)}).join("|")};t.combinePatterns=i;t.DEFAULT_INDENT_SPACES=2;t.T_SPACE=" ";t.T_TAB="\t";t.T_METADATA_MARKER="---";t.T_SINGLE_LINE_COMMENT="~";t.P_MULTIPLE_LINE_COMMENT="~{3,}";t.T_ENTITY_START="[";t.T_ENTITY_END="]";t.T_TAG_START="{";t.T_TAG_CLOSING="/";t.T_TAG_END="}";var s="=";t.T_ASSIGN_XML=s;var o=":\uff1a";t.T_ASSIGN_YAML=o;t.T_LINE_BREAK="\n";t.T_LINE_BREAKS="\r\n";t.T_PARAGRAPH_BREAK="\n\n";var c=o;t.T_METADATA_FAVORED_ASSIGN=c;var u=s;t.T_TAG_ATTRIBUTE_FAVORED_ASSIGN=u;t.P_ASSIGN_YAML=/[:\uff1a]/;var l=/\r?\n/g;t.P_LINE_BREAK=l;t.P_SPACE_WRAPPED_LINE_BREAK=/\s*\n\s*/g;var d=new RegExp("".concat(l.source,"\\s*").concat(l.source),"g");t.P_PARAGRAPH_BREAK=d;var h=/[ \t]/g;t.P_WHITE_SPACE=h;var f=/[\s\r\n]/g;t.P_WHITE_SPACES_EXT=f;t.P_LIST_SEPARATOR=/[,\uff0c]/g;var T=/[#\uff03]/g;t.P_LABEL_START=T;var E=/(?:[A-Za-z\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u3005\u3007\u3021-\u3029\u3038-\u303B\u3400-\u4DB5\u4E00-\u9FEF\uF900-\uFA6D\uFA70-\uFAD9]|[\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D])(?:[\.0-9A-Z_a-z\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u3005\u3007\u3021-\u3029\u3038-\u303B\u3400-\u4DB5\u4E00-\u9FEF\uF900-\uFA6D\uFA70-\uFAD9]|[\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D])*/g;t.P_VAR_NAME=E;var p=new RegExp("".concat(T.source).concat(E.source),"g");t.P_LABEL=p;var v=new RegExp("[".concat([s,o].join(""),"]"));t.P_ATTRIBUTE_ASSIGN=v;var A=new RegExp("(?:".concat(E.source,")(?=").concat(i([h,v,"}"]),")"),"g");t.P_ATTRIBUTE_NAME=A;var g=new RegExp("(?:".concat(E.source,")(?=").concat(i([f,v,"}"]),")"),"g");t.P_ATTRIBUTE_NAME_MULTILINE=g;var m=new RegExp("(".concat(E.source).concat(v.source,"|").concat(p,")"),"g");t.P_ATTRIBUTE_LIST=m;var _=new RegExp("(".concat(E.source).concat(v.source,"?|").concat(p,")"),"g");t.P_ATTRIBUTE_LIST_MULTILINE=_;var N=A;t.P_TAG_NAME=N;var y=g;t.P_TAG_NAME_MULTILINE=y;t.T_STRING_START='"';t.P_DATE_LITERAL=/\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d(\.\d+([+-][0-2]\d:[0-5]\d|Z))?|\d{4}-[01]\d-[0-3]\d/g;t.P_NUMBER_START=/[\d\.\-]/;var R=/\-?(\d*\.\d*|\d+)(e\-?\d+)?/g;t.P_NUMBER_LITERAL=R;var S=new RegExp("^".concat(R.source,"$"));t.P_NUMBER_LITERAL_FULL=S;var k=new RegExp("".concat(R.source,"(?=").concat(i([f,"}"]),")"),"g");t.P_NUMBER_VALUE=k;t.P_STRING_LITERAL_QUOTED=/"([^"\\]|\\")*"/g;var b=/[^\s}"'\\\n]+/g;t.P_STRING_LITERAL_UNQUOTED=b;var I=new RegExp("^".concat(b.source,"$"));t.P_STRING_LITERAL_UNQUOTED_TESTER=I;t.P_BOOLEAN_TRUE=/(TRUE|True|true)/g;t.P_BOOLEAN_FALSE=/(FALSE|False|false)/g;t.P_FULL_WIDTH_CHARACTER=/(?:[\xD7\u2014\u2026\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u3001\u3002\u3005\u3007\u300A-\u300D\u3010\u3011\u3021-\u3029\u3038-\u303B\u3400-\u4DB5\u4E00-\u9FEF\uF900-\uFA6D\uFA70-\uFAD9\uFF01\uFF03\uFF05\uFF06\uFF08\uFF09\uFF0B-\uFF0D\uFF1A\uFF1B\uFF1D\uFF1F\uFF20\uFFE5]|[\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D])/g;var L=["{","[",T];t.START_MARKERS=L;var O=["}","]"];t.END_MARKERS=O;var P=new RegExp("(".concat(i([d].concat(L,["}","~{3,}","~"])),")"),"g");t.P_MARKER=P;t.PROCESSING_TIMEOUT=1/0},42:function(e,t,n){"use strict";n.d(t,"a",function(){return h});var a=n(8),r=n(9),i=n(11),s=n(10),o=n(12),c=n(0),u=n.n(c),l=n(5),d=n.n(l),h=function(e){function t(e){return Object(a.a)(this,t),Object(i.a)(this,Object(s.a)(t).call(this,e))}return Object(o.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props,t=e.title,n=e.className,a=e.children;return u.a.createElement("div",{className:d()("pane",n)},u.a.createElement("div",{className:"pane-title"},u.a.createElement("h2",null,t)),u.a.createElement("div",{className:"pane-content"},a))}}]),t}(u.a.Component);h.defaultProps={title:"pane",className:""}},45:function(e,t,n){"use strict";(function(e){var a=n(25),r=n(24);Object.defineProperty(t,"__esModule",{value:!0}),t.formatValue=l,t.parseValue=function(e){if(u.test(e))return new Date(e);return e},t.parseNumber=function(e){var t=parseFloat(e);if(/^\d+$/.test(e)&&(t>Number.MAX_SAFE_INTEGER||t<Number.MIN_SAFE_INTEGER))return e;return t},t.spacer=d,t.stringify=function e(t,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;var i={space:o.DEFAULT_INDENT_SPACES,simple:!1,toSource:!1,metadataMarker:!0,attributeAsString:!1};var u=s.defaults(n,i);var h="";var f=u.simple&&t.isSimpleTag&&(t.labels.length>0||Object.keys(t.attributes).length>0);var T=f&&t.isBlockTag&&1===t.children.length;u.toSource?t.start=r:t.textStart=r;if(t.isText)u.toSource?h+=(t.content||"").replace(/\n/g,"\n".concat(d(u.space,a-1))):h+=t.content;else{if(t.isEntity){var E=s.first(t.children);if(!E)throw new Error("missing text node of entity");u.toSource&&(h+=o.T_ENTITY_START),h+=e(E,u,a,r+h.length),u.toSource&&(h+=o.T_ENTITY_END)}if(u.toSource&&(t.isTag||t.isEntity)){t.isBlock&&(h+=d(u.space,a)),T||(h+=o.T_TAG_START),f||(h+=t.name);var p=0;s.keys(t.attributes).forEach(function(n,a){var i=t.attributes[n];p++,(!f||p>1)&&(h+=o.T_SPACE),!f&&s.isBoolean(i)&&i&&!u.attributeAsString?h+=n:i instanceof c.default?h+=e(t,u,0,r+h.length):h+="".concat(n,"=").concat(l(i,u.attributeAsString))}),s.each(t.labels,function(e,t){p++,(!f||p>1)&&(h+=o.T_SPACE),h+="#".concat(e)}),T||(h+=f?o.T_SPACE:o.T_TAG_END),t.isBlock&&(h+=o.T_LINE_BREAK)}u.toSource&&t.isParagraph&&(h+=d(u.space,a)),u.toSource&&!s.isEmpty(t.metadata)&&(u.metadataMarker&&(h+=d(u.space,a+1)+o.T_METADATA_MARKER+o.T_LINE_BREAK),s.each(t.metadata,function(t,n){h+=d(u.space,a+1),h+="".concat(n,": "),t instanceof c.default?h+=e(t,u,0,r+h.length):h+=l(t),h+=o.T_LINE_BREAK}),h+=d(u.space,a+1),u.metadataMarker&&(h+=o.T_METADATA_MARKER),h+=o.T_LINE_BREAK),(t.isBlock||t.isWrappingTag&&!s.isEmpty(t.children))&&t.children.forEach(function(t){var n=e(t,u,a+1,r+h.length);h+=n});var v=t.nextSibling;t.isBlock&&(u.toSource&&(h=s.trimEnd(h,o.T_LINE_BREAK)),h+=o.T_LINE_BREAK,t.isParagraph&&!t.isLastChild&&(h+=o.T_LINE_BREAK)),u.toSource&&t.isWrappingTag&&(t.isBlockTag&&(h+=d(u.space,a)),f?T||(h+=o.T_TAG_END):h+=o.T_TAG_START+o.T_TAG_CLOSING+t.name+o.T_TAG_END,t.isBlockTag&&(h+=o.T_LINE_BREAK,v&&v.isBlock&&(h+=o.T_LINE_BREAK)))}u.toSource?t.end=t.start+h.length:t.textEnd=t.textStart+h.length;return h.replace(/\n\s*\n\s*\n/g,"\n\n")},t.chalk=t.isAnsiSupported=t.isChrome=t.isNode=void 0;var i=r(n(51)),s=a(n(31)),o=n(37),c=r(n(46)),u=/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}\.\d+Z$/;function l(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return s.isDate(e)?(e=e.toISOString(),t?JSON.stringify(e):e.replace(/T00:00:00\.000Z$/,"")):s.isString(e)?(([o.T_TAG_START,o.T_ENTITY_START].includes(e.charAt(0))||o.P_NUMBER_LITERAL_FULL.test(e)||!o.P_STRING_LITERAL_UNQUOTED_TESTER.test(e))&&(e=JSON.stringify(e)),e):s.isBoolean(e)?(e=e.toString(),t&&(e=JSON.stringify(e)),e):s.isNumber(e)&&!s.isNaN(e)&&e!==1/0||e!==-1/0?(t&&(e=e.toString()),JSON.stringify(e)):null}function d(e,t){return t<=0?"":s.repeat(o.T_SPACE,e*t)}var h="undefined"!==typeof e&&"undefined"!==typeof e.release&&"node"===e.release.name;t.isNode=h;var f=!h&&/Chrome/.test(window.navigator.userAgent);t.isChrome=f;var T=h||f;t.isAnsiSupported=T;var E=T?function(e,t){return function(n){return"\x1b[".concat(e,"m").concat(n,"\x1b[").concat(t,"m")}}:function(e,t){return function(e){return e}},p=s.mapValues({reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],inverse:[7,27],hidden:[8,28],strikethrough:[9,29],black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],grey:[90,39],gray:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39],bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgGrey:[90,39],bgGray:[90,39],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]},function(e){var t=(0,i.default)(e,2),n=t[0],a=t[1];return E(n,a)});t.chalk=p}).call(this,n(44))},46:function(e,t,n){"use strict";var a=n(24),r=n(25);Object.defineProperty(t,"__esModule",{value:!0}),t.testNode=P,t.find=C,t.findOne=x,t.parseJson=B,t.toJsonMap=D,t.parseJsonMap=M,t.default=t.TreeRules=t.WrappingTags=t.BlockTags=t.BlockNodeTypes=t.P_LABEL_EXPRESSION=t.P_ENTITY_EXPRESSION=t.P_TAG_EXPRESSION=t.P_NODE_EXPRESSION=t.NodeTypes=t.NodeType=void 0;var i,s,o=a(n(88)),c=a(n(91)),u=a(n(92)),l=a(n(51)),d=a(n(52)),h=a(n(30)),f=a(n(36)),T=a(n(26)),E=r(n(31)),p=n(45),v=n(14),A=n(37),g=n(96);t.NodeType=s,function(e){e.FRAGMENT="fragment",e.ROOT="root",e.PARAGRAPH="paragraph",e.TAG="tag",e.ENTITY="entity",e.TEXT="text",e.COMMENT="comment"}(s||(t.NodeType=s={}));var m=E.values(s);t.NodeTypes=m;var _=/^<([A-Z]+)>$/;t.P_NODE_EXPRESSION=_;var N=/^{([A-Z]+)}$/;t.P_TAG_EXPRESSION=N;var y=/^\[([A-Z]+)\]$/;t.P_ENTITY_EXPRESSION=y;var R=new RegExp("^".concat(A.P_LABEL_START,"(").concat(A.P_VAR_NAME,")$"));t.P_LABEL_EXPRESSION=R;var S=[s.ROOT,s.PARAGRAPH];t.BlockNodeTypes=S;var k=["BLOCK","QUOTE","SECTION","HEADER","FOOTER"];t.BlockTags=k;var b,I=k.concat(["INLINE","SENTENCE","NUM","HEADING"]);t.WrappingTags=I,function(e){e.ROOT="<root>",e.PARAGRAPH="<paragraph>",e.BLOCK="{BLOCK}",e.INLINE="{INLINE}",e.ENTITY="[ENTITY]",e.TEXT="(text)",e.FRAGMENT="<fragment>",e.ANY="*"}(b||(b={}));var L=(i={},(0,T.default)(i,b.ROOT,[b.PARAGRAPH,b.BLOCK]),(0,T.default)(i,b.PARAGRAPH,[b.INLINE,b.ENTITY,b.TEXT]),(0,T.default)(i,b.BLOCK,[b.PARAGRAPH,b.BLOCK]),(0,T.default)(i,b.INLINE,[b.INLINE,b.ENTITY,b.TEXT]),(0,T.default)(i,b.ENTITY,[b.TEXT]),(0,T.default)(i,b.TEXT,[]),(0,T.default)(i,b.FRAGMENT,[b.ANY]),i);t.TreeRules=L;var O=function(e){return!0};function P(e,t){if(E.isFunction(e))return e(t);if(E.isString(e))return t.is(e);throw new TypeError("invalid finding pattern")}function C(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:O,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(P(t,e)&&n.push(e),!E.isEmpty(e.children)){var a=!0,r=!1,i=void 0;try{for(var s,o=e.children[Symbol.iterator]();!(a=(s=o.next()).done);a=!0){C(s.value,t,n)}}catch(c){r=!0,i=c}finally{try{a||null==o.return||o.return()}finally{if(r)throw i}}}return n}function x(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:O;if(P(t,e))return e;if(!E.isEmpty(e.children)){var n=!0,a=!1,r=void 0;try{for(var i,s=e.children[Symbol.iterator]();!(n=(i=s.next()).done);n=!0){var o=x(i.value,t);if(o)return o}}catch(c){a=!0,r=c}finally{try{n||null==s.return||s.return()}finally{if(a)throw r}}}}function B(e){var t=w.create(e.type,e.name,{id:e.id,attributes:M(e.attributes),metadata:M(e.metadata),content:e.content});return e.children&&E.each(e.children,function(e){t.appendChild(B(e))}),t.normalize(),t}function D(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!E.isEmpty(e))return E.mapValues(e,function(e){return e instanceof w?e.toJSON(t):e})}function M(e){if(!E.isEmpty(e))return E.mapValues(e,function(e){return E.isPlainObject(e)?B(e):(0,p.parseValue)(e)})}var w=function(){function e(t,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(0,h.default)(this,e),(0,T.default)(this,"_source",void 0),(0,T.default)(this,"id",""),(0,T.default)(this,"type",void 0),(0,T.default)(this,"name",void 0),(0,T.default)(this,"start",-1),(0,T.default)(this,"end",-1),(0,T.default)(this,"textStart",-1),(0,T.default)(this,"textEnd",-1),(0,T.default)(this,"states",void 0),(0,T.default)(this,"attributes",void 0),(0,T.default)(this,"metadata",void 0),(0,T.default)(this,"labels",void 0),(0,T.default)(this,"parent",void 0),(0,T.default)(this,"content",void 0),(0,T.default)(this,"text",""),(0,T.default)(this,"children",void 0);var r=a.id,i=a.source,o=void 0===i?"":i,c=a.start,u=void 0===c?-1:c,l=a.end,d=void 0===l?-1:l,f=a.states,E=a.attributes,p=void 0===E?{}:E,v=a.metadata,A=void 0===v?{}:v,_=a.labels,N=void 0===_?[]:_,y=a.parent,R=a.content,k=void 0===R?"":R,b=a.text,I=void 0===b?"":b;if(t&&!m.includes(t))throw new TypeError("invalid node type ".concat(t));this.id=r||g(),this.states=f||{},this.type=t,this.name=void 0,this.start=u,this.end=d,this.textStart=-1,this.textEnd=-1,this.parent=y,this._source=void 0,this.content=void 0,this.children=[],this.labels=[],this.attributes={},this.metadata={},this.labels=[],t===s.ROOT&&(this.start=0,this.end=o.length,this._source=o),I&&this.appendText(I),S.includes(t)||[s.ENTITY,s.TAG,s.FRAGMENT].includes(t)?t!==s.PARAGRAPH&&(this.name=n,this.attributes=p,this.metadata=A,this.labels=N):t!==s.TEXT&&t!==s.COMMENT||(this.content=k)}return(0,f.default)(e,null,[{key:"create",value:function(t,n,a){return new e(t,n,a)}},{key:"createParagraph",value:function(t){return new e(s.PARAGRAPH,void 0,t)}},{key:"createRoot",value:function(t){return new e(s.ROOT,void 0,t)}},{key:"createText",value:function(t,n){return new e(s.TEXT,void 0,(0,d.default)({},n,{content:t}))}},{key:"createTag",value:function(t,n){return new e(s.TAG,t,n)}},{key:"createBlock",value:function(t){return new e(s.TAG,"BLOCK",t)}},{key:"createInlineBlock",value:function(t){return new e(s.TAG,"INLINE",t)}},{key:"fromSource",value:function(e){return(0,v.parse)(e)}},{key:"fromJSON",value:function(e){return B(e)}},{key:"createFragment",value:function(){return e.create(s.FRAGMENT)}},{key:"validNode",value:function(t){if(!(t instanceof e))throw new TypeError("invalid node")}},{key:"validParent",value:function(e){if(!E.isArray(e.children))throw new Error("node is not a valid parent")}},{key:"validChild",value:function(e){if(!e.parent)throw new Error("node is not a valid child")}},{key:"validTreeRule",value:function(e,t){var n=e.commonDescriptor,a=t.commonDescriptor,r=L[n];if(r[0]!==b.ANY||!r.includes(a))throw new Error("can not add ".concat(a," as child of ").concat(n))}},{key:"findCommonAncestor",value:function(e,t){for(var n,a=e.path,r=t.path;a.length>0&&r.length>0&&E.first(a)===E.first(r);)n=a.shift(),r.shift();if(n)return{ancestor:n,paths:[a,r]}}},{key:"createBlockByRange",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"INLINE",a=arguments.length>2?arguments[2]:void 0,r=t.startNode,i=t.startOffset,s=t.endNode,o=t.endOffset;if(!E.isNumber(i)||!E.isNumber(o))throw new TypeError("range offset must be number");if(!r.isText||!s.isText)throw new TypeError("range node must be text");if(!r.content||!s.content)throw new Error("invalid text node");if(r===s){if(i<0||i>r.content.length||o<0||o>r.content.length)throw new RangeError("sub text out of range");if(!r.parent)throw new Error("can not create block on isolated text node");var c=r.parent,u=e.createFragment(),h=e.createTag(n,(0,d.default)({},a,{text:r.content.substring(i,o)}));return i>0&&u.appendText(r.content.substring(0,i)),u.appendChild(h),o<r.content.length&&u.appendText(r.content.substring(o)),c.insertBefore(u,r),c.removeChild(r),h}var f=e.findCommonAncestor(r,s);if(f&&f.ancestor){var T=f.ancestor,p=f.paths,v=p[0][0],A=p[1][0],g=T.children.indexOf(v),m=[g,T.children.indexOf(A)].sort(),_=(0,l.default)(m,2),N=_[0],y=_[1];if(g!==N){var R=[A,v];v=R[0],A=R[1]}var S=T.extractNodes(N,y+1),k=r.isSidedDescendantOf(v,"start")&&0===i,b=s.isSidedDescendantOf(A,"end")&&o===s.content.length,I=T.findOne(function(e){return e.isBlock});if(I&&I!==T||1!==p[0].length&&!k&&1!==p[1].length&&!b){var L=e.createBlock(a);return T.insertAt(L,N),L.appendChild(S),L}var O=e.createFragment(),P=r.content;i>0&&(v.content=P.substring(i),O.appendText(P.substring(0,i)));var C=e.createTag(n,a);C.appendChild(S),O.appendChild(C);var x=s.content;return o<s.content.length&&(A.content=x.substring(0,o),O.appendText(x.substring(o))),T.insertAt(O,N),C}}}]),(0,f.default)(e,[{key:"getRootNode",value:function(){for(var e=this;e.parent;)e=e.parent;if(e!==this)return e}},{key:"is",value:function(e){if(!E.isString(e))throw new TypeError("invalid node descriptor");var t=null;return(t=_.exec(e))?this.type===t[1]:(t=N.exec(e))?this.type===s.TAG&&this.name===t[1]:(t=y.exec(e))?this.type===s.ENTITY&&this.name===t[1]:!!(t=R.exec(e))&&(this.type===s.TAG&&this.labels.includes(t[1]))}},{key:"contains",value:function(t){for(e.validNode(t);t;){if(t===this)return!0;if(!t.parent)return!1;t=t.parent}return!1}},{key:"hasChild",value:function(){return this.children.length>0}},{key:"isOnlyDescendantOf",value:function(e){for(var t=e;t;){if(1!==t.children.length)return!1;if((t=t.children[0])===this)return!0}return!1}},{key:"isSidedDescendantOf",value:function(e,t){for(var n=e;n;){if(0===n.children.length)return!1;if((n="start"===t?n.firstChild:n.lastChild)===this)return!0}return!1}},{key:"createChild",value:function(t,n,a){var r=new e(t,n,a);return this.appendChild(r),r}},{key:"prependChild",value:function(e){return this.insertAt(e,0)}},{key:"appendChild",value:function(e){return this.insertAt(e,1/0)}},{key:"appendText",value:function(t,n){if(this.type===s.TEXT)return this.content=this.content||"",this.content+=t,this;if(this.lastChild&&this.lastChild.isText)this.lastChild.content+=t;else{var a=e.create(s.TEXT,void 0,(0,d.default)({},n,{content:t}));this.appendChild(a)}}},{key:"prependText",value:function(t,n){if(this.type===s.TEXT)return this.content="".concat(t).concat(this.content||""),this;var a=e.create(s.TEXT,void 0,(0,d.default)({},n,{content:t}));this.prependChild(a)}},{key:"removeChild",value:function(e){return E.pull(this.children,e),e.parent=void 0,e}},{key:"removeChildAt",value:function(e){var t=this.children[e];return E.pullAt(this.children,e),t.parent=void 0,t}},{key:"insertAt",value:function(e,t){var n,a=this;e.type===s.FRAGMENT?((n=this.children).splice.apply(n,[t,0].concat((0,u.default)(e.children))),e.children.forEach(function(e){e.parent=a}),e.children=[]):(this.children.splice(t,0,e),e.parent&&e.parent.removeChild(e),e.parent=this);return e}},{key:"insertBefore",value:function(t,n){e.validParent(this);var a=this.children.indexOf(n);return this.insertAt(t,a),t}},{key:"insertAfter",value:function(t,n){e.validParent(this);var a=this.children.indexOf(n);return this.insertAt(t,a+1),t}},{key:"replaceChild",value:function(t,n){if(e.validParent(this),t.contains(this))throw new TypeError("the new child contains the parent");if(n.parent!==this)throw new TypeError("the old child is not a child of this node");return this.insertBefore(t,n),this.removeChild(n),n}},{key:"replaceWith",value:function(t){if(e.validChild(this),!this.parent)throw new Error("can not replace isolated node");return this.parent.replaceChild(t,this),t}},{key:"setAttribute",value:function(e,t){E.set(this.attributes,e,t)}},{key:"setAttributes",value:function(e){E.merge(this.attributes,e)}},{key:"getAttribute",value:function(e){return E.get(this.attributes,e)}},{key:"hasAttribute",value:function(e){return E.has(this.attributes,e)}},{key:"removeAttribute",value:function(e){E.unset(this.attributes,e)}},{key:"clearAttributes",value:function(){this.attributes={}}},{key:"setMetadata",value:function(e,t){E.isString(e)?E.set(this.metadata,e,t):E.merge(this.metadata,e)}},{key:"getMetadata",value:function(e){return E.get(this.metadata,e)}},{key:"removeMetadata",value:function(e){E.unset(this.metadata,e)}},{key:"clearMetadata",value:function(){this.metadata={}}},{key:"hasMetadata",value:function(e){return E.has(this.metadata,e)}},{key:"addLabel",value:function(e){if(!E.isString(e))throw new TypeError("label must be string");this.labels.includes(e)||this.labels.push(e)}},{key:"hasLabel",value:function(e){return this.labels.includes(e)}},{key:"removeLabel",value:function(e){E.pull(this.labels,e)}},{key:"clearLabels",value:function(){this.labels=[]}},{key:"normalize",value:function(){var e=this.toSource();this.isRoot&&(this._source=e),this.toString()}},{key:"getNodeById",value:function(e){return x(this,function(t){return t.id===e})}},{key:"findBy",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=t.type,r=t.name,i=t.text,o=t.source,c=t.label;return(n?x:C)(this,function(t){var n=!0;if(a&&(n=n&&a===t.type),r&&(n=n&&r===t.name),i&&t.type===s.TEXT&&t.content)if(E.isRegExp(i))n=n&&!!i.match(t.content);else{if(!E.isString(i))throw new TypeError("text filter should be RegExp or string");n=n&&t.content.includes(i)}if(o&&t._source)if(E.isRegExp(o))n=n&&!!o.match(t._source);else{if(!E.isString(o))throw new TypeError("source filter should be RegExp or string");n=n&&t._source.includes(o)}return c&&(n=E.isArray(c)?n&&E.intersection(e.labels,c).length>0:n&&e.labels.includes(c)),n})}},{key:"findOneBy",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.findBy(e,!0)}},{key:"findTextByRange",value:function(e,t){if(void 0!==this.textStart&&void 0!==this.textEnd&&this.textStart<=e&&this.textEnd>=t){if(this.type===s.TEXT)return this;if(this.hasChild())for(var n=0;n<this.children.length;n++){var a=this.children[n].findTextByRange(e,t);if(a)return a}}}},{key:"find",value:function(e){return C(this,e)}},{key:"findOne",value:function(e){return x(this,e)}},{key:"querySelectorAll",value:function(e){return C(this,e)}},{key:"querySelector",value:function(e){return x(this,e)}},{key:"splitText",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"INLINE",a=arguments.length>2?arguments[2]:void 0,r=t instanceof RegExp?t:new RegExp("[".concat(E.escapeRegExp(t),"]"),"g");this.find(function(e){return e.isParagraph||e.isInlineBlock}).forEach(function(t){var i=t.toString(),s=0,o=0;for(r.lastIndex=0;r.exec(i);){t.toString(),s=r.lastIndex;var c=t.children.filter(function(e){return e.isText}),u=c.find(function(e){return e.textStart<=o&&e.textEnd>o}),l=c.find(function(e){return e.textStart<s&&e.textEnd>=s});if(!u||!l)break;var d={startNode:u,startOffset:o-u.textStart,endNode:l,endOffset:s-l.textStart};e.createBlockByRange(d,n,a),o=s}})}},{key:"mergeText",value:function(){var t=this,n=[],a=this.children.length;this.children.forEach(function(r,i){if(r.isText&&n.push(r),!r.isText||i===a-1){if(n.length>1){var s,o=n.map(function(e){return e.content}).join(""),c=e.createText(o);for(t.insertBefore(c,n[0]);s=n.shift();)t.removeChild(s)}n=[]}})}},{key:"extractNodes",value:function(t,n){var a=e.createFragment();if(t<0||t>=this.children.length||n<0||n>this.children.length)throw new RangeError("invalid range of children");return this.children.slice(t,n).forEach(function(e){a.appendChild(e)}),a}},{key:"flatten",value:function(){if(this.parent){var e=this.parent,t=this.extractNodes(0,this.children.length);return e.insertBefore(t,this),e.removeChild(this),e.mergeText(),e}}},{key:"createEntities",value:function(t){var n=[];if(this.type!==s.TEXT&&console.warn("createEntities() should exec only on text node"),!this.content||E.isEmpty(t))return n;var a=this.content;t=E.sortBy(t,["start"]);var r=e.createFragment(),i=0;return t.forEach(function(e){if(!(e.start>=e.end||e.start<i)){e.start>i&&r.appendText(a.substring(i,e.start));var t=r.createChild(s.ENTITY,e.type,{attributes:e.data});t.appendText(a.substring(e.start,e.end)),n.push(t),i=e.end}}),i<a.length&&r.appendText(a.substr(i)),this.replaceWith(r),n}},{key:"createEntitiesFromText",value:function(e){var t=this;this.toString();var n=new Map;E.each(e,function(e){var a=t.findTextByRange(e.start,e.end);void 0!==a&&(n.has(a)?n.get(a).push(e):n.set(a,[e]))}),n.forEach(function(e,t){t.createEntities(e.map(function(e){return(0,d.default)({},e,{start:e.start-(t.textStart||0),end:e.end-(t.textStart||0)})}))})}},{key:"extractEntities",value:function(){var e=(0,c.default)(o.default.mark(function e(t){var n,a,r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.find(function(e){return e.type===s.TEXT&&!!e.parent&&e.parent.type!==s.ENTITY&&!!e.content}),a=n.map(function(e){return e.content}),!E.isFunction(t)){e.next=8;break}return e.next=5,Promise.all(a.map(function(e){return t(e)}));case 5:r=e.sent,e.next=21;break;case 8:if(!E.isFunction(t.extractArray)){e.next=14;break}return e.next=11,t.extractArray(a);case 11:r=e.sent,e.next=21;break;case 14:if(!E.isFunction(t.extract)){e.next=20;break}return e.next=17,Promise.all(a.map(function(e){return t.extract(e)}));case 17:r=e.sent,e.next=21;break;case 20:throw new TypeError("invalid extractor");case 21:n.forEach(function(e,t){var n=r[t];if(!E.isArray(n))throw new Error("invalid extraction result");e.createEntities(n)});case 22:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"removeEntity",value:function(){if(this.type!==s.ENTITY||!this.firstChild||this.firstChild.type!==s.TEXT)throw new Error("invalid entity");if(!this.parent)throw new Error("can not remove isolated entity");var t,n=this.firstChild.content||"",a=this.parent,r=this.previousSibling,i=this.nextSibling;return r&&r.isText&&(t=r),t?t.appendText(n):(t=e.create(s.TEXT,void 0,{content:n}),a.insertBefore(t,this)),i&&i.isText&&(t.appendText(i.content||""),a.removeChild(i)),a.removeChild(this),t}},{key:"toString",value:function(e){return(0,p.stringify)(this,e)}},{key:"toSource",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,p.stringify)(this,(0,d.default)({},e,{toSource:!0}))}},{key:"toJSON",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.position,n=void 0!==t&&t,a=e.textPosition,r=void 0!==a&&a,i=e.internalId,s=void 0!==i&&i;return E.omitBy({id:s?this.id:void 0,type:this.type,name:this.name,content:this.content,attributes:D(this.attributes),metadata:D(this.metadata,e),labels:this.labels.length?this.labels:void 0,position:n?{start:this.start,end:this.end}:void 0,textPosition:r?{start:this.textStart,end:this.textEnd}:void 0,children:E.isEmpty(this.children)?void 0:this.children.map(function(t){return t.toJSON(e)})},E.isUndefined)}},{key:"descriptor",get:function(){return this.isEntity||this.isTag||this.isText?"".concat(this.openDescriptorStart).concat(this.openDescriptorEnd):this.type}},{key:"commonDescriptor",get:function(){return this.isRoot?b.ROOT:this.isBlockTag?b.BLOCK:this.isParagraph?b.PARAGRAPH:this.isInlineBlock?b.INLINE:this.isEntity?b.ENTITY:this.isText?b.TEXT:b.ANY}},{key:"openDescriptorStart",get:function(){switch(this.type){case s.ENTITY:return"[".concat(this.name);case s.TAG:return"{".concat(this.name);case s.TEXT:return"(text";default:return"<".concat(this.type)}}},{key:"openDescriptorEnd",get:function(){switch(this.type){case s.ENTITY:return"]";case s.TAG:return"}";case s.TEXT:return"";default:return">"}}},{key:"closingDescriptor",get:function(){switch(this.type){case s.ENTITY:return"[/".concat(this.name,"]");case s.TAG:return"{/".concat(this.name,"}");case s.TEXT:return")";default:return"</".concat(this.type,">")}}},{key:"selector",get:function(){var e=this.descriptor;return this.parent&&(e="".concat(this.descriptor,"[").concat(this.childIndex,"]")),e}},{key:"rootSelector",get:function(){return this.parent?this.path.map(function(e){return e.selector}).join(" > "):this.selector}},{key:"isRoot",get:function(){return this.type===s.ROOT}},{key:"isParagraph",get:function(){return this.type===s.PARAGRAPH}},{key:"isTag",get:function(){return this.type===s.TAG}},{key:"isEntity",get:function(){return this.type===s.ENTITY}},{key:"isText",get:function(){return this.type===s.TEXT}},{key:"isPlainText",get:function(){return this.type===s.TEXT&&(!this.parent||this.parent.type!==s.ENTITY)}},{key:"isWrappingTag",get:function(){return this.isTag&&I.includes(this.name)}},{key:"isBlockTag",get:function(){return this.isTag&&k.includes(this.name)}},{key:"isSimpleTag",get:function(){return this.isTag&&["BLOCK","INLINE"].includes(this.name)}},{key:"isBlock",get:function(){var e=this.type;this.name;return S.includes(e)||this.isBlockTag}},{key:"isInlineBlock",get:function(){return this.isTag&&!this.isBlockTag}},{key:"parentNode",get:function(){return this.parent}},{key:"childNodes",get:function(){return this.children}},{key:"source",get:function(){if(this.type===s.ROOT)return this._source||"";var e=this.getRootNode();if(!e)throw new Error("ROOT node not found");return e.source.substring(this.start||0,this.end)}},{key:"innerText",get:function(){if(this.type===s.TEXT)return this.content;if(this.type===s.ENTITY){var e=this.children[0];return e?e.content:""}return this.toString()}},{key:"isFirstChild",get:function(){var e=this.parent;return!!e&&E.first(e.children)===this}},{key:"isLastChild",get:function(){var e=this.parent;return!!e&&E.last(e.children)===this}},{key:"siblings",get:function(){var e=this.parent;return e?e.children:[this]}},{key:"childIndex",get:function(){return this.siblings.indexOf(this)}},{key:"nextSibling",get:function(){if(this.parent){var e=this.childIndex;return this.siblings[e+1]||void 0}}},{key:"previousSibling",get:function(){if(this.parent){var e=this.childIndex;return this.siblings[e-1]||void 0}}},{key:"path",get:function(){for(var e=[],t=this;t;)e.unshift(t),t=t.parent;return e}},{key:"firstChild",get:function(){return e.validParent(this),E.first(this.children)}},{key:"lastChild",get:function(){return e.validParent(this),E.last(this.children)}},{key:"isOnlyChild",get:function(){return!!this.parent&&1===this.parent.children.length}}]),e}();(0,T.default)(w,"Types",s);var F=w;t.default=F},53:function(e,t,n){"use strict";var a=n(25),r=n(24);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"TextLine",{enumerable:!0,get:function(){return d.default}}),t.default=void 0;var i=r(n(52)),s=r(n(30)),o=r(n(36)),c=r(n(26)),u=a(n(31)),l=n(45),d=r(n(97)),h=n(37),f=/\r?\n/g,T=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;(0,s.default)(this,e),(0,c.default)(this,"pos",void 0),(0,c.default)(this,"text",void 0),(0,c.default)(this,"tabSize",void 0),(0,c.default)(this,"lines",void 0),(0,c.default)(this,"lineOffsetIndexes",[]),(0,c.default)(this,"markers",void 0),(0,c.default)(this,"cursorStack",void 0),(0,c.default)(this,"lastMatch",""),this.pos=0,this.text=t,this.tabSize=n,this.lines=[],this.markers=[],this.cursorStack=[],this.init()}return(0,o.default)(e,[{key:"init",value:function(){var e,t=[],n=0,a=1;f.lastIndex=0;do{if(e=f.exec(this.text)){var r=e.index-n,i=this.text.substr(n,r);t.push(new d.default(t,i,a,n)),n+=r+e[0].length}else{if(this.text.length-n>0){var s=this.text.substr(n);t.push(new d.default(t,s,a,n))}}a++}while(e);this.lines=t,this.lineOffsetIndexes=u.map(t,"offset")}},{key:"getPosition",value:function(e){u.isUndefined(e)&&(e=this.pos);var t=u.sortedLastIndex(this.lineOffsetIndexes,e)-1,n=this.lines[t];if(!n)throw new Error("cursor position is invalid");return{ln:n.ln,col:e-n.offset+1,pos:e,line:n}}},{key:"sol",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.getPosition(),n=t.col,a=t.line;if(n-1===0)return!0;if(!e)return!1;var r=u.trimStart(a.text).length;return n-1<=a.length-r}},{key:"eol",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.getPosition(),n=t.col,a=t.line;return n-1===a.length||!!e&&n-1>=u.trimEnd(a.text).length}},{key:"eof",value:function(e){return u.isUndefined(e)&&(e=this.pos),e>=this.text.length}},{key:"peek",value:function(){return this.text.charAt(this.pos)}},{key:"next",value:function(){return this.pos<this.text.length?this.text.charAt(this.pos++):""}},{key:"eat",value:function(e){var t,n=this.text.charAt(this.pos)||"";return u.isUndefined(n)?t=!1:u.isString(e)?t=n===e:u.isRegExp(e)?(e.lastIndex=0,t=e.test(n)):u.isFunction(e)&&(t=e(n)),t?(this.lastMatch=n,++this.pos,n):""}},{key:"eatWhile",value:function(e){this.pos;var t,n="";do{(t=this.eat(e))&&(n+=t)}while(t&&!this.eof());return n}},{key:"eatUntil",value:function(e){this.pos;var t,n="";do{(t=this.eat(e))?this.pos--:(n+=this.peek(),this.pos++)}while(!t&&!this.eof());return n}},{key:"eatSpaces",value:function(){for(var e=this.pos;/[\s\u00a0]/.test(this.text.charAt(this.pos));)this.pos++;return this.pos>e}},{key:"search",value:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).caseInsensitive,n=-1,a="";if("string"===typeof e&&(t?e=new RegExp(u.escapeRegExp(e),"i"):-1!==(n=this.text.indexOf(e,this.pos))&&(a=e)),e instanceof RegExp){e.lastIndex=this.pos;var r=e.exec(this.text);r?(n=r.index,a=r[0]):n=-1}return{index:n,length:a.length,matched:a}}},{key:"read",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=this.text.length-this.pos;if(t<=0)return"";t<e&&(e=t);var n=this.text.substr(this.pos,e);return this.pos+=e,n}},{key:"readTo",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.toEOL,a=void 0!==n&&n,r=t.toEOF,i=void 0!==r&&r,s=t.consume,o=void 0!==s&&s,c=t.skipMatched,u=void 0!==c&&c,l=this.pos,d=this.search(e),h=d.index,f=d.length,T="",E=-1;if(a){var p=this.getPosition().line;E=p.offset+p.length}else i&&(E=this.text.length);return-1!==h&&(a||i?h<E?E=h:f=0:E=h),-1!==E&&(this.pos=E,o?(E+=f,this.pos=E):u&&(this.pos+=f),T=this.text.substring(l,E)),this.lastMatch=T,T}},{key:"readOver",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.readTo(e,(0,i.default)({},t,{consume:!0}))}},{key:"readLine",value:function(){var e=this.getPosition().line,t=e.next();if(this.eof())return"";if(t)return this.pos=t.offset,e.text;var n=e.offset+e.length-this.pos;return this.read(n)}},{key:"skipToEnd",value:function(){this.pos=this.text.length}},{key:"skipTo",value:function(e,t){var n=this.pos;return this.readTo(e,t),n!==this.pos}},{key:"skipOver",value:function(e,t){var n=this.pos;return this.readTo(e,(0,i.default)({},t,{skipMatched:!0})),n!==this.pos}},{key:"backUp",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.pos-=e}},{key:"match",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.consume,a=void 0===n||n,r=t.caseInsensitive,i=this.search(e,{caseInsensitive:r}),s=i.index,o=i.length,c=i.matched;return s!==this.pos?"":(a&&(this.pos+=o),this.lastMatch=c,c)}},{key:"resetMarker",value:function(){this.markers=[]}},{key:"pushMarker",value:function(e,t){u.isUndefined(t)&&(t=this.pos),this.markers.push({data:e,start:t})}},{key:"setMarkerData",value:function(e){var t=u.last(this.markers);t&&u.extend(t.data,e)}},{key:"getMarkerData",value:function(){var e=u.last(this.markers);return e?e.data:{}}},{key:"popMarker",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(!u.isPlainObject(e))throw new TypeError("invalid data parameter");u.isUndefined(t)&&(t=this.pos);var n=this.markers.pop();if(n){var a=n.data,r=n.start;return{text:this.text.substring(n.start||0,t),position:{start:r,end:t},data:(0,i.default)({},a,e)}}}},{key:"findLine",value:function(e){return u.find(this.lines,function(t){return u.trim(t.text)===e})}},{key:"pushCursor",value:function(e){u.isUndefined(e)&&(e=this.pos),this.cursorStack.push(this.pos),this.pos=e}},{key:"popCursor",value:function(){if(0===this.cursorStack.length)throw new Error("out of cursor stack!");return this.pos=this.cursorStack.pop(),this.pos}},{key:"debugLine",value:function(e,t,n){var a=e.ln,r=e.text;u.isUndefined(t)&&(t=(a+"").length),n&&(r=r.substring(0,n-1)+l.chalk.bgBlue(r.charAt(n-1))+r.substring(n)),console.log("".concat(l.chalk.blueBright("".concat(n?">":" "," ").concat(u.padStart(a+"",t)," |"))," ").concat(r))}},{key:"debugCursor",value:function(e,t,n){var a=e.substr(0,t-1).replace(h.P_FULL_WIDTH_CHARACTER,"XX").length;console.log(l.chalk.blueBright("  ".concat(u.repeat(" ",n)," | ").concat(u.repeat(" ",a),"^ ").concat(t)))}},{key:"debugState",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=this.getPosition(),a=n.ln,r=n.col,i=a-1,s=u.slice(this.lines,u.max([i-t,0]),u.min([i+t+1,this.lines.length])),o=u.max(s.map(function(e){return(e.ln+"").length}));s.forEach(function(t){var n=t.ln===a;e.debugLine(t,o,n?r:0),n&&e.debugCursor(t.text,r,o)}),console.log()}}]),e}();t.default=T},54:function(e,t,n){"use strict";var a=n(24);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(30)),i=a(n(98)),s=a(n(56)),o=a(n(100)),c=a(n(55)),u=a(n(101)),l=a(n(26)),d=function(e){function t(e,n,a,o){var u;return(0,r.default)(this,t),u=(0,i.default)(this,(0,s.default)(t).call(this,e)),(0,l.default)((0,c.default)((0,c.default)(u)),"message",void 0),(0,l.default)((0,c.default)((0,c.default)(u)),"text",void 0),(0,l.default)((0,c.default)((0,c.default)(u)),"from",void 0),(0,l.default)((0,c.default)((0,c.default)(u)),"to",void 0),u.message=e,u.text=n,u.from=a,u.to=o,u}return(0,o.default)(t,e),t}((0,u.default)(Error));t.default=d},61:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return y});var a=n(8),r=n(9),i=n(11),s=n(10),o=n(12),c=n(33),u=n(16),l=n.n(u),d=n(0),h=n.n(d),f=n(14),T=n(34),E=n(42),p=n(69),v=n(70),A=(n(132),n(134),n(136),n(67)),g=n(68),m=f.Node,_=f.NodeType,N=function(t){var n=m.create(_.ROOT);try{n=f.parse(t,{needMetadataMarker:!0}),e.node=n,console.info('Root node exported as global variable "node"',n)}catch(o){if(o instanceof f.ParseError){var a="\n        [ParseError]{ERROR.TYPE}: {#MESSAGE ".concat(o.message,"}\n\n        #SOURCE\n        content\n\n        from {#POS.START ").concat(o.from.ln,":").concat(o.from.col,"} to {#POS.END ").concat(o.to.ln,":").concat(o.to.col,"}\n      "),r=(n=f.parse(a)).querySelector("#SOURCE"),i=o.from.line.text;if(!r)return n;var s=r.findOneBy({type:_.TEXT});if(!s)return n;s.content="".concat(i," "),s.createEntitiesFromText([{type:"ERROR",start:o.from.col-1,end:o.to.col-1}])}else n=f.parse("Error: [".concat(o.message,"]{MESSAGE}")),console.error(o)}return n},y=function(e){function t(e){var n;return Object(a.a)(this,t),(n=Object(i.a)(this,Object(s.a)(t).call(this,e))).state={source:e.defaultSource,root:N(e.defaultSource),sourcePaneHeight:-1},n.onResize=l.a.throttle(n.onResize.bind(Object(c.a)(Object(c.a)(n))),500),n.preventSourceChange=!1,n}return Object(o.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){window.addEventListener("resize",this.onResize,{passive:!0}),this.onResize()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.onResize)}},{key:"componentWillReceiveProps",value:function(e){}},{key:"componentWillUpdate",value:function(e,t){t.selectedNode!==this.state.selectedNode&&console.log("selected node:",t.selectedNode),t.root!==this.state.root&&console.log("new node:",t.root)}},{key:"onResize",value:function(){var e=window.innerHeight-60;this.setState({sourcePaneHeight:e})}},{key:"handleSourceChange",value:function(e){this.preventSourceChange||this.setState({root:N(e),selectedNode:void 0})}},{key:"handleNodeChange",value:function(e,t){var n=this;e&&(this.preventSourceChange=!0,this.setState({source:e.toSource(),selectedNode:t},function(){n.preventSourceChange=!1}))}},{key:"render",value:function(){var e=this,t=this.state.source,n=this.state,a=n.root,r=n.sourcePaneHeight,i=n.selectedNode,s=n.hoveredNode;return h.a.createElement("div",{className:"zaml-editor"},h.a.createElement("header",null,h.a.createElement("a",{className:"project-link",href:"https://github.com/nexushubs/zaml-lang/tree/master/packages/zaml-editor"},h.a.createElement(A.a,{className:"logo"})," Editor"),h.a.createElement("a",{className:"github-link",href:"https://github.com/nexushubs/zaml-lang"},"View on Github")),h.a.createElement("section",{className:"editor-panes"},h.a.createElement(T.a,{split:"vertical",defaultSize:"33.33%",minSize:200},h.a.createElement(E.a,{title:"Source"},h.a.createElement(p.a,{value:t,height:r-40,onChange:function(t){return e.handleSourceChange(t)}})),h.a.createElement(T.a,{split:"vertical",defaultSize:"50%"},h.a.createElement(E.a,{title:"Visual"},h.a.createElement(v.a,{root:a,selectedNode:s||i,onSelect:function(t){return e.setState({selectedNode:t})},onChange:function(t,n){return e.handleNodeChange(t,n)}})),h.a.createElement(E.a,{title:"AST"},h.a.createElement(g.a,{root:a,selectedNode:i,onSelect:function(t){return e.setState({selectedNode:t})},onHover:function(t){return e.setState({hoveredNode:t})},onChange:function(t){return e.handleNodeChange(a,t)}}))))))}}]),t}(h.a.Component);y.defaultProps={defaultSource:"",className:"",onChange:function(){}}}).call(this,n(20))},67:function(e,t,n){"use strict";n.d(t,"a",function(){return T});var a=n(0),r=n.n(a);function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var s=r.a.createElement("title",null,"ZAML-logo"),o=r.a.createElement("path",{fill:"#fff",d:"M132.27,162.53,182.46,35.88h10.68L242.7,162.53h-9.83L216.64,122H158.11l-16.23,40.58Zm81.16-48.7L187.38,45.7l-26.7,68.13Z"}),c=r.a.createElement("path",{fill:"#fff",d:"M404.81,35.88h8.54V154.42h68.14v8.12H404.81Z"}),u=r.a.createElement("circle",{fill:"#fff",cx:91,cy:44.5,r:4}),l=r.a.createElement("path",{fill:"#fff",d:"M115.47,35.5h-5a54.66,54.66,0,0,0-1-10.36c-1.07-4.28-6.09-10.34-6.3-10.6l-1.5-1.8-5.3,11.14-1-2c-2.21-4.43-10.89-7.42-11.87-7.75l-2.19-.73L83.4,35.5H36v0c-7.77.27-14,11.14-14,19s6.23,9.71,14,10v0H89.75L22.31,154.42v8.12h92.32l4.23.11S121,159.5,121,153.5s-3.4-15-12.5-15c-6.78,0-14.5,5-23.5,7S60,147.3,54.63,147c5.75-5.44,12.61-12,19.66-19H92.56l.42-.37c1-.87,24.31-21.36,30.37-34.5s7.1-54.83,7.14-56.59l0-1.59ZM49.84,147.41c-3.23-.24-7.53-.76-9.84-1.91a10.79,10.79,0,0,1-4.46-3.93l9.58-12.91,22.46,1.73C61.06,136.77,54.88,142.66,49.84,147.41ZM95,63.5s-1.76-7.52-1-10c1-3.4,7.94-10.83,12-15h8.53c0,.53,0,1.17,0,1.9l-.1.41C109,43.74,97.93,51.53,97,53.5S96.52,61,99.31,64.66c-1.35-.1-2.72-.27-4-.44l-.09-.06A4.8,4.8,0,0,0,95,63.5ZM109,76a79.27,79.27,0,0,1-9,2.49c-5,1-13,0-13,0l3-8s11,0,15-1a22.68,22.68,0,0,0,6.55-3.2C110.86,69.46,110,72.72,109,76ZM100,55.5c1.27-4.12,11.13-10.58,14.13-12.46l.28,1.1c-.09,2-.25,4.37-.5,7-4.19,1.21-7.81,2.49-8.57,3.26-1.53,1.54-2.77,6.17-1.83,10.35a22.78,22.78,0,0,1-2.67,0C100.42,62.8,99.38,57.51,100,55.5Zm12.46,6.2a52.93,52.93,0,0,1-7,2.68c.39-2.42,1.09-5.83,2-7.11s3.41-2.62,6.16-3.69C113.36,56.12,113,58.85,112.46,61.7ZM93.9,103.48l-2.23,2.41c-2.73.33-7.34.94-10.66,1.61-5,1-14-1-14-1l5-7s10,2,15,2a46.82,46.82,0,0,0,9.79-1.43Q95.42,101.83,93.9,103.48Zm-18,18.63c-2.09.61-8.46,2.39-10.95,2.39-3,0-11-2-11-2l6-7s10,1,14,1c2.58,0,7.21-1.62,10.2-2.77C81.48,116.53,78.72,119.34,75.95,122.11Zm20.16-16.6.2-.23v0l13.94,1c-1.5,1.69-3,3.36-4.58,5L92.86,109C94,107.83,95,106.67,96.1,105.52Zm3.83-4.64c.83-1.11,1.63-2.24,2.39-3.39l15.58-.87a80.42,80.42,0,0,1-5,6.6Zm2.14-8.73c-2.72.92-7.36,2.36-10.07,2.36-4,0-14-2-14-2l4-7s12,1,17,0a29.42,29.42,0,0,0,7.62-2.87A78.48,78.48,0,0,1,102.07,92.14Zm8.3-10.92,13.49-1.45c-.29,1.68-.6,3.27-.94,4.76L109,84.78Q109.71,83,110.37,81.23Zm1.71-5q.37-1.21.71-2.4l12.31-2.66c-.18,1.52-.38,3-.59,4.49Zm13.51-9.45-11.44,1.84q.49-2.1.88-4.1l11-2.33C125.89,63.65,125.75,65.19,125.59,66.73Zm.8-9-10.45,1.6c.27-1.72.49-3.39.68-5L126.78,52C126.67,53.82,126.54,55.73,126.39,57.69Zm.64-10-9.91,1.46c.11-1.41.2-2.73.26-3.94l9.86-1.83C127.19,44.71,127.12,46.16,127,47.72Zm.35-7.55-9.85,1.1c0-.86,0-1.62,0-2.27l.54-2.71,9.36,1.76C127.44,38.62,127.41,39.35,127.38,40.17ZM103,22.5c1.6,2.16,2.45,2.8,3,5a38,38,0,0,1,1.48,7.5L95,34.5Zm-16-1c2.86,1.2,5.92,2.84,7,5l.57,1.12L91.15,34.8,86.36,35Zm-14.15,40c2.93-3.55,7-9.51,6.15-11s-9.88-8.63-14.57-12h5c3.95,2.86,15,11.13,16.6,15,.66,1.62-2.73,5.58-5,8Zm-8.69,0c2.51-3.93,6.93-11.56,5.59-14.49-1.2-2.61-7.5-6.27-11.75-8.51h4.38C65.77,41,74.46,47.72,76,51.5c.7,1.73-3,7.1-5.09,10ZM58.29,44.86c-1.17-2.24-4.34-4.68-6.84-6.36h5c3.41,2.86,9.22,8,9.44,10s-1.62,9.22-2.66,13H53.83C55.92,57,59.82,47.78,58.29,44.86ZM49.73,38.5c1.57,2.07,3.73,5.17,4,6.9.34,2.07-.46,11.5-.89,16.1H44.16c2.25-4,6.89-12.79,5.84-16a25.41,25.41,0,0,0-4.36-7ZM38,38.5h6.64c1.16,2.25,2.5,5.21,2.5,6.8,0,2.17-2.5,11.94-3.61,16.2H38a33,33,0,0,0,2-11A43.6,43.6,0,0,0,38,38.5Zm45.1,23c3.13-3,7.22-8,6.58-9.11-1.23-2.1-11.76-9.83-18.09-13.89h33.72C100.81,42.24,93.63,48.44,92.43,51c-1.05,2.24-1.78,8.57,1.36,12.27L91,61.5ZM91.43,125H77.3c3.76-3.75,7.52-7.58,11.15-11.36l13.63,1.29C97.09,119.91,92.76,123.82,91.43,125Zm28.4-31.54-14.58-.89q.75-1.37,1.44-2.76l15.15-1.15a26.58,26.58,0,0,1-1.19,3.21C120.4,92.39,120.12,92.92,119.83,93.46Z"}),d=r.a.createElement("rect",{fill:"#fff",x:255,y:36.5,width:14.69,height:15,rx:1.5,ry:1.5}),h=r.a.createElement("rect",{fill:"#fff",x:258.07,y:55.56,width:8.54,height:106.97}),f=r.a.createElement("polygon",{fill:"#fff",points:"364.01 35.88 317.88 151.85 274.33 42.9 274.33 64.8 313.82 162.53 321.72 162.53 368.93 45.7 368.93 162.53 377.47 162.53 377.47 35.88 364.01 35.88"}),T=function(e){return r.a.createElement("svg",i({id:"Layer_1","data-name":"Layer 1",viewBox:"0 0 500 180"},e),s,o,c,u,l,d,h,f)};n.p},68:function(e,t,n){"use strict";var a,r=n(41),i=n(8),s=n(9),o=n(11),c=n(10),u=n(12),l=n(16),d=n.n(l),h=n(0),f=n.n(h),T=n(34),E=(n(3),n(14)),p=n(5),v=n.n(p),A=(n(138),E.NodeType);!function(e){e.Header="header",e.Footer="footer",e.Whole="whole"}(a||(a={}));var g=function(){},m=function(e){function t(e){return Object(i.a)(this,t),Object(o.a)(this,Object(c.a)(t).call(this,e))}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,n=this.props,r=n.node,i=n.selectedNode,s=n.selectedPart,o=n.expandedNodes,c=n.onSelect,u=n.onSelectPart,l=n.onExpansionChange,f=n.onMouseEnter,T=n.onMouseOut;if(!r)return null;var E=s,p=o.indexOf(r.id)>-1||r.isRoot;p&&E===a.Whole&&(E=a.Header);var g=i===r,m=function(e){return function(t){t.stopPropagation(),c(r),u(e)}},_={onMouseEnter:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){e.stopPropagation(),f(r)}),onMouseOut:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){e.stopPropagation(),T(r)})},N=null;if(d.a.isEmpty(r.children)?"text"===r.type&&(N=r.content):N=h.createElement("div",{key:"children",className:"children"},d.a.map(r.children,function(n,a){return h.createElement(t,Object.assign({},e.props,{key:a,node:n}))})),r.type===A.TEXT)return h.createElement("div",Object.assign({className:v()("text",{selected:g}),onClick:m(a.Whole)},_),'"',r.content,'"');if(r.type===A.ENTITY||r.isBlock||r.isWrappingTag){var y,R=r.type===A.ENTITY,S=r.type===A.TAG;1===r.children.length&&r.firstChild.type===A.TEXT&&(y=r.firstChild.content);S||R?r.name:r.type;return h.createElement("div",Object.assign({className:v()("block",{expanded:p,selected:g&&E===a.Whole,"node-selected":g}),onClick:p?void 0:m(a.Whole)},_),r.type!==A.ROOT&&h.createElement("span",{className:"indicator",onClick:function(e){e.stopPropagation(),l(r,!p)}},"\u25be"),h.createElement("span",{className:v()("header",{selected:g&&E===a.Header}),onClick:p?m(a.Header):void 0},r.openDescriptorStart,r.labels.map(function(e){return h.createElement("span",{key:e,className:"prop label"},"#",e)}),d.a.keys(r.attributes).map(function(e){var t=r.attributes[e];return h.createElement("span",{key:e,className:"prop attribute"},h.createElement("span",{className:"key"},e),h.createElement("span",{className:"assignment"},"="),h.createElement("span",{className:"value"},JSON.stringify(t)))}),r.openDescriptorEnd),p?N:h.createElement("span",{className:"ellipsis"},d.a.truncate(y,{length:10})||"..."),h.createElement("span",{className:v()("footer",{selected:g&&E===a.Footer}),onClick:p?m(a.Footer):void 0},r.closingDescriptor))}return null}}]),t}(h.Component);m.defaultProps={node:void 0,expandedNodes:[],selectedNode:void 0,selectedPart:a.Whole,onSelect:g,onSelectPart:g,onExpansionChange:g,onMouseEnter:g,onMouseOut:g};E.NodeType;var _=function(e){function t(){return Object(i.a)(this,t),Object(o.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.selected,n=e.node,a=e.onClick;return n?f.a.createElement("span",{className:v()("zaml-tree-path-item",n.type,{selected:t}),onClick:a},n.descriptor):null}}]),t}(f.a.Component);_.defaultProps={selected:!1,node:void 0,onClick:function(){}};var N=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(o.a)(this,Object(c.a)(t).call(this,e))).state={nodeList:n.buildNodeList(e.selectedNode)},n}return Object(u.a)(t,e),Object(s.a)(t,[{key:"componentWillReceiveProps",value:function(e){var t=this.state.nodeList,n=e.selectedNode;n?d.a.includes(t,n)||this.setState({nodeList:this.buildNodeList(n)}):this.setState({nodeList:[]})}},{key:"buildNodeList",value:function(e){for(var t=[];e;)t.unshift(e),e=e.parent;return t}},{key:"render",value:function(){var e=this.props,t=e.selectedNode,n=e.onSelect,a=this.state.nodeList;return f.a.createElement("div",{className:"zaml-tree-path"},a.map(function(e){return f.a.createElement(_,{key:e.id,selected:e===t,node:e,onClick:function(){return n(e)}})}))}}]),t}(f.a.Component);N.defaultProps={selectedNode:void 0,onSelect:function(){}};var y=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(n=Object(o.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(r)))).state={},n}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return f.a.createElement("div",{className:"zaml-tree-toolbar"},"toolbar")}}]),t}(f.a.Component);y.defaultProps={};n(140),n(142);var R,S=function(e){function t(){return Object(i.a)(this,t),Object(o.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.tabs,n=e.selectedTab,a=e.onTabChange,r=e.children;return f.a.createElement("div",{className:"tab-view"},f.a.createElement("ul",{className:"tabs"},t.map(function(e){return f.a.createElement("li",{key:e,className:v()("tab",{selected:e===n}),onClick:function(){return a(e)}},f.a.createElement("span",{className:"label"},e))})),f.a.createElement("div",{className:"content"},r))}}]),t}(f.a.Component);!function(e){e.Labels="Labels",e.Attributes="Attributes",e.Metadata="Metadata"}(R||(R={}));var k=d.a.values(R),b=k[0],I=-1,L=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(n=Object(o.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(r)))).state={selectedTab:b,editingIndex:I,inlineError:""},n.editingElement=null,n}return Object(u.a)(t,e),Object(s.a)(t,[{key:"componentWillReceiveProps",value:function(e){e.node!==this.props.node&&this.setState({selectedTab:b,editingIndex:I})}},{key:"renderValue",value:function(e){return e instanceof E.Node?e.toSource():JSON.stringify(e)}},{key:"renderEmptyTip",value:function(){return f.a.createElement("div",{className:"select-tip"},"Please select a node")}},{key:"renderTabContent",value:function(){var e=this.props.node,t=this.state.selectedTab;if(!e)return this.renderEmptyTip();switch(t){case R.Labels:return this.renderLabelEditor(e);case R.Attributes:return this.renderAttributeEditor(e,e.attributes);case R.Metadata:return this.renderAttributeEditor(e,e.metadata)}}},{key:"focusEditingElement",value:function(){this.editingElement&&(this.editingElement.focus(),this.editingElement.select())}},{key:"handleLabelEdit",value:function(e){var t=this;this.setState({editingIndex:e},function(){t.focusEditingElement()})}},{key:"handleLabelUpdate",value:function(e){var t=this.props,n=t.node,a=t.onChange,r=this.state.editingIndex;if(n){var i=n.labels[r]||"";if(e!==i){try{E.parse("{INLINE #".concat(e,"}TESTING{/INLINE}"))}catch(s){return void this.setState({inlineError:"Invalid label"})}r===n.labels.length?n.addLabel(e):""===e||n.labels.indexOf(e)>=0?n.removeLabel(i):n.labels[r]=e}this.cancelLabelEditing(),a(n)}}},{key:"cancelLabelEditing",value:function(){this.setState({editingIndex:I,inlineError:""})}},{key:"renderLabelEditor",value:function(e){var t=this,n=this.state,a=n.editingIndex,i=n.inlineError,s=Object(r.a)(e.labels).concat([""]);return f.a.createElement("div",{className:"label-editor"},f.a.createElement("table",null,f.a.createElement("tbody",null,s.map(function(e,n){return f.a.createElement("tr",{key:e,className:v()({error:n===a&&i})},f.a.createElement("td",{className:"marker"},e||n===a?"#":""),n===a?f.a.createElement("td",null,f.a.createElement("input",{ref:function(e){return t.editingElement=e},defaultValue:e,onBlur:function(e){t.handleLabelUpdate(e.currentTarget.value)},onKeyDown:function(e){"Enter"===e.key?t.handleLabelUpdate(e.currentTarget.value):"Escape"===e.key&&t.cancelLabelEditing()}})):f.a.createElement("td",{className:"editable",onClick:function(){return t.handleLabelEdit(n)}},e))}))))}},{key:"renderAttributeEditor",value:function(e,t){var n=this,a=Object.keys(t);return f.a.createElement("div",{className:"attribute-editor"},f.a.createElement("table",null,f.a.createElement("tbody",null,a.map(function(e){return f.a.createElement("tr",{key:e},f.a.createElement("th",null,e),f.a.createElement("td",null,n.renderValue(t[e])))}))))}},{key:"render",value:function(){var e=this,t=(this.props.node,this.state.selectedTab);return f.a.createElement("div",{className:"zaml-prop-editor"},f.a.createElement(S,{tabs:k,selectedTab:t,onTabChange:function(t){return e.setState({selectedTab:t})}},this.renderTabContent()))}}]),t}(f.a.Component);L.defaultProps={onChange:function(){}};n(144);n.d(t,"a",function(){return P});var O=function(){},P=function(e){function t(){var e,n;Object(i.a)(this,t);for(var r=arguments.length,s=new Array(r),u=0;u<r;u++)s[u]=arguments[u];return(n=Object(o.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(s)))).state={selectedPart:a.Header,expandedNodes:[]},n}return Object(u.a)(t,e),Object(s.a)(t,[{key:"handleExpansionChange",value:function(e,t){var n=this.props.selectedNode,i=this.state.expandedNodes;n===e&&this.setState({selectedPart:t?a.Header:a.Whole}),t&&!d.a.includes(i,e.id)?this.setState({expandedNodes:Object(r.a)(i).concat([e.id])}):!t&&d.a.includes(i,e.id)&&this.setState({expandedNodes:d.a.without(i,e.id)})}},{key:"componentWillReceiveProps",value:function(e){var t=e.selectedNode;if(t&&t!==this.props.selectedNode){var n=this.state.expandedNodes,a=t.path.map(function(e){return e.id});this.setState({expandedNodes:d.a.union(n,a)})}}},{key:"render",value:function(){var e=this,t=this.props,n=t.root,a=t.selectedNode,r=t.onSelect,i=t.onHover,s=t.onChange,o=this.state,c=o.expandedNodes,u=o.selectedPart;return f.a.createElement("div",{className:"zaml-tree-view"},f.a.createElement(T.a,{split:"horizontal",defaultSize:"60%",minSize:200},f.a.createElement("div",{className:"tree-container"},f.a.createElement(y,null),f.a.createElement("div",{className:"tree"},f.a.createElement(m,{node:n,selectedNode:a,selectedPart:u,expandedNodes:c,onSelect:r,onSelectPart:function(t){return e.setState({selectedPart:t})},onMouseEnter:i,onMouseOut:function(){return i()},onExpansionChange:function(t,n){return e.handleExpansionChange(t,n)}})),f.a.createElement(N,{selectedNode:a,onSelect:r})),f.a.createElement(L,{node:a,onChange:s})))}}]),t}(f.a.Component);P.defaultProps={onSelect:O,onHover:O,onChange:O}},69:function(e,t,n){"use strict";var a=n(8),r=n(9),i=n(11),s=n(10),o=n(12),c=n(0),u=n.n(c),l=n(62),d=(n(107),n(109),n(111),n(39)),h=n.n(d);n(113);h.a.defineSimpleMode("zaml",{start:[{regex:/#[^#\s\n}]+/,token:"variable-3"},{regex:/{\/?([^\s}]+)}/,token:"keyword"},{regex:/[^\s{\n]+(?=[:\uff1a=][^\n])/,token:"variable-2"},{regex:/{|}/,token:"def"},{regex:/(?={)[^\s}]+/,token:"keyword"},{regex:/\[[^\]]+\]/,token:"string"},{regex:/(?:BLOCK|INLINE)\b/,token:"keyword"},{regex:/true|false|null|undefined/,token:"atom"},{regex:/0x[a-f\d]+|[-+]?(?:\.\d+|\d+\.?\d*)(?:e[-+]?\d+)?/i,token:"number"},{regex:/~[^~].*/,token:"comment"},{regex:/~~~/,token:"comment",next:"comment"},{regex:/\/(?:[^\\]|\\.)*?\//,token:"variable-3"},{regex:/[\{]/,indent:!0},{regex:/[\}]/,dedent:!0}],comment:[{regex:/.*?~~~/,token:"comment",next:"start"},{regex:/.*/,token:"comment"}],meta:{dontIndentStates:["comment"],lineComment:"~"}}),n.d(t,"a",function(){return T});var f={mode:"zaml",lineNumbers:!0,lineWrapping:!0},T=function(e){function t(e){var n;return Object(a.a)(this,t),(n=Object(i.a)(this,Object(s.a)(t).call(this,e))).state={value:e.value},n}return Object(o.a)(t,e),Object(r.a)(t,[{key:"componentWillReceiveProps",value:function(e){this.editor&&(e.height!==this.props.height&&this.editor&&this.editor.setSize(null,e.height),e.value!==this.props.value&&this.editor.setValue(e.value))}},{key:"render",value:function(){var e=this,t=this.props.onChange,n=this.state.value;return u.a.createElement("div",{className:"zaml-source"},u.a.createElement(l.Controlled,{value:n,options:f,onBeforeChange:function(t,n,a){return e.setState({value:a})},onChange:function(e){function t(t,n,a){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e,n,a){return t(a)}),editorDidMount:function(t){return e.editor=t}}))}}]),t}(u.a.Component);T.defaultProps={value:"",height:-1,onChange:function(){}}},70:function(e,t,n){"use strict";var a,r,i,s=n(8),o=n(9),c=n(11),u=n(10),l=n(12),d=n(0),h=n.n(d),f=n(14),T=n(151),E=n(131),p=n(146),v=n(148),A=n(16),g=n.n(A),m=n(5),_=n.n(m),N=(n(114),f.NodeType),y=function(e){function t(e){return Object(s.a)(this,t),Object(c.a)(this,Object(u.a)(t).call(this,e))}return Object(l.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e,n=this,a=this.props,r=a.node,i=a.selectedNode;if(!r)return null;var s=r===i,o=[];if(r.type===N.ROOT)e="div";else if(r.type===N.PARAGRAPH)e="p";else if(r.type===N.TEXT)e="span";else if(r.type===N.ENTITY){if("LINK"===r.name)return h.a.createElement("a",{className:"zaml-entity","node-name":"link","node-id":r.id,href:r.attributes.url},h.a.createElement(t,Object.assign({"node-id":r.children[0].id},this.props,{node:r.children[0]})));e="span"}else e=r.type===N.TAG?r.isBlock?"div":"span":null;return e?(g.a.isEmpty(r.children)?"text"===r.type&&o.push(r.content):o.push(h.a.createElement("span",{key:"children",className:"children"},g.a.map(r.children,function(e,a){return h.a.createElement(t,Object.assign({},n.props,{key:a,node:e}))}))),h.a.createElement(e,{className:_()("zaml-node","".concat(r.type),{block:r.isBlock,selected:s}),"node-name":r.name&&r.name.toLowerCase(),"node-id":r.id},o)):null}}]),t}(h.a.Component);n(116),n(118);n.d(t,"a",function(){return S});var R=f.NodeType,S=Object(T.a)((i=r=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).handleContextMenu=function(e,t){n.currentNode=t,n.setState({node:t})},n.state={},n}return Object(l.a)(t,e),Object(o.a)(t,[{key:"handleDoubleClick",value:function(e){var t=window.getSelection();if(0!==t.rangeCount){var n=t.getRangeAt(0),a=n.startContainer,r=a.textContent;if(r){e.preventDefault(),e.stopPropagation();for(var i=/[!?:;\u3002\uff01\uff1f\uff1a\uff1b]/g,s=0,o=r.length,c=0;i.exec(r);)if(s=c,c=i.lastIndex,i.lastIndex++,c>n.startOffset){o=c;break}n.setStart(a,s),n.setEnd(a,o)}}}},{key:"handleCreateBlock",value:function(){var e=this.props,t=e.root,n=e.onChange,a=window.getSelection();if(0!==a.rangeCount){var r=a.getRangeAt(0),i=this.getNodeByElement(r.commonAncestorContainer),s=this.getNodeByElement(r.startContainer),o=this.getNodeByElement(r.endContainer);if(i&&s&&o){var c=f.Node.createBlockByRange({startNode:s,startOffset:r.startOffset,endNode:o,endOffset:r.endOffset});a.removeAllRanges(),n(t,c)}}}},{key:"handleRemoveBlock",value:function(e){if(e){var t=this.props,n=t.root;(0,t.onChange)(n,e.flatten())}}},{key:"handleCreateEntity",value:function(e,t){if(t){var n=this.props,a=n.root,r=n.onChange,i=window.getSelection();if(i.anchorNode===i.focusNode){if(0!==i.rangeCount){var s=i.getRangeAt(0);r(a,e.createEntities([{type:t,start:s.startOffset,end:s.endOffset}])[0])}}else alert("Entity is only allowed in pure text!")}}},{key:"handleRemoveEntity",value:function(e){if(e){var t=this.props,n=t.root;(0,t.onChange)(n,e.removeEntity())}}},{key:"handleInspect",value:function(e){(0,this.props.onSelect)(e)}},{key:"handleSplitSentences",value:function(e){if(e){var t=this.props,n=t.root,a=t.onChange;e.splitText("\uff1a\u3002\uff01\uff1f","SENTENCE"),a(n)}}},{key:"getNodeByElement",value:function(e){var t=this.props.root;if(t){if(e.nodeType===e.TEXT_NODE||e.classList.contains("children")){if(!e.parentElement)return;e=e.parentElement}var n=e.getAttribute("node-id");if(n)return t.getNodeById(n)}}},{key:"render",value:function(){var e=this,t=this.props,n=t.root,a=t.selectedNode;return h.a.createElement("div",{className:"zaml-visual-editor",onDoubleClick:function(t){return e.handleDoubleClick(t)}},h.a.createElement(y,{node:n,selectedNode:a}))}},{key:"renderContextMenu",value:function(e){var t=this,n=this.props.commonEntityNames,a=this.getNodeByElement(e.target),r=a;if(a&&(a.type===R.TEXT&&(r=a.parent),r)){var i=r;return h.a.createElement(E.a,{id:"menu"},h.a.createElement(p.a,{disabled:!0,text:r.descriptor}),h.a.createElement(v.a,null),h.a.createElement(p.a,{text:"Create Block",onClick:function(){return t.handleCreateBlock()}}),r.isWrappingTag&&h.a.createElement(p.a,{text:"Remove Block",onClick:function(){return t.handleRemoveBlock(r)}}),r.isBlock&&h.a.createElement(p.a,{text:"Split Sentences",onClick:function(){return t.handleSplitSentences(r)}}),a.type===R.TEXT&&a.parent&&a.parent.type!==R.ENTITY&&h.a.createElement(p.a,{text:"Create Entity"},n&&n.map(function(e){return h.a.createElement(p.a,{key:e,text:e,onClick:function(){return t.handleCreateEntity(a,e)}})}),h.a.createElement(p.a,{text:"other...",onClick:function(){return t.handleCreateEntity(a,prompt("Please input entity type","PER"))}})),r.type===R.ENTITY&&h.a.createElement(p.a,{text:"Remove Entity",onClick:function(){return t.handleRemoveEntity(r)}}),h.a.createElement(v.a,null),h.a.createElement(p.a,{text:"Inspect",onClick:function(){return t.handleInspect(i)}}))}}}]),t}(h.a.Component),r.defaultProps={commonEntityNames:["PER","ORG","LOC","DATE"],onSelect:function(){},onChange:function(){}},a=i))||a},75:function(e,t,n){e.exports=n(147)},80:function(e,t,n){},82:function(e,t,n){},84:function(e,t,n){"use strict";(function(e){var a=n(25),r=n(24);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,s=r(n(30)),o=r(n(36)),c=r(n(26)),u=a(n(31)),l=n(45),d=r(n(53)),h=r(n(54)),f=a(n(46)),T=n(37);!function(e){e[e.METADATA=0]="METADATA",e[e.NORMAL=1]="NORMAL",e[e.SINGLE_COMMENT=2]="SINGLE_COMMENT",e[e.MULTIPLE_COMMENT=3]="MULTIPLE_COMMENT",e[e.START=4]="START",e[e.TAG_START=5]="TAG_START",e[e.TAG_NAME=6]="TAG_NAME",e[e.ATTRIBUTE_LIST=7]="ATTRIBUTE_LIST",e[e.ATTRIBUTE_NAME=8]="ATTRIBUTE_NAME",e[e.ATTRIBUTE_ASSIGN=9]="ATTRIBUTE_ASSIGN",e[e.ATTRIBUTE_VALUE=10]="ATTRIBUTE_VALUE",e[e.ATTRIBUTE_FINISH=11]="ATTRIBUTE_FINISH",e[e.TAG_END=12]="TAG_END",e[e.LABEL_START=13]="LABEL_START",e[e.ENTITY_START=14]="ENTITY_START",e[e.ENTITY_BODY=15]="ENTITY_BODY",e[e.ENTITY_END=16]="ENTITY_END",e[e.END=17]="END",e[e.FINISH=18]="FINISH"}(i||(i={}));var E=["METADATA","NORMAL","SINGLE_COMMENT","MULTIPLE_COMMENT","START","TAG_START","TAG_NAME","ATTRIBUTE_LIST","ATTRIBUTE_NAME","ATTRIBUTE_ASSIGN","ATTRIBUTE_VALUE","ATTRIBUTE_FINISH","TAG_END","LABEL_START","ENTITY_START","ENTITY_BODY","ENTITY_END","END","FINISH"],p=function(e){return E[e]},v=function(e){var t=e.match(T.P_LINE_BREAK);return t?t.length:0},A=function(){function t(n,a){if((0,s.default)(this,t),(0,c.default)(this,"text",void 0),(0,c.default)(this,"stream",void 0),(0,c.default)(this,"options",void 0),(0,c.default)(this,"parsed",void 0),!u.isString(n))throw new TypeError("input must be string");/\n\s*$/.test(n)||(n+=T.T_LINE_BREAK),this.text=n,this.stream=new d.default(n);var r={verbose:e&&"verbose"===Object({NODE_ENV:"production",PUBLIC_URL:"/zaml-lang"}).DEBUG};this.options=u.defaults(a,r),this.parsed=!1}return(0,o.default)(t,null,[{key:"from",value:function(e,n){return new t(e,n)}}]),(0,o.default)(t,[{key:"debug",value:function(){var e;this.options.verbose&&(e=console).log.apply(e,arguments)}},{key:"process",value:function(){for(var e=this,t=this.text,n=this.stream,a=this.options,r=a.needMetadataMarker,s=a.attributeAsString,o=a.bigIntAsString,c=Date.now(),d=i.METADATA,E=0,A=0,g=-1,m={unwrapped:!1,inline:!1,embedded:!1,isClosing:!1,key:void 0,value:void 0},_=f.default.create(f.NodeType.ROOT,void 0,{source:t}),N=[],y=_,R=function(t){if(e.options.verbose){var n=N.concat([y]),a=n.map(function(e,t){if(e){var a=e.descriptor;return a=t===n.length-1?l.chalk.cyanBright(a):l.chalk.green(a)}return""}).join(l.chalk.redBright(" > "));return t&&(a+=l.chalk.grey("".concat(" > ").concat(t.descriptor))),a}},S=function(t){-1===y.start&&(y.start=n.pos),N.push(y),y=t,e.debug("push: ".concat(R(),"\n"))},k=function(t){var a=y;if(y.end=n.pos,(y.start===y.end||y.type===f.NodeType.PARAGRAPH&&!y.hasChild()&&y.parent)&&y.parent.removeChild(y),y=N.pop(),e.debug("pop : ".concat(R(a),"\n")),!y)throw I(t||"unexpected closing node")},b=function(){if(y.parent&&y.parent.type===f.NodeType.PARAGRAPH){var e=y;k(),y.removeChild(e),k(),y.appendChild(e),S(e)}},I=function(a){var r,i;return r=n.getPosition(g),i=n.pos===g?n.getPosition(g+1):n.getPosition(),e.debug("error: '".concat(a,"' at ").concat(r.ln,":").concat(r.col)),e.debug("current node:"),y&&e.debug(y.toJSON()),e.debug("current parsing state:"),e.debug(JSON.stringify(_,null,2)),new h.default(a,t,r,i)};d!==i.FINISH;){if(Date.now()-c>=T.PROCESSING_TIMEOUT&&(this.debug("parsing timeout!"),d=i.FINISH),d===A&&g===n.pos)throw new Error("Parser fall into infinite loop!");switch(A=d,g=n.pos,this.debug(l.chalk.magenta("# ".concat(p(d),", pos = ").concat(n.pos))),this.options.verbose&&n.debugState(),d){case i.METADATA:n.eatWhile(T.P_WHITE_SPACES_EXT);var L=n.match(T.T_METADATA_MARKER);if(r&&!L){d=i.NORMAL;break}L||n.match(T.P_ATTRIBUTE_LIST_MULTILINE,{consume:!1})?(y.states.metadata=!0,d=i.ATTRIBUTE_LIST):d=i.NORMAL;break;case i.NORMAL:if((n.sol(!0)||n.eol(!0))&&n.eatWhile(T.P_WHITE_SPACE),n.match(T.P_PARAGRAPH_BREAK)){k(),y.states.unwrapped&&k();break}if(E=n.pos,y.type!==f.NodeType.PARAGRAPH&&!y.isInlineBlock&&n.sol(!0)){var O=y.createChild(f.NodeType.PARAGRAPH,void 0,{start:E});S(O)}var P=n.readTo(T.P_MARKER,{toEOF:!0});P&&(0===y.children.length&&(P=u.trimStart(P)),P=P.replace(T.P_SPACE_WRAPPED_LINE_BREAK,T.T_LINE_BREAK),(P=u.trimEnd(P,T.T_LINE_BREAKS))&&y.appendText(P,{start:E,end:n.pos})),d=n.match(T.P_PARAGRAPH_BREAK,{consume:!1})?i.NORMAL:i.START;break;case i.START:E=n.pos;var C=n.eat(T.P_MARKER);if(T.P_LABEL_START.lastIndex=0,C===T.T_SINGLE_LINE_COMMENT)d=0===n.eatWhile(T.T_SINGLE_LINE_COMMENT).length?i.SINGLE_COMMENT:i.MULTIPLE_COMMENT;else if(C===T.T_TAG_START)d=i.TAG_START;else if(T.P_LABEL_START.test(C))m.unwrapped=!0,d=i.TAG_START;else if(C===T.T_TAG_END)m.isClosing=!0,d=i.TAG_END;else if(C===T.T_ENTITY_START)d=i.ENTITY_START;else{if(!n.eof())throw I("empty start");d=i.END}break;case i.SINGLE_COMMENT:case i.MULTIPLE_COMMENT:E=n.pos;var x=void 0;(x=d===i.SINGLE_COMMENT?n.readTo(T.P_LINE_BREAK):n.readTo(T.P_MULTIPLE_LINE_COMMENT,{skipMatched:!0}))&&(d===i.MULTIPLE_COMMENT&&(x=x.replace(T.P_SPACE_WRAPPED_LINE_BREAK,"\n")),x=u.trim(x)),x&&y.createChild(f.NodeType.COMMENT,void 0,{start:E,end:n.pos,content:x}),d=i.NORMAL;break;case i.TAG_START:if(n.eat(T.T_TAG_CLOSING))m.isClosing=!0,d=i.TAG_NAME;else if(n.match(T.P_LINE_BREAK))d=i.NORMAL;else if(y.type!==f.NodeType.ENTITY&&(m.unwrapped||n.eat(T.P_LABEL_START)))d=i.LABEL_START;else{var B=f.default.create(f.NodeType.TAG,"",{start:E});m.embedded?(B.states.embedded=!0,B.states.metaKey=m.key,m.embedded=!1):y.appendChild(B),S(B),d=i.TAG_NAME}if(d===i.NORMAL||d===i.LABEL_START){n.pushCursor(E);var D=n.sol(!0)?"BLOCK":"INLINE";n.popCursor(),y.type===f.NodeType.PARAGRAPH&&"BLOCK"===D&&k();var M=y.createChild(f.NodeType.TAG,D,{start:E,states:{simpleBlock:!0,unwrapped:m.unwrapped}});m.unwrapped=!1,S(M)}break;case i.TAG_NAME:var w=n.match(T.P_TAG_NAME_MULTILINE);if(!w)throw I("expected tag name");if(m.inline="INLINE"===w,m.isClosing){if(y.type===f.NodeType.PARAGRAPH&&(n.pushCursor(E),k(),n.popCursor()),w!==y.name)throw I("unexpected closing tag");if(!n.eat(T.T_TAG_END))throw I("invalid closing tag");if(!m.inline&&!y.isInlineBlock&&!n.eol())throw I("closing block tag must take the whole line");d=i.TAG_END}else{if(y.name=w,y.isWrappingTag){if(n.pushCursor(y.start||0),"BLOCK"===y.name&&!n.sol(!0))throw I("unexpected start of block inline");n.popCursor(),y.isBlock&&b()}d=i.ATTRIBUTE_LIST}break;case i.ATTRIBUTE_LIST:var F=n.eatWhile(y.isInlineBlock||y.states.simpleBlock&&!y.states.metadata?T.P_WHITE_SPACE:T.P_WHITE_SPACES_EXT),G=y.states.metadata;if(G){var U=!1;if(n.match(T.T_METADATA_MARKER)){if(!n.match(T.P_LINE_BREAK))throw I("expected new line after metadata closed");U=!0}var j=v(F);if(j>1&&(U=!0),U){d=i.NORMAL,y.states.metadata=!1;break}if(y.type===f.NodeType.ROOT&&!n.match(T.P_ATTRIBUTE_LIST,{consume:!1})&&1===j){var H=y.createChild(f.NodeType.TAG,"BLOCK",{labels:y.labels,states:{unwrapped:!0},metadata:y.metadata});y.clearLabels(),y.clearMetadata(),S(H),d=i.NORMAL;break}}if(n.match(T.P_LINE_BREAK))d=i.NORMAL;else if(n.eat(T.T_TAG_END))d=i.TAG_END;else if(n.match(T.P_LABEL_START))d=i.LABEL_START;else{if(!F&&!G&&this.stream.pos>1){if(u.isEmpty(y.attributes)&&T.P_ATTRIBUTE_ASSIGN.test(n.peek())){m.key=y.name,y.name="BLOCK",y.states.simpleBlock=!0,b(),d=i.ATTRIBUTE_ASSIGN;break}throw I('expecting end of tag "}" or attribute list')}d=n.match(y.isInlineBlock||y.states.simpleBlock||y.states.metadata?T.P_ATTRIBUTE_LIST:T.P_ATTRIBUTE_LIST_MULTILINE,{consume:!1})?i.ATTRIBUTE_NAME:i.NORMAL}break;case i.ATTRIBUTE_NAME:var K=n.match(y.isInlineBlock||y.states.simpleBlock?T.P_ATTRIBUTE_NAME:T.P_ATTRIBUTE_NAME_MULTILINE);if(!K)throw I("expecting attribute name");m.key=K,d=i.ATTRIBUTE_ASSIGN;break;case i.ATTRIBUTE_ASSIGN:var Y=n.peek();if(Y===T.T_TAG_END)d=i.ATTRIBUTE_FINISH;else{if(!(Y=n.eat(T.P_ATTRIBUTE_ASSIGN))){if(y.states.simpleBlock)throw I('expecting assignment "=" or ":"');m.value=!0,d=i.ATTRIBUTE_FINISH;break}if(T.P_ASSIGN_YAML.test(Y)&&(n.eatWhile(T.P_WHITE_SPACE),n.match(T.P_LINE_BREAK)))throw I("unexpected end of line");d=i.ATTRIBUTE_VALUE}break;case i.ATTRIBUTE_VALUE:var W=n.peek(),X=void 0;if(W===T.T_TAG_START||W===T.T_ENTITY_START){m.embedded=!0,d=i.START;break}if(W===T.T_STRING_START){X=n.match(T.P_STRING_LITERAL_QUOTED);try{X=JSON.parse(X)}catch(ee){throw I("invalid string literal")}}else X=s?n.match(T.P_STRING_LITERAL_UNQUOTED):(X=n.match(T.P_DATE_LITERAL))?new Date(X):(X=n.match(T.P_NUMBER_VALUE))?o?(0,l.parseNumber)(X):parseFloat(X):!!n.match(T.P_BOOLEAN_TRUE)||!n.match(T.P_BOOLEAN_FALSE)&&n.match(T.P_STRING_LITERAL_UNQUOTED);if(u.isNull(X))throw I("invalid attribute value");m.value=X,d=i.ATTRIBUTE_FINISH;break;case i.ATTRIBUTE_FINISH:var z=m.key,Z=m.value;m.key=void 0,m.value=void 0,u.isUndefined(Z)&&(Z=!0),y.states.metadata?y.setMetadata(z,Z):y.setAttribute(z,Z),this.debug("# ".concat(y.states.metadata?"metadata":"attribute"," ").concat(z,"=").concat(JSON.stringify(Z))),this.debug(),d=i.ATTRIBUTE_LIST;break;case i.TAG_END:var V=y.isBlockTag&&!m.isClosing,J=y;m.inline=J.isInlineBlock,y.isWrappingTag&&!m.isClosing||(y.type===f.NodeType.PARAGRAPH&&k(),k(),y.type===f.NodeType.ENTITY&&(y.setAttributes(J.attributes),y.name=J.name,y.removeChild(J),d=i.ENTITY_END,J=y,k()),J.states.embedded&&(y.states.metadata?y.setMetadata(J.states.metaKey,J):y.setAttribute(J.states.metaKey,J))),m.isClosing&&!m.inline&&n.skipOver(T.P_LINE_BREAK),m.isClosing=!1,m.inline=!1,d=V?i.METADATA:!J.states.embedded||J.isWrappingTag&&!m.isClosing?i.NORMAL:i.ATTRIBUTE_LIST;break;case i.LABEL_START:var Q=n.match(T.P_VAR_NAME);if(!Q)throw I("expected label name");y.addLabel(Q),d=i.ATTRIBUTE_LIST;break;case i.ENTITY_START:var $=f.default.create(f.NodeType.ENTITY,"",{start:E});m.embedded?($.states.embedded=!0,$.states.metaKey=m.key,m.embedded=!1):y.appendChild($),S($),d=i.ENTITY_BODY;break;case i.ENTITY_BODY:E=n.pos;var q=n.readTo(T.T_ENTITY_END,{skipMatched:!0});if(!q)throw I("empty entity");if(-1!==q.search(T.P_LINE_BREAK))throw I("unexpected line break of entity");y.appendText(q,{start:E,end:E+q.length}),d=n.eat(T.T_TAG_START)?i.TAG_START:i.ENTITY_END;break;case i.ENTITY_END:k(),d=i.NORMAL;break;case i.END:y.type!==f.NodeType.ROOT&&k(),d=i.FINISH;break;case i.FINISH:}}return _.toString(),this.parsed=!0,this.debug("parsed result:"),this.debug(JSON.stringify(_.toJSON(),null,2)),_}}]),t}();t.default=A}).call(this,n(44))},97:function(e,t,n){"use strict";var a=n(24);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(30)),i=a(n(36)),s=a(n(26)),o=function(){function e(t,n,a,i){(0,r.default)(this,e),(0,s.default)(this,"lines",void 0),(0,s.default)(this,"text",void 0),(0,s.default)(this,"ln",void 0),(0,s.default)(this,"offset",void 0),this.lines=t,this.text=n,this.ln=a,this.offset=i}return(0,i.default)(e,[{key:"prev",value:function(){return this.lines[this.ln-2]}},{key:"next",value:function(){return this.lines[this.ln]}},{key:"toJSON",value:function(){return{ln:this.ln,start:this.start,end:this.end,text:this.text}}},{key:"length",get:function(){return this.text.length}},{key:"start",get:function(){return this.offset}},{key:"end",get:function(){return this.offset+this.text.length}}]),e}();t.default=o}},[[75,2,1]]]);
//# sourceMappingURL=main.e5f6e27a.chunk.js.map