(this["webpackJsonp@zaml/editor"]=this["webpackJsonp@zaml/editor"]||[]).push([[0],{12:function(e,t,n){"use strict";var r=n(19),a=n(17);Object.defineProperty(t,"__esModule",{value:!0}),t.tokenize=l,t.parse=u,Object.defineProperty(t,"Tokenizer",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"TextStream",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"TextLine",{enumerable:!0,get:function(){return o.TextLine}}),Object.defineProperty(t,"Node",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"NodeType",{enumerable:!0,get:function(){return s.NodeType}}),Object.defineProperty(t,"ParseError",{enumerable:!0,get:function(){return c.default}}),t.default=void 0;var i=a(n(129)),o=r(n(47)),s=r(n(35)),c=a(n(48));function u(e,t){return new i.default(e,t).process()}function l(e,t){return console.warn("zaml.tokenize() is deprecated, please use zaml.parse() instead"),u(e,t)}var d={ParseError:c.default,Tokenizer:i.default,TextStream:o.default,TextLine:o.TextLine,Node:s.default,NodeType:s.NodeType,tokenize:l,parse:u};t.default=d},122:function(e,t,n){e.exports=n(188)},127:function(e,t,n){},128:function(e,t,n){},129:function(e,t,n){"use strict";(function(e){var r=n(19),a=n(17);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,o=a(n(21)),s=a(n(26)),c=a(n(22)),u=r(n(23)),l=n(34),d=a(n(47)),h=a(n(48)),f=r(n(35)),T=n(27);!function(e){e[e.METADATA=0]="METADATA",e[e.NORMAL=1]="NORMAL",e[e.SINGLE_COMMENT=2]="SINGLE_COMMENT",e[e.MULTIPLE_COMMENT=3]="MULTIPLE_COMMENT",e[e.START=4]="START",e[e.TAG_START=5]="TAG_START",e[e.TAG_NAME=6]="TAG_NAME",e[e.ATTRIBUTE_LIST=7]="ATTRIBUTE_LIST",e[e.ATTRIBUTE_NAME=8]="ATTRIBUTE_NAME",e[e.ATTRIBUTE_ASSIGN=9]="ATTRIBUTE_ASSIGN",e[e.ATTRIBUTE_VALUE=10]="ATTRIBUTE_VALUE",e[e.ATTRIBUTE_FINISH=11]="ATTRIBUTE_FINISH",e[e.TAG_END=12]="TAG_END",e[e.LABEL_START=13]="LABEL_START",e[e.ENTITY_START=14]="ENTITY_START",e[e.ENTITY_BODY=15]="ENTITY_BODY",e[e.ENTITY_END=16]="ENTITY_END",e[e.END=17]="END",e[e.FINISH=18]="FINISH"}(i||(i={}));var E=["METADATA","NORMAL","SINGLE_COMMENT","MULTIPLE_COMMENT","START","TAG_START","TAG_NAME","ATTRIBUTE_LIST","ATTRIBUTE_NAME","ATTRIBUTE_ASSIGN","ATTRIBUTE_VALUE","ATTRIBUTE_FINISH","TAG_END","LABEL_START","ENTITY_START","ENTITY_BODY","ENTITY_END","END","FINISH"],p=function(e){return E[e]},v=function(e){var t=e.match(T.P_LINE_BREAK);return t?t.length:0},g=function(){function t(n,r){if((0,o.default)(this,t),(0,c.default)(this,"text",void 0),(0,c.default)(this,"stream",void 0),(0,c.default)(this,"options",void 0),(0,c.default)(this,"parsed",void 0),!u.isString(n))throw new TypeError("input must be string");/\n\s*$/.test(n)||(n+=T.T_LINE_BREAK),this.text=n,this.stream=new d.default(n);var a={needMetadataMarker:!1,attributeAsString:!1,bigIntAsString:!1,enableComments:!1,verbose:e&&"verbose"===Object({NODE_ENV:"production",PUBLIC_URL:"/zaml-lang",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).DEBUG};this.options=u.defaults(r,a),this.parsed=!1}return(0,s.default)(t,null,[{key:"from",value:function(e,n){return new t(e,n)}}]),(0,s.default)(t,[{key:"debug",value:function(){var e;this.options.verbose&&(e=console).log.apply(e,arguments)}},{key:"process",value:function(){for(var e=this,t=this.text,n=this.stream,r=this.options,a=r.needMetadataMarker,o=r.attributeAsString,s=r.bigIntAsString,c=Date.now(),d=i.METADATA,E=0,g=0,A=-1,m={unwrapped:!1,inline:!1,embedded:!1,isClosing:!1,key:void 0,value:void 0},_=f.default.create(f.NodeType.ROOT,void 0,{source:t}),N=[],y=_,b=function(t){if(e.options.verbose){var n=[].concat(N,[y]),r=n.map((function(e,t){if(e){var r=e.descriptor;return r=t===n.length-1?l.chalk.cyanBright(r):l.chalk.green(r)}return""})).join(l.chalk.redBright(" > "));return t&&(r+=l.chalk.grey("".concat(" > ").concat(t.descriptor))),r}},S=function(t){-1===y.start&&(y.start=n.pos),N.push(y),y=t,e.debug("push: ".concat(b(),"\n"))},R=function(t){var r=y;if(y.end=n.pos,y.isParagraph&&I(y),(y.start===y.end||y.isParagraph&&!y.hasChild()&&y.parent)&&y.remove(),y=N.pop(),e.debug("pop : ".concat(b(r),"\n")),!y)throw O(t||"unexpected closing node")},k=function(){if(y.parent&&y.parent.type===f.NodeType.PARAGRAPH){var e=y;R(),y.removeChild(e),R(),y.appendChild(e),S(e)}},I=function(e){var t=e.lastChild;t&&t.isText&&(t.content=u.trimEnd(t.content,T.T_LINE_BREAKS),t.content||t.remove())},O=function(r){var a,i;return a=n.getPosition(A),i=n.pos===A?n.getPosition(A+1):n.getPosition(),e.debug("error: '".concat(r,"' at ").concat(a.ln,":").concat(a.col)),e.debug("current node:"),y&&e.debug(y.toJSON()),e.debug("current parsing state:"),e.debug(JSON.stringify(_,null,2)),new h.default(r,t,a,i)};d!==i.FINISH;){if(Date.now()-c>=T.PROCESSING_TIMEOUT&&(this.debug("parsing timeout!"),d=i.FINISH),d===g&&A===n.pos)throw new Error("Parser fall into infinite loop!");switch(g=d,A=n.pos,this.debug(l.chalk.magenta("# ".concat(p(d),", pos = ").concat(n.pos))),this.options.verbose&&n.debugState(),d){case i.METADATA:n.eatWhile(T.P_WHITE_SPACES_EXT);var L=n.match(T.T_METADATA_MARKER);if(a&&!L){d=i.NORMAL;break}L||n.match(T.P_ATTRIBUTE_LIST_MULTILINE,{consume:!1})?(y.states.metadata=!0,d=i.ATTRIBUTE_LIST):d=i.NORMAL;break;case i.NORMAL:if((n.sol(!0)||n.eol(!0))&&n.eatWhile(T.P_WHITE_SPACE),n.match(T.P_PARAGRAPH_BREAK)){R(),y.states.unwrapped&&R();break}if(E=n.pos,!y.isParagraph&&!y.isInlineBlock&&n.sol(!0)){var P=y.createChild(f.NodeType.PARAGRAPH,void 0,{start:E});S(P)}var C=this.options.enableComments?T.P_MARKER_WITH_COMMENTS:T.P_MARKER,x=n.readTo(C,{toEOF:!0});x&&(0===y.children.length&&(x=u.trimStart(x)),(x=x.replace(T.P_SPACE_WRAPPED_LINE_BREAK,T.T_LINE_BREAK))&&y.appendText(x,{start:E,end:n.pos})),d=n.match(T.P_PARAGRAPH_BREAK,{consume:!1})?i.NORMAL:i.START;break;case i.START:E=n.pos;var D=this.options.enableComments?T.P_MARKER_WITH_COMMENTS:T.P_MARKER,B=n.eat(D);if(T.P_LABEL_START.lastIndex=0,B===T.T_SINGLE_LINE_COMMENT)d=0===n.eatWhile(T.T_SINGLE_LINE_COMMENT).length?i.SINGLE_COMMENT:i.MULTIPLE_COMMENT;else if(B===T.T_TAG_START)d=i.TAG_START;else if(T.P_LABEL_START.test(B))m.unwrapped=!0,d=i.TAG_START;else if(B===T.T_TAG_END)m.isClosing=!0,d=i.TAG_END;else if(B===T.T_ENTITY_START)d=i.ENTITY_START;else{if(!n.eof())throw O("empty start");d=i.END}break;case i.SINGLE_COMMENT:case i.MULTIPLE_COMMENT:E=n.pos;var M=void 0;(M=d===i.SINGLE_COMMENT?n.readTo(T.P_LINE_BREAK):n.readTo(T.T_MULTIPLE_LINE_COMMENT,{skipMatched:!0}))&&(d===i.MULTIPLE_COMMENT&&(M=M.replace(T.P_SPACE_WRAPPED_LINE_BREAK,"\n")),M=u.trim(M)),M&&y.createChild(f.NodeType.COMMENT,void 0,{start:E,end:n.pos,content:M}),d=i.NORMAL;break;case i.TAG_START:if(n.eat(T.T_TAG_CLOSING))m.isClosing=!0,d=i.TAG_NAME;else if(n.match(T.P_LINE_BREAK))d=i.NORMAL;else if(y.isEntity||!m.unwrapped&&!n.eat(T.P_LABEL_START)){var w=f.default.create(f.NodeType.TAG,"",{start:E});m.embedded?(w.states.embedded=!0,w.states.metaKey=m.key,m.embedded=!1):y.appendChild(w),S(w),d=i.TAG_NAME}else d=i.LABEL_START;if(d===i.NORMAL||d===i.LABEL_START){n.pushCursor(E);var F=n.sol(!0)?"BLOCK":"INLINE";n.popCursor(),y.isParagraph&&"BLOCK"===F&&R();var G=y.createChild(f.NodeType.TAG,F,{start:E,states:{simpleBlock:!0,unwrapped:m.unwrapped}});m.unwrapped=!1,S(G)}break;case i.TAG_NAME:var U=n.match(T.P_TAG_NAME_MULTILINE);if(!U)throw O("expected tag name");if(m.inline="INLINE"===U,m.isClosing){if(y.isParagraph&&(n.pushCursor(E),R(),n.popCursor()),U!==y.name)throw O("unexpected closing tag");if(!n.eat(T.T_TAG_END))throw O("invalid closing tag");if(!m.inline&&!y.isInlineBlock&&!n.eol())throw O("closing block tag must take the whole line");d=i.TAG_END}else{if(y.name=U,y.isWrappingTag){if(n.pushCursor(y.start||0),"BLOCK"===y.name&&!n.sol(!0))throw O("unexpected start of block inline");n.popCursor(),y.isBlock&&k()}d=i.ATTRIBUTE_LIST}break;case i.ATTRIBUTE_LIST:var j=n.eatWhile(y.isInlineBlock||y.states.simpleBlock&&!y.states.metadata?T.P_WHITE_SPACE:T.P_WHITE_SPACES_EXT),K=y.states.metadata;if(K){var H=!1;if(n.match(T.T_METADATA_MARKER)){if(!n.match(T.P_LINE_BREAK))throw O("expected new line after metadata closed");H=!0}var Y=v(j);if(Y>1&&(H=!0),H){d=i.NORMAL,y.states.metadata=!1;break}if(y.isRoot&&!n.match(T.P_ATTRIBUTE_LIST,{consume:!1})&&1===Y){var W=y.createChild(f.NodeType.TAG,"BLOCK",{labels:y.labels,states:{unwrapped:!0},metadata:y.metadata});y.clearLabels(),y.clearMetadata(),S(W),d=i.NORMAL;break}}if(n.match(T.P_LINE_BREAK))d=i.NORMAL;else if(n.eat(T.T_TAG_END))d=i.TAG_END;else if(n.match(T.P_LABEL_START))d=i.LABEL_START;else{if(!j&&!K&&this.stream.pos>1){if(u.isEmpty(y.attributes)&&T.P_ATTRIBUTE_ASSIGN.test(n.peek())){m.key=y.name,y.name="BLOCK",y.states.simpleBlock=!0,k(),d=i.ATTRIBUTE_ASSIGN;break}throw O('expecting end of tag "}" or attribute list')}d=n.match(y.isInlineBlock||y.states.simpleBlock||y.states.metadata?T.P_ATTRIBUTE_LIST:T.P_ATTRIBUTE_LIST_MULTILINE,{consume:!1})?i.ATTRIBUTE_NAME:i.NORMAL}break;case i.ATTRIBUTE_NAME:var X=n.match(y.isInlineBlock||y.states.simpleBlock?T.P_ATTRIBUTE_NAME:T.P_ATTRIBUTE_NAME_MULTILINE);if(!X)throw O("expecting attribute name");m.key=X,d=i.ATTRIBUTE_ASSIGN;break;case i.ATTRIBUTE_ASSIGN:var z=n.peek();if(z===T.T_TAG_END)d=i.ATTRIBUTE_FINISH;else{if(!(z=n.eat(T.P_ATTRIBUTE_ASSIGN))){if(y.states.simpleBlock)throw O('expecting assignment "=" or ":"');m.value=!0,d=i.ATTRIBUTE_FINISH;break}if(T.P_ASSIGN_YAML.test(z)&&(n.eatWhile(T.P_WHITE_SPACE),n.match(T.P_LINE_BREAK)))throw O("unexpected end of line");d=i.ATTRIBUTE_VALUE}break;case i.ATTRIBUTE_VALUE:var Z=n.peek(),V=void 0;if(Z===T.T_TAG_START||Z===T.T_ENTITY_START){m.embedded=!0,d=i.START;break}if(Z===T.T_STRING_START){V=n.match(T.P_STRING_LITERAL_QUOTED);try{V=JSON.parse(V)}catch(re){throw O("invalid string literal")}}else V=o?n.match(T.P_STRING_LITERAL_UNQUOTED):(V=n.match(T.P_DATE_LITERAL))?new Date(V):(V=n.match(T.P_NUMBER_VALUE))?(0,l.parseNumber)(V,s):!!n.match(T.P_BOOLEAN_TRUE)||!n.match(T.P_BOOLEAN_FALSE)&&n.match(T.P_STRING_LITERAL_UNQUOTED);if(u.isNull(V))throw O("invalid attribute value");m.value=V,d=i.ATTRIBUTE_FINISH;break;case i.ATTRIBUTE_FINISH:var J=m.key,Q=m.value;m.key=void 0,m.value=void 0,u.isUndefined(Q)&&(Q=!0),y.states.metadata?y.setMetadata(J,Q):y.setAttribute(J,Q),this.debug("# ".concat(y.states.metadata?"metadata":"attribute"," ").concat(J,"=").concat(JSON.stringify(Q))),this.debug(),d=i.ATTRIBUTE_LIST;break;case i.TAG_END:var $=y.isBlockTag&&!m.isClosing,q=y;m.inline=q.isInlineBlock,y.isWrappingTag&&!m.isClosing||(y.isParagraph&&R(),R(),y.isEntity&&(y.setAttributes(q.attributes),y.name=q.name,y.removeChild(q),d=i.ENTITY_END,q=y,R()),q.states.embedded&&(y.states.metadata?y.setMetadata(q.states.metaKey,q):y.setAttribute(q.states.metaKey,q))),m.isClosing&&!m.inline&&n.skipOver(T.P_LINE_BREAK),m.isClosing=!1,m.inline=!1,d=$?i.METADATA:!q.states.embedded||q.isWrappingTag&&!m.isClosing?i.NORMAL:i.ATTRIBUTE_LIST;break;case i.LABEL_START:var ee=n.match(T.P_VAR_NAME);if(!ee)throw O("expected label name");y.addLabel(ee),d=i.ATTRIBUTE_LIST;break;case i.ENTITY_START:var te=f.default.create(f.NodeType.ENTITY,"",{start:E});m.embedded?(te.states.embedded=!0,te.states.metaKey=m.key,m.embedded=!1):y.appendChild(te),S(te),d=i.ENTITY_BODY;break;case i.ENTITY_BODY:E=n.pos;var ne=n.readTo(T.T_ENTITY_END,{skipMatched:!0});if(!ne)throw O("empty entity");if(-1!==ne.search(T.P_LINE_BREAK))throw O("unexpected line break of entity");y.appendText(ne,{start:E,end:E+ne.length}),d=n.eat(T.T_TAG_START)?i.TAG_START:i.ENTITY_END;break;case i.ENTITY_END:R(),d=i.NORMAL;break;case i.END:y.isRoot||R(),d=i.FINISH;break;case i.FINISH:}}return _.toString(),this.parsed=!0,this.debug("parsed result:"),this.debug(JSON.stringify(_.toJSON(),null,2)),_}}]),t}();t.default=g}).call(this,n(33))},141:function(e,t,n){"use strict";var r=n(17);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(21)),i=r(n(26)),o=r(n(22)),s=function(){function e(t,n,r,i){(0,a.default)(this,e),(0,o.default)(this,"lines",void 0),(0,o.default)(this,"text",void 0),(0,o.default)(this,"ln",void 0),(0,o.default)(this,"offset",void 0),this.lines=t,this.text=n,this.ln=r,this.offset=i}return(0,i.default)(e,[{key:"prev",value:function(){return this.lines[this.ln-2]}},{key:"next",value:function(){return this.lines[this.ln]}},{key:"toJSON",value:function(){return{ln:this.ln,start:this.start,end:this.end,text:this.text}}},{key:"length",get:function(){return this.text.length}},{key:"start",get:function(){return this.offset}},{key:"end",get:function(){return this.offset+this.text.length}}]),e}();t.default=s},153:function(e,t,n){},155:function(e,t,n){},156:function(e,t,n){},183:function(e,t,n){},184:function(e,t,n){},185:function(e,t,n){},186:function(e,t,n){},187:function(e,t,n){},188:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),i=n(11),o=n.n(i),s=(n(127),n(3)),c=n(4),u=n(6),l=n(5),d=(n(128),n(62)),h=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){return a.a.createElement("div",{className:"App"},a.a.createElement(d.a,{defaultSource:"---\nfoo: bar\n---\n#Question #Q #Q1 \n  What is your name?\n\n#Answer #A \n  My name is [Jack]{PER}\n"}))}}]),n}(r.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(a.a.createElement(h,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},27:function(e,t,n){"use strict";var r=n(19);Object.defineProperty(t,"__esModule",{value:!0}),t.PROCESSING_TIMEOUT=t.P_MARKER_WITH_COMMENTS=t.P_MARKER=t.END_MARKERS=t.START_MARKERS=t.P_FULL_WIDTH_CHARACTER=t.P_BOOLEAN_FALSE=t.P_BOOLEAN_TRUE=t.P_STRING_LITERAL_UNQUOTED_TESTER=t.P_STRING_LITERAL_UNQUOTED=t.P_STRING_LITERAL_QUOTED=t.P_NUMBER_VALUE=t.P_NUMBER_LITERAL_FULL=t.P_NUMBER_LITERAL=t.P_NUMBER_START=t.P_DATE_LITERAL=t.T_STRING_START=t.P_TAG_NAME_MULTILINE=t.P_TAG_NAME=t.P_ATTRIBUTE_LIST_MULTILINE=t.P_ATTRIBUTE_LIST=t.P_ATTRIBUTE_NAME_MULTILINE=t.P_ATTRIBUTE_NAME=t.P_ATTRIBUTE_ASSIGN=t.P_LABEL=t.P_VAR_NAME=t.P_LABEL_START=t.P_LIST_SEPARATOR=t.P_WHITE_SPACES_EXT=t.P_WHITE_SPACE=t.P_PARAGRAPH_BREAK=t.P_SPACE_WRAPPED_LINE_BREAK=t.P_MULTIPLE_LINE_BREAK=t.P_LINE_BREAK=t.P_ASSIGN_YAML=t.T_TAG_ATTRIBUTE_FAVORED_ASSIGN=t.T_METADATA_FAVORED_ASSIGN=t.T_PARAGRAPH_BREAK=t.T_LINE_BREAKS=t.T_LINE_BREAK=t.T_ASSIGN_YAML=t.T_ASSIGN_XML=t.T_TAG_END=t.T_TAG_CLOSING=t.T_TAG_START=t.T_ENTITY_END=t.T_ENTITY_START=t.T_MULTIPLE_LINE_COMMENT=t.T_SINGLE_LINE_COMMENT=t.T_METADATA_MARKER=t.T_TAB=t.T_SPACE=t.DEFAULT_INDENT_SPACES=t.combinePatterns=void 0;var a=r(n(23)),i=function(e){return e.map((function(e){return a.isRegExp(e)?e.source:a.escapeRegExp(e)})).join("|")};t.combinePatterns=i;t.DEFAULT_INDENT_SPACES=2;t.T_SPACE=" ";t.T_TAB="\t";t.T_METADATA_MARKER="---";t.T_SINGLE_LINE_COMMENT="~";t.T_MULTIPLE_LINE_COMMENT="~~~";t.T_ENTITY_START="[";t.T_ENTITY_END="]";t.T_TAG_START="{";t.T_TAG_CLOSING="/";t.T_TAG_END="}";var o="=";t.T_ASSIGN_XML=o;var s=":\uff1a";t.T_ASSIGN_YAML=s;t.T_LINE_BREAK="\n";t.T_LINE_BREAKS="\r\n";t.T_PARAGRAPH_BREAK="\n\n";var c=s;t.T_METADATA_FAVORED_ASSIGN=c;var u=o;t.T_TAG_ATTRIBUTE_FAVORED_ASSIGN=u;t.P_ASSIGN_YAML=/[:\uff1a]/;var l=/\r?\n/g;t.P_LINE_BREAK=l;t.P_MULTIPLE_LINE_BREAK=/(\r?\n)+/g;t.P_SPACE_WRAPPED_LINE_BREAK=/\s*\n\s*/g;var d=new RegExp("".concat(l.source,"\\s*").concat(l.source),"g");t.P_PARAGRAPH_BREAK=d;var h=/[ \t]/g;t.P_WHITE_SPACE=h;var f=/[\s\r\n]/g;t.P_WHITE_SPACES_EXT=f;t.P_LIST_SEPARATOR=/[,\uff0c]/g;var T=/[#\uff03]/g;t.P_LABEL_START=T;var E=/(?:[A-Za-z\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u3005\u3007\u3021-\u3029\u3038-\u303B\u3400-\u4DBF\u4E00-\u9FFC\uF900-\uFA6D\uFA70-\uFAD9]|\uD81B[\uDFF0\uDFF1]|[\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD869[\uDC00-\uDEDD\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])(?:[\.0-9A-Z_a-z\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u3005\u3007\u3021-\u3029\u3038-\u303B\u3400-\u4DBF\u4E00-\u9FFC\uF900-\uFA6D\uFA70-\uFAD9]|\uD81B[\uDFF0\uDFF1]|[\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD869[\uDC00-\uDEDD\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])*/g;t.P_VAR_NAME=E;var p=new RegExp("".concat(T.source).concat(E.source),"g");t.P_LABEL=p;var v=new RegExp("[".concat([o,s].join(""),"]"));t.P_ATTRIBUTE_ASSIGN=v;var g=new RegExp("(?:".concat(E.source,")(?=").concat(i([h,v,"}"]),")"),"g");t.P_ATTRIBUTE_NAME=g;var A=new RegExp("(?:".concat(E.source,")(?=").concat(i([f,v,"}"]),")"),"g");t.P_ATTRIBUTE_NAME_MULTILINE=A;var m=new RegExp("(".concat(E.source).concat(v.source,"|").concat(p,")"),"g");t.P_ATTRIBUTE_LIST=m;var _=new RegExp("(".concat(E.source).concat(v.source,"?|").concat(p,")"),"g");t.P_ATTRIBUTE_LIST_MULTILINE=_;var N=g;t.P_TAG_NAME=N;var y=A;t.P_TAG_NAME_MULTILINE=y;t.T_STRING_START='"';t.P_DATE_LITERAL=/\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d(\.\d+([+-][0-2]\d:[0-5]\d|Z))?|\d{4}-[01]\d-[0-3]\d/g;t.P_NUMBER_START=/[\d\.\-]/;var b=/(?:\-?(\d*\.\d*|\d+)(e\-?\d+)?|0x[0-9a-f]+|0o[0-7]+|0b[01]+)/g;t.P_NUMBER_LITERAL=b;var S=new RegExp("^".concat(b.source,"$"));t.P_NUMBER_LITERAL_FULL=S;var R=new RegExp("".concat(b.source,"(?=").concat(i([f,"}"]),")"),"g");t.P_NUMBER_VALUE=R;t.P_STRING_LITERAL_QUOTED=/"([^"\\]|\\.)*"/g;var k=/[^\s}"'\\\n]+/g;t.P_STRING_LITERAL_UNQUOTED=k;var I=new RegExp("^".concat(k.source,"$"));t.P_STRING_LITERAL_UNQUOTED_TESTER=I;t.P_BOOLEAN_TRUE=/(TRUE|True|true)/g;t.P_BOOLEAN_FALSE=/(FALSE|False|false)/g;t.P_FULL_WIDTH_CHARACTER=/(?:[\xD7\u2014\u2026\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u3001\u3002\u3005\u3007\u300A-\u300D\u3010\u3011\u3021-\u3029\u3038-\u303B\u3400-\u4DBF\u4E00-\u9FFC\uF900-\uFA6D\uFA70-\uFAD9\uFF01\uFF03\uFF05\uFF06\uFF08\uFF09\uFF0B-\uFF0D\uFF1A\uFF1B\uFF1D\uFF1F\uFF20\uFFE5]|\uD81B[\uDFF0\uDFF1]|[\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD869[\uDC00-\uDEDD\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])/g;var O=["{","[",T];t.START_MARKERS=O;var L=["}","]"];t.END_MARKERS=L;var P=new RegExp("(".concat(i([d].concat(O,["}"])),")"),"g");t.P_MARKER=P;var C=new RegExp("(".concat(i([d].concat(O,["}","~"])),")"),"g");t.P_MARKER_WITH_COMMENTS=C;t.PROCESSING_TIMEOUT=1/0},31:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n(3),a=n(4),i=n(6),o=n(5),s=n(0),c=n.n(s),u=n(2),l=n.n(u),d=function(e){Object(i.a)(n,e);var t=Object(o.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n,[{key:"render",value:function(){var e=this.props,t=e.title,n=e.className,r=e.children;return c.a.createElement("div",{className:l()("pane",n)},c.a.createElement("div",{className:"pane-title"},c.a.createElement("h2",null,t)),c.a.createElement("div",{className:"pane-content"},r))}}]),n}(c.a.Component);d.defaultProps={title:"pane",className:""}},34:function(e,t,n){"use strict";(function(e){var r=n(19),a=n(17);Object.defineProperty(t,"__esModule",{value:!0}),t.formatValue=l,t.parseValue=function(e){if(u.test(e))return new Date(e);return e},t.parseNumber=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=parseFloat(e);if(/^\d+$/.test(e)&&t&&(n>Number.MAX_SAFE_INTEGER||n<Number.MIN_SAFE_INTEGER))return e;var r=e.substr(0,2),a=e.substr(2);switch(r){case"0x":n=parseInt(a,16);break;case"0o":n=parseInt(a,8);break;case"0b":n=parseInt(a,2)}return n},t.spacer=d,t.stringify=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i={space:s.DEFAULT_INDENT_SPACES,simple:!1,toSource:!1,metadataMarker:!0,attributeAsString:!1},u=o.defaults(n,i),h="",f=u.simple&&t.isSimpleTag&&(t.labels.length>0||Object.keys(t.attributes).length>0),T=f&&t.isBlockTag&&1===t.children.length;u.toSource?t.start=a:t.textStart=a;if(t.isText)u.toSource?h+=(t.content||"").replace(/\n/g,"\n".concat(d(u.space,r-1))):h+=t.content;else{if(t.isEntity){var E=o.first(t.children);if(!E)throw new Error("missing text node of entity");u.toSource&&(h+=s.T_ENTITY_START),h+=e(E,u,r,a+h.length),u.toSource&&(h+=s.T_ENTITY_END)}if(u.toSource&&(t.isTag||t.isEntity)){t.isBlock&&(h+=d(u.space,r)),T||(h+=s.T_TAG_START),f||(h+=t.name);var p=0;o.keys(t.attributes).forEach((function(n,r){var i=t.attributes[n];p++,(!f||p>1)&&(h+=s.T_SPACE),!f&&o.isBoolean(i)&&i&&!u.attributeAsString?h+=n:i instanceof c.default?h+=e(t,u,0,a+h.length):h+="".concat(n,"=").concat(l(i,u.attributeAsString))})),o.each(t.labels,(function(e,t){p++,(!f||p>1)&&(h+=s.T_SPACE),h+="#".concat(e)})),T||(h+=f?s.T_SPACE:s.T_TAG_END),t.isBlock&&(h+=s.T_LINE_BREAK)}u.toSource&&t.isParagraph&&(h+=d(u.space,r)),u.toSource&&!o.isEmpty(t.metadata)&&(u.metadataMarker&&(h+=d(u.space,r+1)+s.T_METADATA_MARKER+s.T_LINE_BREAK),o.each(t.metadata,(function(t,n){h+=d(u.space,r+1),h+="".concat(n,": "),t instanceof c.default?h+=e(t,u,0,a+h.length):h+=l(t),h+=s.T_LINE_BREAK})),h+=d(u.space,r+1),u.metadataMarker&&(h+=s.T_METADATA_MARKER),h+=s.T_LINE_BREAK),(t.isBlock||t.isWrappingTag&&!o.isEmpty(t.children))&&t.children.forEach((function(t){var n=e(t,u,r+1,a+h.length);h+=n}));var v=t.nextSibling;t.isBlock&&(u.toSource&&(h=o.trimEnd(h,s.T_LINE_BREAK)),h+=s.T_LINE_BREAK,t.isParagraph&&!t.isLastChild&&(h+=s.T_LINE_BREAK)),u.toSource&&t.isWrappingTag&&(t.isBlockTag&&(h+=d(u.space,r)),f?T||(h+=s.T_TAG_END):h+=s.T_TAG_START+s.T_TAG_CLOSING+t.name+s.T_TAG_END,t.isBlockTag&&(h+=s.T_LINE_BREAK,v&&v.isBlock&&(h+=s.T_LINE_BREAK)))}u.toSource?t.end=t.start+h.length:t.textEnd=t.textStart+h.length;return h.replace(/\n\s*\n\s*\n/g,"\n\n")},t.chalk=t.isAnsiSupported=t.isChrome=t.isNode=void 0;var i=a(n(44)),o=r(n(23)),s=n(27),c=a(n(35)),u=/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}\.\d+Z$/;function l(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return o.isDate(e)?(e=e.toISOString(),t?JSON.stringify(e):e.replace(/T00:00:00\.000Z$/,"")):o.isString(e)?(([s.T_TAG_START,s.T_ENTITY_START].includes(e.charAt(0))||s.P_NUMBER_LITERAL_FULL.test(e)||!s.P_STRING_LITERAL_UNQUOTED_TESTER.test(e))&&(e=JSON.stringify(e)),e):o.isBoolean(e)?(e=e.toString(),t&&(e=JSON.stringify(e)),e):o.isNumber(e)&&!o.isNaN(e)&&e!==1/0||e!==-1/0?(t&&(e=e.toString()),JSON.stringify(e)):null}function d(e,t){return t<=0?"":o.repeat(s.T_SPACE,e*t)}var h="undefined"!==typeof e&&"undefined"!==typeof e.release&&"node"===e.release.name;t.isNode=h;var f=!h&&/Chrome/.test(window.navigator.userAgent);t.isChrome=f;var T=h||f;t.isAnsiSupported=T;var E=T?function(e,t){return function(n){return"\x1b[".concat(e,"m").concat(n,"\x1b[").concat(t,"m")}}:function(e,t){return function(e){return e}},p=o.mapValues({reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],inverse:[7,27],hidden:[8,28],strikethrough:[9,29],black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],grey:[90,39],gray:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39],bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgGrey:[90,39],bgGray:[90,39],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]},(function(e){var t=(0,i.default)(e,2),n=t[0],r=t[1];return E(n,r)}));t.chalk=p}).call(this,n(33))},35:function(e,t,n){"use strict";var r=n(17),a=n(19);Object.defineProperty(t,"__esModule",{value:!0}),t.testNode=D,t.find=B,t.findOne=M,t.parseJson=w,t.toJsonMap=F,t.parseJsonMap=G,t.default=t.TreeRules=t.WrappingTags=t.BlockTags=t.BlockNodeTypes=t.P_LABEL_EXPRESSION=t.P_ENTITY_EXPRESSION=t.P_TAG_EXPRESSION=t.P_NODE_EXPRESSION=t.NodeTypes=t.NodeType=void 0;var i,o=r(n(133)),s=r(n(135)),c=r(n(136)),u=r(n(44)),l=r(n(21)),d=r(n(26)),h=r(n(22)),f=a(n(23)),T=n(34),E=n(12),p=n(27);function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){(0,h.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function A(e){if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=function(e,t){if(!e)return;if("string"===typeof e)return m(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return m(e,t)}(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a,i=!0,o=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return i=e.done,e},e:function(e){o=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(o)throw a}}}}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var _,N=n(140);t.NodeType=_,function(e){e.FRAGMENT="fragment",e.ROOT="root",e.PARAGRAPH="paragraph",e.TAG="tag",e.ENTITY="entity",e.TEXT="text",e.COMMENT="comment"}(_||(t.NodeType=_={}));var y=f.values(_);t.NodeTypes=y;var b=/^<([A-Z]+)>$/;t.P_NODE_EXPRESSION=b;var S=/^{([A-Z]+)}$/;t.P_TAG_EXPRESSION=S;var R=/^\[([A-Z]+)\]$/;t.P_ENTITY_EXPRESSION=R;var k=new RegExp("^".concat(p.P_LABEL_START,"(").concat(p.P_VAR_NAME,")$"));t.P_LABEL_EXPRESSION=k;var I=[_.ROOT,_.PARAGRAPH];t.BlockNodeTypes=I;var O=["BLOCK","QUOTE","SECTION","HEADER","FOOTER"];t.BlockTags=O;var L,P=[].concat(O,["INLINE","SENTENCE","NUM","HEADING"]);t.WrappingTags=P,function(e){e.ROOT="<root>",e.PARAGRAPH="<paragraph>",e.BLOCK="{BLOCK}",e.INLINE="{INLINE}",e.ENTITY="[ENTITY]",e.TEXT="(text)",e.FRAGMENT="<fragment>",e.ANY="*"}(L||(L={}));var C=(i={},(0,h.default)(i,L.ROOT,[L.PARAGRAPH,L.BLOCK]),(0,h.default)(i,L.PARAGRAPH,[L.INLINE,L.ENTITY,L.TEXT]),(0,h.default)(i,L.BLOCK,[L.PARAGRAPH,L.BLOCK]),(0,h.default)(i,L.INLINE,[L.INLINE,L.ENTITY,L.TEXT]),(0,h.default)(i,L.ENTITY,[L.TEXT]),(0,h.default)(i,L.TEXT,[]),(0,h.default)(i,L.FRAGMENT,[L.ANY]),i);t.TreeRules=C;var x=function(e){return!0};function D(e,t){if(f.isFunction(e))return e(t);if(f.isString(e))return t.is(e);throw new TypeError("invalid finding pattern")}function B(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:x,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(D(t,e)&&n.push(e),!f.isEmpty(e.children)){var r,a=A(e.children);try{for(a.s();!(r=a.n()).done;){var i=r.value;B(i,t,n)}}catch(o){a.e(o)}finally{a.f()}}return n}function M(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:x;if(D(t,e))return e;if(!f.isEmpty(e.children)){var n,r=A(e.children);try{for(r.s();!(n=r.n()).done;){var a=n.value,i=M(a,t);if(i)return i}}catch(o){r.e(o)}finally{r.f()}}}function w(e){var t=U.create(e.type,e.name,{id:e.id,attributes:G(e.attributes),metadata:G(e.metadata),content:e.content});return e.children&&f.each(e.children,(function(e){t.appendChild(w(e))})),t.normalize(),t}function F(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!f.isEmpty(e))return f.mapValues(e,(function(e){return e instanceof U?e.toJSON(t):e}))}function G(e){if(!f.isEmpty(e))return f.mapValues(e,(function(e){return f.isPlainObject(e)?w(e):(0,T.parseValue)(e)}))}var U=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(0,l.default)(this,e),(0,h.default)(this,"_source",void 0),(0,h.default)(this,"id",""),(0,h.default)(this,"type",void 0),(0,h.default)(this,"name",void 0),(0,h.default)(this,"start",-1),(0,h.default)(this,"end",-1),(0,h.default)(this,"textStart",-1),(0,h.default)(this,"textEnd",-1),(0,h.default)(this,"states",void 0),(0,h.default)(this,"attributes",void 0),(0,h.default)(this,"metadata",void 0),(0,h.default)(this,"labels",void 0),(0,h.default)(this,"parent",void 0),(0,h.default)(this,"content",void 0),(0,h.default)(this,"text",""),(0,h.default)(this,"children",void 0);var a=r.id,i=r.source,o=void 0===i?"":i,s=r.start,c=void 0===s?-1:s,u=r.end,d=void 0===u?-1:u,f=r.states,T=r.attributes,E=void 0===T?{}:T,p=r.metadata,v=void 0===p?{}:p,g=r.labels,A=void 0===g?[]:g,m=r.parent,b=r.content,S=void 0===b?"":b,R=r.text,k=void 0===R?"":R;if(t&&!y.includes(t))throw new TypeError("invalid node type ".concat(t));this.id=a||N(),this.states=f||{},this.type=t,this.name=void 0,this.start=c,this.end=d,this.textStart=-1,this.textEnd=-1,this.parent=m,this._source=void 0,this.content=void 0,this.children=[],this.labels=[],this.attributes={},this.metadata={},this.labels=[],t===_.ROOT&&(this.start=0,this.end=o.length,this._source=o),k&&this.appendText(k),I.includes(t)||[_.ENTITY,_.TAG,_.FRAGMENT].includes(t)?t!==_.PARAGRAPH&&(this.name=n,this.attributes=E,this.metadata=v,this.labels=A):t!==_.TEXT&&t!==_.COMMENT||(this.content=S)}return(0,d.default)(e,null,[{key:"create",value:function(t,n,r){return new e(t,n,r)}},{key:"createParagraph",value:function(t){return new e(_.PARAGRAPH,void 0,t)}},{key:"createRoot",value:function(t){return new e(_.ROOT,void 0,t)}},{key:"createText",value:function(t,n){return new e(_.TEXT,void 0,g(g({},n),{},{content:t}))}},{key:"createTag",value:function(t,n){return new e(_.TAG,t,n)}},{key:"createBlock",value:function(t){return new e(_.TAG,"BLOCK",t)}},{key:"createInlineBlock",value:function(t){return new e(_.TAG,"INLINE",t)}},{key:"fromSource",value:function(e){return(0,E.parse)(e)}},{key:"fromJSON",value:function(e){return w(e)}},{key:"createFragment",value:function(){return e.create(_.FRAGMENT)}},{key:"validNode",value:function(t){if(!(t instanceof e))throw new TypeError("invalid node")}},{key:"validParent",value:function(e){if(!f.isArray(e.children))throw new Error("node is not a valid parent")}},{key:"validChild",value:function(e){if(!e.parent)throw new Error("node is not a valid child")}},{key:"validTreeRule",value:function(e,t){var n=e.commonDescriptor,r=t.commonDescriptor,a=C[n];if(a[0]!==L.ANY||!a.includes(r))throw new Error("can not add ".concat(r," as child of ").concat(n))}},{key:"findCommonAncestor",value:function(e,t){for(var n,r=e.path,a=t.path;r.length>0&&a.length>0&&f.first(r)===f.first(a);)n=r.shift(),a.shift();if(n)return{ancestor:n,paths:[r,a]}}},{key:"createBlockByRange",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"INLINE",r=arguments.length>2?arguments[2]:void 0,a=t.startNode,i=t.startOffset,o=t.endNode,s=t.endOffset;if(!f.isNumber(i)||!f.isNumber(s))throw new TypeError("range offset must be number");if(!a.isText||!o.isText)throw new TypeError("range node must be text");if(!a.content||!o.content)throw new Error("invalid text node");if(a===o){if(i<0||i>a.content.length||s<0||s>a.content.length)throw new RangeError("sub text out of range");if(!a.parent)throw new Error("can not create block on isolated text node");var c=a.parent,l=e.createFragment(),d=e.createTag(n,g(g({},r),{},{text:a.content.substring(i,s)}));return i>0&&l.appendText(a.content.substring(0,i)),l.appendChild(d),s<a.content.length&&l.appendText(a.content.substring(s)),c.insertBefore(l,a),c.removeChild(a),d}var h=e.findCommonAncestor(a,o);if(h&&h.ancestor){var T=h.ancestor,E=h.paths,p=E[0][0],v=E[1][0],A=T.children.indexOf(p),m=T.children.indexOf(v),_=[A,m].sort(),N=(0,u.default)(_,2),y=N[0],b=N[1];if(A!==y){var S=[v,p];p=S[0],v=S[1]}var R=T.extractNodes(y,b+1),k=a.isSidedDescendantOf(p,"start")&&0===i,I=o.isSidedDescendantOf(v,"end")&&s===o.content.length,O=T.findOne((function(e){return e.isBlock})),L=O&&O!==T;if(L||1!==E[0].length&&!k&&1!==E[1].length&&!I){var P=e.createBlock(r);return T.insertAt(P,y),P.appendChild(R),P}var C=e.createFragment(),x=a.content;i>0&&(p.content=x.substring(i),C.appendText(x.substring(0,i)));var D=e.createTag(n,r);D.appendChild(R),C.appendChild(D);var B=o.content;return s<o.content.length&&(v.content=B.substring(0,s),C.appendText(B.substring(s))),T.insertAt(C,y),D}}}]),(0,d.default)(e,[{key:"getRootNode",value:function(){for(var e=this;e.parent;)e=e.parent;if(e!==this)return e}},{key:"is",value:function(e){if(!f.isString(e))throw new TypeError("invalid node descriptor");var t=null;return(t=b.exec(e))?this.type===t[1]:(t=S.exec(e))?this.type===_.TAG&&this.name===t[1]:(t=R.exec(e))?this.type===_.ENTITY&&this.name===t[1]:!!(t=k.exec(e))&&(this.type===_.TAG&&this.labels.includes(t[1]))}},{key:"contains",value:function(t){for(e.validNode(t);t;){if(t===this)return!0;if(!t.parent)return!1;t=t.parent}return!1}},{key:"hasChild",value:function(){return this.children.length>0}},{key:"isOnlyDescendantOf",value:function(e){for(var t=e;t;){if(1!==t.children.length)return!1;if((t=t.children[0])===this)return!0}return!1}},{key:"isSidedDescendantOf",value:function(e,t){for(var n=e;n;){if(0===n.children.length)return!1;if((n="start"===t?n.firstChild:n.lastChild)===this)return!0}return!1}},{key:"createChild",value:function(t,n,r){var a=new e(t,n,r);return this.appendChild(a),a}},{key:"prependChild",value:function(e){return this.insertAt(e,0)}},{key:"appendChild",value:function(e){return this.insertAt(e,1/0)}},{key:"appendText",value:function(t,n){if(this.type===_.TEXT)return this.content=this.content||"",this.content+=t,this;if(this.lastChild&&this.lastChild.isText)this.lastChild.content+=t;else{var r=e.create(_.TEXT,void 0,g(g({},n),{},{content:t}));this.appendChild(r)}}},{key:"prependText",value:function(t,n){if(this.type===_.TEXT)return this.content="".concat(t).concat(this.content||""),this;var r=e.create(_.TEXT,void 0,g(g({},n),{},{content:t}));this.prependChild(r)}},{key:"remove",value:function(){this.parent&&this.parent.removeChild(this)}},{key:"removeChild",value:function(e){return f.pull(this.children,e),e.parent=void 0,e}},{key:"removeChildAt",value:function(e){var t=this.children[e];return f.pullAt(this.children,e),t.parent=void 0,t}},{key:"insertAt",value:function(e,t){var n,r=this;e.type===_.FRAGMENT?((n=this.children).splice.apply(n,[t,0].concat((0,c.default)(e.children))),e.children.forEach((function(e){e.parent=r})),e.children=[]):(this.children.splice(t,0,e),e.parent&&e.parent.removeChild(e),e.parent=this);return e}},{key:"insertBefore",value:function(t,n){e.validParent(this);var r=this.children.indexOf(n);return this.insertAt(t,r),t}},{key:"insertAfter",value:function(t,n){e.validParent(this);var r=this.children.indexOf(n);return this.insertAt(t,r+1),t}},{key:"replaceChild",value:function(t,n){if(e.validParent(this),t.contains(this))throw new TypeError("the new child contains the parent");if(n.parent!==this)throw new TypeError("the old child is not a child of this node");return this.insertBefore(t,n),this.removeChild(n),n}},{key:"replaceWith",value:function(t){if(e.validChild(this),!this.parent)throw new Error("can not replace isolated node");return this.parent.replaceChild(t,this),t}},{key:"setAttribute",value:function(e,t){f.set(this.attributes,e,t)}},{key:"setAttributes",value:function(e){f.merge(this.attributes,e)}},{key:"getAttribute",value:function(e){return f.get(this.attributes,e)}},{key:"hasAttribute",value:function(e){return f.has(this.attributes,e)}},{key:"removeAttribute",value:function(e){f.unset(this.attributes,e)}},{key:"clearAttributes",value:function(){this.attributes={}}},{key:"setMetadata",value:function(e,t){f.isString(e)?f.set(this.metadata,e,t):f.merge(this.metadata,e)}},{key:"getMetadata",value:function(e){return f.get(this.metadata,e)}},{key:"removeMetadata",value:function(e){f.unset(this.metadata,e)}},{key:"clearMetadata",value:function(){this.metadata={}}},{key:"hasMetadata",value:function(e){return f.has(this.metadata,e)}},{key:"addLabel",value:function(e){if(!f.isString(e))throw new TypeError("label must be string");this.labels.includes(e)||this.labels.push(e)}},{key:"hasLabel",value:function(e){return this.labels.includes(e)}},{key:"removeLabel",value:function(e){f.pull(this.labels,e)}},{key:"clearLabels",value:function(){this.labels=[]}},{key:"normalize",value:function(){var e=this.toSource();this.isRoot&&(this._source=e),this.toString()}},{key:"getNodeById",value:function(e){return M(this,(function(t){return t.id===e}))}},{key:"findBy",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=t.type,a=t.name,i=t.text,o=t.source,s=t.label,c=n?M:B;return c(this,(function(t){var n=!0;if(r&&(n=n&&r===t.type),a&&(n=n&&a===t.name),i&&t.type===_.TEXT&&t.content)if(f.isRegExp(i))n=n&&!!i.match(t.content);else{if(!f.isString(i))throw new TypeError("text filter should be RegExp or string");n=n&&t.content.includes(i)}if(o&&t._source)if(f.isRegExp(o))n=n&&!!o.match(t._source);else{if(!f.isString(o))throw new TypeError("source filter should be RegExp or string");n=n&&t._source.includes(o)}return s&&(n=f.isArray(s)?n&&f.intersection(e.labels,s).length>0:n&&e.labels.includes(s)),n}))}},{key:"findOneBy",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.findBy(e,!0)}},{key:"findTextByRange",value:function(e,t){if(void 0!==this.textStart&&void 0!==this.textEnd&&this.textStart<=e&&this.textEnd>=t){if(this.type===_.TEXT)return this;if(this.hasChild())for(var n=0;n<this.children.length;n++){var r=this.children[n].findTextByRange(e,t);if(r)return r}}}},{key:"find",value:function(e){return B(this,e)}},{key:"findOne",value:function(e){return M(this,e)}},{key:"querySelectorAll",value:function(e){return B(this,e)}},{key:"querySelector",value:function(e){return M(this,e)}},{key:"splitText",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"INLINE",r=arguments.length>2?arguments[2]:void 0,a=t instanceof RegExp?t:new RegExp("[".concat(f.escapeRegExp(t),"]"),"g"),i=this.find((function(e){return e.isParagraph||e.isInlineBlock}));i.forEach((function(t){var i=t.toString(),o=0,s=0;for(a.lastIndex=0;a.exec(i);){t.toString(),o=a.lastIndex;var c=t.children.filter((function(e){return e.isText})),u=c.find((function(e){return e.textStart<=s&&e.textEnd>s})),l=c.find((function(e){return e.textStart<o&&e.textEnd>=o}));if(!u||!l)break;var d={startNode:u,startOffset:s-u.textStart,endNode:l,endOffset:o-l.textStart};e.createBlockByRange(d,n,r),s=o}}))}},{key:"mergeText",value:function(){var t=this,n=[],r=this.children.length;this.children.forEach((function(a,i){if(a.isText&&n.push(a),!a.isText||i===r-1){if(n.length>1){var o,s=n.map((function(e){return e.content})).join(""),c=e.createText(s);for(t.insertBefore(c,n[0]);o=n.shift();)t.removeChild(o)}n=[]}}))}},{key:"extractNodes",value:function(t,n){var r=e.createFragment();if(t<0||t>=this.children.length||n<0||n>this.children.length)throw new RangeError("invalid range of children");return this.children.slice(t,n).forEach((function(e){r.appendChild(e)})),r}},{key:"flatten",value:function(){if(this.parent){var e=this.parent,t=this.extractNodes(0,this.children.length);return e.insertBefore(t,this),e.removeChild(this),e.mergeText(),e}}},{key:"createEntities",value:function(t){var n=[];if(this.type!==_.TEXT&&console.warn("createEntities() should exec only on text node"),!this.content||f.isEmpty(t))return n;var r=this.content;t=f.sortBy(t,["start"]);var a=e.createFragment(),i=0;return t.forEach((function(e){if(!(e.start>=e.end||e.start<i)){e.start>i&&a.appendText(r.substring(i,e.start));var t=a.createChild(_.ENTITY,e.type,{attributes:e.data});t.appendText(r.substring(e.start,e.end)),n.push(t),i=e.end}})),i<r.length&&a.appendText(r.substr(i)),this.replaceWith(a),n}},{key:"createEntitiesFromText",value:function(e){var t=this;this.toString();var n=new Map;f.each(e,(function(e){var r=t.findTextByRange(e.start,e.end);void 0!==r&&(n.has(r)?n.get(r).push(e):n.set(r,[e]))})),n.forEach((function(e,t){t.createEntities(e.map((function(e){return g(g({},e),{},{start:e.start-(t.textStart||0),end:e.end-(t.textStart||0)})})))}))}},{key:"extractEntities",value:function(){var e=(0,s.default)(o.default.mark((function e(t){var n,r,a;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.find((function(e){return e.type===_.TEXT&&!!e.parent&&e.parent.type!==_.ENTITY&&!!e.content})),r=n.map((function(e){return e.content})),!f.isFunction(t)){e.next=8;break}return e.next=5,Promise.all(r.map((function(e){return t(e)})));case 5:a=e.sent,e.next=21;break;case 8:if(!f.isFunction(t.extractArray)){e.next=14;break}return e.next=11,t.extractArray(r);case 11:a=e.sent,e.next=21;break;case 14:if(!f.isFunction(t.extract)){e.next=20;break}return e.next=17,Promise.all(r.map((function(e){return t.extract(e)})));case 17:a=e.sent,e.next=21;break;case 20:throw new TypeError("invalid extractor");case 21:n.forEach((function(e,t){var n=a[t];if(!f.isArray(n))throw new Error("invalid extraction result");e.createEntities(n)}));case 22:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"removeEntity",value:function(){if(this.type!==_.ENTITY||!this.firstChild||this.firstChild.type!==_.TEXT)throw new Error("invalid entity");if(!this.parent)throw new Error("can not remove isolated entity");var t,n=this.firstChild.content||"",r=this.parent,a=this.previousSibling,i=this.nextSibling;return a&&a.isText&&(t=a),t?t.appendText(n):(t=e.create(_.TEXT,void 0,{content:n}),r.insertBefore(t,this)),i&&i.isText&&(t.appendText(i.content||""),r.removeChild(i)),r.removeChild(this),t}},{key:"toString",value:function(e){return(0,T.stringify)(this,e)}},{key:"toSource",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,T.stringify)(this,g(g({},e),{},{toSource:!0}))}},{key:"toJSON",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.position,n=void 0!==t&&t,r=e.textPosition,a=void 0!==r&&r,i=e.internalId,o=void 0!==i&&i;return f.omitBy({id:o?this.id:void 0,type:this.type,name:this.name,content:this.content,attributes:F(this.attributes),metadata:F(this.metadata,e),labels:this.labels.length?this.labels:void 0,position:n?{start:this.start,end:this.end}:void 0,textPosition:a?{start:this.textStart,end:this.textEnd}:void 0,children:f.isEmpty(this.children)?void 0:this.children.map((function(t){return t.toJSON(e)}))},f.isUndefined)}},{key:"descriptor",get:function(){return this.isEntity||this.isTag||this.isText?"".concat(this.openDescriptorStart).concat(this.openDescriptorEnd):this.type}},{key:"commonDescriptor",get:function(){return this.isRoot?L.ROOT:this.isBlockTag?L.BLOCK:this.isParagraph?L.PARAGRAPH:this.isInlineBlock?L.INLINE:this.isEntity?L.ENTITY:this.isText?L.TEXT:L.ANY}},{key:"openDescriptorStart",get:function(){switch(this.type){case _.ENTITY:return"[".concat(this.name);case _.TAG:return"{".concat(this.name);case _.TEXT:return"(text";default:return"<".concat(this.type)}}},{key:"openDescriptorEnd",get:function(){switch(this.type){case _.ENTITY:return"]";case _.TAG:return"}";case _.TEXT:return"";default:return">"}}},{key:"closingDescriptor",get:function(){switch(this.type){case _.ENTITY:return"[/".concat(this.name,"]");case _.TAG:return"{/".concat(this.name,"}");case _.TEXT:return")";default:return"</".concat(this.type,">")}}},{key:"selector",get:function(){var e=this.descriptor;return this.parent&&(e="".concat(this.descriptor,"[").concat(this.childIndex,"]")),e}},{key:"rootSelector",get:function(){return this.parent?this.path.map((function(e){return e.selector})).join(" > "):this.selector}},{key:"isRoot",get:function(){return this.type===_.ROOT}},{key:"isParagraph",get:function(){return this.type===_.PARAGRAPH}},{key:"isTag",get:function(){return this.type===_.TAG}},{key:"isEntity",get:function(){return this.type===_.ENTITY}},{key:"isText",get:function(){return this.type===_.TEXT}},{key:"isPlainText",get:function(){return this.type===_.TEXT&&(!this.parent||this.parent.type!==_.ENTITY)}},{key:"isWrappingTag",get:function(){return this.isTag&&P.includes(this.name)}},{key:"isBlockTag",get:function(){return this.isTag&&O.includes(this.name)}},{key:"isSimpleTag",get:function(){return this.isTag&&["BLOCK","INLINE"].includes(this.name)}},{key:"isBlock",get:function(){var e=this.type;this.name;return I.includes(e)||this.isBlockTag}},{key:"isInlineBlock",get:function(){return this.isTag&&!this.isBlockTag}},{key:"parentNode",get:function(){return this.parent}},{key:"childNodes",get:function(){return this.children}},{key:"source",get:function(){if(this.type===_.ROOT)return this._source||"";var e=this.getRootNode();if(!e)throw new Error("ROOT node not found");return e.source.substring(this.start||0,this.end)}},{key:"innerText",get:function(){if(this.type===_.TEXT)return this.content;if(this.type===_.ENTITY){var e=this.children[0];return e?e.content:""}return this.toString()}},{key:"isFirstChild",get:function(){var e=this.parent;return!!e&&f.first(e.children)===this}},{key:"isLastChild",get:function(){var e=this.parent;return!!e&&f.last(e.children)===this}},{key:"siblings",get:function(){var e=this.parent;return e?e.children:[this]}},{key:"childIndex",get:function(){return this.siblings.indexOf(this)}},{key:"nextSibling",get:function(){if(this.parent){var e=this.childIndex;return this.siblings[e+1]||void 0}}},{key:"previousSibling",get:function(){if(this.parent){var e=this.childIndex;return this.siblings[e-1]||void 0}}},{key:"path",get:function(){for(var e=[],t=this;t;)e.unshift(t),t=t.parent;return e}},{key:"firstChild",get:function(){return e.validParent(this),f.first(this.children)}},{key:"lastChild",get:function(){return e.validParent(this),f.last(this.children)}},{key:"isOnlyChild",get:function(){return!!this.parent&&1===this.parent.children.length}}]),e}();(0,h.default)(U,"Types",_);var j=U;t.default=j},47:function(e,t,n){"use strict";var r=n(19),a=n(17);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"TextLine",{enumerable:!0,get:function(){return l.default}}),t.default=void 0;var i=a(n(21)),o=a(n(26)),s=a(n(22)),c=r(n(23)),u=n(34),l=a(n(141)),d=n(27);function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){(0,s.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var T=/\r?\n/g,E=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;(0,i.default)(this,e),(0,s.default)(this,"pos",void 0),(0,s.default)(this,"text",void 0),(0,s.default)(this,"tabSize",void 0),(0,s.default)(this,"lines",void 0),(0,s.default)(this,"lineOffsetIndexes",[]),(0,s.default)(this,"markers",void 0),(0,s.default)(this,"cursorStack",void 0),(0,s.default)(this,"lastMatch",""),this.pos=0,this.text=t,this.tabSize=n,this.lines=[],this.markers=[],this.cursorStack=[],this.init()}return(0,o.default)(e,[{key:"init",value:function(){var e,t=[],n=0,r=1;T.lastIndex=0;do{if(e=T.exec(this.text)){var a=e.index-n,i=this.text.substr(n,a);t.push(new l.default(t,i,r,n)),n+=a+e[0].length}else{if(this.text.length-n>0){var o=this.text.substr(n);t.push(new l.default(t,o,r,n))}}r++}while(e);this.lines=t,this.lineOffsetIndexes=c.map(t,"offset")}},{key:"getPosition",value:function(e){c.isUndefined(e)&&(e=this.pos);var t=c.sortedLastIndex(this.lineOffsetIndexes,e)-1,n=this.lines[t];if(!n)throw new Error("cursor position is invalid");return{ln:n.ln,col:e-n.offset+1,pos:e,line:n}}},{key:"sol",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.getPosition(),n=t.col,r=t.line;if(n-1===0)return!0;if(!e)return!1;var a=c.trimStart(r.text),i=a.length;return n-1<=r.length-i}},{key:"eol",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.getPosition(),n=t.col,r=t.line;if(n-1===r.length)return!0;if(!e)return!1;var a=c.trimEnd(r.text),i=a.length;return n-1>=i}},{key:"eof",value:function(e){return c.isUndefined(e)&&(e=this.pos),e>=this.text.length}},{key:"peek",value:function(){return this.text.charAt(this.pos)}},{key:"next",value:function(){return this.pos<this.text.length?this.text.charAt(this.pos++):""}},{key:"eat",value:function(e){var t,n=this.text.charAt(this.pos)||"";return c.isUndefined(n)?t=!1:c.isString(e)?t=n===e:c.isRegExp(e)?(e.lastIndex=0,t=e.test(n)):c.isFunction(e)&&(t=e(n)),t?(this.lastMatch=n,++this.pos,n):""}},{key:"eatWhile",value:function(e){this.pos;var t,n="";do{(t=this.eat(e))&&(n+=t)}while(t&&!this.eof());return n}},{key:"eatUntil",value:function(e){this.pos;var t,n="";do{(t=this.eat(e))?this.pos--:(n+=this.peek(),this.pos++)}while(!t&&!this.eof());return n}},{key:"eatSpaces",value:function(){for(var e=this.pos;/[\s\u00a0]/.test(this.text.charAt(this.pos));)this.pos++;return this.pos>e}},{key:"search",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.caseInsensitive,r=-1,a="";if("string"===typeof e&&(n?e=new RegExp(c.escapeRegExp(e),"i"):-1!==(r=this.text.indexOf(e,this.pos))&&(a=e)),e instanceof RegExp){e.lastIndex=this.pos;var i=e.exec(this.text);i?(r=i.index,a=i[0]):r=-1}var o=a;return{index:r,length:o.length,matched:a}}},{key:"read",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=this.text.length-this.pos;if(t<=0)return"";t<e&&(e=t);var n=this.text.substr(this.pos,e);return this.pos+=e,n}},{key:"readTo",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.toEOL,r=void 0!==n&&n,a=t.toEOF,i=void 0!==a&&a,o=t.consume,s=void 0!==o&&o,c=t.skipMatched,u=void 0!==c&&c,l=this.pos,d=this.search(e),h=d.index,f=d.length,T="",E=-1;if(r){var p=this.getPosition(),v=p.line;E=v.offset+v.length}else i&&(E=this.text.length);return-1!==h&&(r||i?h<E?E=h:f=0:E=h),-1!==E&&(this.pos=E,s?(E+=f,this.pos=E):u&&(this.pos+=f),T=this.text.substring(l,E)),this.lastMatch=T,T}},{key:"readOver",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.readTo(e,f(f({},t),{},{consume:!0}))}},{key:"readLine",value:function(){var e=this.getPosition().line,t=e.next();if(this.eof())return"";if(t)return this.pos=t.offset,e.text;var n=e.offset+e.length-this.pos;return this.read(n)}},{key:"skipToEnd",value:function(){this.pos=this.text.length}},{key:"skipTo",value:function(e,t){var n=this.pos;return this.readTo(e,t),n!==this.pos}},{key:"skipOver",value:function(e,t){var n=this.pos;return this.readTo(e,f(f({},t),{},{skipMatched:!0})),n!==this.pos}},{key:"backUp",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.pos-=e}},{key:"match",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.consume,r=void 0===n||n,a=t.caseInsensitive,i=this.search(e,{caseInsensitive:a}),o=i.index,s=i.length,c=i.matched;return o!==this.pos?"":(r&&(this.pos+=s),this.lastMatch=c,c)}},{key:"resetMarker",value:function(){this.markers=[]}},{key:"pushMarker",value:function(e,t){c.isUndefined(t)&&(t=this.pos),this.markers.push({data:e,start:t})}},{key:"setMarkerData",value:function(e){var t=c.last(this.markers);t&&c.extend(t.data,e)}},{key:"getMarkerData",value:function(){var e=c.last(this.markers);return e?e.data:{}}},{key:"popMarker",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(!c.isPlainObject(e))throw new TypeError("invalid data parameter");c.isUndefined(t)&&(t=this.pos);var n=this.markers.pop();if(n){var r=n.data,a=n.start;return{text:this.text.substring(n.start||0,t),position:{start:a,end:t},data:f(f({},r),e)}}}},{key:"findLine",value:function(e){return c.find(this.lines,(function(t){return c.trim(t.text)===e}))}},{key:"pushCursor",value:function(e){c.isUndefined(e)&&(e=this.pos),this.cursorStack.push(this.pos),this.pos=e}},{key:"popCursor",value:function(){if(0===this.cursorStack.length)throw new Error("out of cursor stack!");return this.pos=this.cursorStack.pop(),this.pos}},{key:"debugLine",value:function(e,t,n){var r=e.ln,a=e.text;c.isUndefined(t)&&(t=(r+"").length),n&&(a=a.substring(0,n-1)+u.chalk.bgBlue(a.charAt(n-1))+a.substring(n)),console.log("".concat(u.chalk.blueBright("".concat(n?">":" "," ").concat(c.padStart(r+"",t)," |"))," ").concat(a))}},{key:"debugCursor",value:function(e,t,n){var r=e.substr(0,t-1).replace(d.P_FULL_WIDTH_CHARACTER,"XX").length;console.log(u.chalk.blueBright("  ".concat(c.repeat(" ",n)," | ").concat(c.repeat(" ",r),"^ ").concat(t)))}},{key:"debugState",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=this.getPosition(),r=n.ln,a=n.col,i=r-1,o=c.slice(this.lines,c.max([i-t,0]),c.min([i+t+1,this.lines.length])),s=c.max(o.map((function(e){return(e.ln+"").length})));o.forEach((function(t){var n=t.ln===r;e.debugLine(t,s,n?a:0),n&&e.debugCursor(t.text,a,s)})),console.log()}}]),e}();t.default=E},48:function(e,t,n){"use strict";var r=n(17);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(21)),i=r(n(49)),o=r(n(142)),s=r(n(143)),c=r(n(50)),u=r(n(144)),l=r(n(22));function d(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,c.default)(e);if(t){var a=(0,c.default)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,s.default)(this,n)}}var h=function(e){(0,o.default)(n,e);var t=d(n);function n(e,r,o,s){var c;return(0,a.default)(this,n),c=t.call(this,e),(0,l.default)((0,i.default)(c),"message",void 0),(0,l.default)((0,i.default)(c),"text",void 0),(0,l.default)((0,i.default)(c),"from",void 0),(0,l.default)((0,i.default)(c),"to",void 0),c.message=e,c.text=r,c.from=o,c.to=s,c}return n}((0,u.default)(Error));t.default=h},62:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return N}));var r=n(3),a=n(4),i=n(29),o=n(6),s=n(5),c=n(10),u=n.n(c),l=n(0),d=n.n(l),h=n(12),f=n(25),T=n(31),E=n(69),p=n(70),v=(n(181),n(182),n(183),n(67)),g=n(68),A=h.Node,m=h.NodeType,_=function(t){var n=A.create(m.ROOT);try{n=h.parse(t,{needMetadataMarker:!0}),e.node=n,console.info('Root node exported as global variable "node"',n)}catch(s){if(s instanceof h.ParseError){var r="\n        [ParseError]{ERROR.TYPE}: {#MESSAGE ".concat(s.message,"}\n\n        #SOURCE\n        content\n\n        from {#POS.START ").concat(s.from.ln,":").concat(s.from.col,"} to {#POS.END ").concat(s.to.ln,":").concat(s.to.col,"}\n      "),a=(n=h.parse(r)).querySelector("#SOURCE"),i=s.from.line.text;if(!a)return n;var o=a.findOneBy({type:m.TEXT});if(!o)return n;o.content="".concat(i," "),o.createEntitiesFromText([{type:"ERROR",start:s.from.col-1,end:s.to.col-1}])}else n=h.parse("Error: [".concat(s.message,"]{MESSAGE}")),console.error(s)}return n},N=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).preventSourceChange=void 0,a.state={source:e.defaultSource,root:_(e.defaultSource),sourcePaneHeight:-1},a.onResize=u.a.throttle(a.onResize.bind(Object(i.a)(a)),500),a.preventSourceChange=!1,a}return Object(a.a)(n,[{key:"componentDidMount",value:function(){window.addEventListener("resize",this.onResize,{passive:!0}),this.onResize()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.onResize)}},{key:"componentWillReceiveProps",value:function(e){}},{key:"componentWillUpdate",value:function(e,t){t.selectedNode!==this.state.selectedNode&&console.log("selected node:",t.selectedNode),t.root!==this.state.root&&console.log("new node:",t.root)}},{key:"onResize",value:function(){var e=window.innerHeight-60;this.setState({sourcePaneHeight:e})}},{key:"handleSourceChange",value:function(e){this.preventSourceChange||this.setState({root:_(e),selectedNode:void 0})}},{key:"handleNodeChange",value:function(e,t){var n=this;e&&(this.preventSourceChange=!0,this.setState({source:e.toSource(),selectedNode:t},(function(){n.preventSourceChange=!1})))}},{key:"render",value:function(){var e=this,t=this.state.source,n=this.state,r=n.root,a=n.sourcePaneHeight,i=n.selectedNode,o=n.hoveredNode;return d.a.createElement("div",{className:"zaml-editor"},d.a.createElement("header",null,d.a.createElement("a",{className:"project-link",href:"https://github.com/nexushubs/zaml-lang/tree/master/packages/zaml-editor"},d.a.createElement(v.a,{className:"logo"})," Editor"),d.a.createElement("a",{className:"github-link",href:"https://github.com/nexushubs/zaml-lang"},"View on Github")),d.a.createElement("section",{className:"editor-panes"},d.a.createElement(f.a,{split:"vertical",defaultSize:"33.33%",minSize:200},d.a.createElement(T.a,{title:"Source"},d.a.createElement(E.a,{value:t,height:a-40,onChange:function(t){return e.handleSourceChange(t)}})),d.a.createElement(f.a,{split:"vertical",defaultSize:"50%"},d.a.createElement(T.a,{title:"Visual"},d.a.createElement(p.a,{root:r,selectedNode:o||i,onSelect:function(t){return e.setState({selectedNode:t})},onChange:function(t,n){return e.handleNodeChange(t,n)}})),d.a.createElement(T.a,{title:"AST"},d.a.createElement(g.a,{root:r,selectedNode:i,onSelect:function(t){return e.setState({selectedNode:t})},onHover:function(t){return e.setState({hoveredNode:t})},onChange:function(t){return e.handleNodeChange(r,t)}}))))))}}]),n}(d.a.Component);N.defaultProps={defaultSource:"",className:"",onChange:function(){}}}).call(this,n(15))},67:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r=n(0),a=n.n(r);function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function o(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var s=a.a.createElement("title",null,"ZAML-logo"),c=a.a.createElement("path",{fill:"#fff",d:"M132.27,162.53,182.46,35.88h10.68L242.7,162.53h-9.83L216.64,122H158.11l-16.23,40.58Zm81.16-48.7L187.38,45.7l-26.7,68.13Z"}),u=a.a.createElement("path",{fill:"#fff",d:"M404.81,35.88h8.54V154.42h68.14v8.12H404.81Z"}),l=a.a.createElement("circle",{fill:"#fff",cx:91,cy:44.5,r:4}),d=a.a.createElement("path",{fill:"#fff",d:"M115.47,35.5h-5a54.66,54.66,0,0,0-1-10.36c-1.07-4.28-6.09-10.34-6.3-10.6l-1.5-1.8-5.3,11.14-1-2c-2.21-4.43-10.89-7.42-11.87-7.75l-2.19-.73L83.4,35.5H36v0c-7.77.27-14,11.14-14,19s6.23,9.71,14,10v0H89.75L22.31,154.42v8.12h92.32l4.23.11S121,159.5,121,153.5s-3.4-15-12.5-15c-6.78,0-14.5,5-23.5,7S60,147.3,54.63,147c5.75-5.44,12.61-12,19.66-19H92.56l.42-.37c1-.87,24.31-21.36,30.37-34.5s7.1-54.83,7.14-56.59l0-1.59ZM49.84,147.41c-3.23-.24-7.53-.76-9.84-1.91a10.79,10.79,0,0,1-4.46-3.93l9.58-12.91,22.46,1.73C61.06,136.77,54.88,142.66,49.84,147.41ZM95,63.5s-1.76-7.52-1-10c1-3.4,7.94-10.83,12-15h8.53c0,.53,0,1.17,0,1.9l-.1.41C109,43.74,97.93,51.53,97,53.5S96.52,61,99.31,64.66c-1.35-.1-2.72-.27-4-.44l-.09-.06A4.8,4.8,0,0,0,95,63.5ZM109,76a79.27,79.27,0,0,1-9,2.49c-5,1-13,0-13,0l3-8s11,0,15-1a22.68,22.68,0,0,0,6.55-3.2C110.86,69.46,110,72.72,109,76ZM100,55.5c1.27-4.12,11.13-10.58,14.13-12.46l.28,1.1c-.09,2-.25,4.37-.5,7-4.19,1.21-7.81,2.49-8.57,3.26-1.53,1.54-2.77,6.17-1.83,10.35a22.78,22.78,0,0,1-2.67,0C100.42,62.8,99.38,57.51,100,55.5Zm12.46,6.2a52.93,52.93,0,0,1-7,2.68c.39-2.42,1.09-5.83,2-7.11s3.41-2.62,6.16-3.69C113.36,56.12,113,58.85,112.46,61.7ZM93.9,103.48l-2.23,2.41c-2.73.33-7.34.94-10.66,1.61-5,1-14-1-14-1l5-7s10,2,15,2a46.82,46.82,0,0,0,9.79-1.43Q95.42,101.83,93.9,103.48Zm-18,18.63c-2.09.61-8.46,2.39-10.95,2.39-3,0-11-2-11-2l6-7s10,1,14,1c2.58,0,7.21-1.62,10.2-2.77C81.48,116.53,78.72,119.34,75.95,122.11Zm20.16-16.6.2-.23v0l13.94,1c-1.5,1.69-3,3.36-4.58,5L92.86,109C94,107.83,95,106.67,96.1,105.52Zm3.83-4.64c.83-1.11,1.63-2.24,2.39-3.39l15.58-.87a80.42,80.42,0,0,1-5,6.6Zm2.14-8.73c-2.72.92-7.36,2.36-10.07,2.36-4,0-14-2-14-2l4-7s12,1,17,0a29.42,29.42,0,0,0,7.62-2.87A78.48,78.48,0,0,1,102.07,92.14Zm8.3-10.92,13.49-1.45c-.29,1.68-.6,3.27-.94,4.76L109,84.78Q109.71,83,110.37,81.23Zm1.71-5q.37-1.21.71-2.4l12.31-2.66c-.18,1.52-.38,3-.59,4.49Zm13.51-9.45-11.44,1.84q.49-2.1.88-4.1l11-2.33C125.89,63.65,125.75,65.19,125.59,66.73Zm.8-9-10.45,1.6c.27-1.72.49-3.39.68-5L126.78,52C126.67,53.82,126.54,55.73,126.39,57.69Zm.64-10-9.91,1.46c.11-1.41.2-2.73.26-3.94l9.86-1.83C127.19,44.71,127.12,46.16,127,47.72Zm.35-7.55-9.85,1.1c0-.86,0-1.62,0-2.27l.54-2.71,9.36,1.76C127.44,38.62,127.41,39.35,127.38,40.17ZM103,22.5c1.6,2.16,2.45,2.8,3,5a38,38,0,0,1,1.48,7.5L95,34.5Zm-16-1c2.86,1.2,5.92,2.84,7,5l.57,1.12L91.15,34.8,86.36,35Zm-14.15,40c2.93-3.55,7-9.51,6.15-11s-9.88-8.63-14.57-12h5c3.95,2.86,15,11.13,16.6,15,.66,1.62-2.73,5.58-5,8Zm-8.69,0c2.51-3.93,6.93-11.56,5.59-14.49-1.2-2.61-7.5-6.27-11.75-8.51h4.38C65.77,41,74.46,47.72,76,51.5c.7,1.73-3,7.1-5.09,10ZM58.29,44.86c-1.17-2.24-4.34-4.68-6.84-6.36h5c3.41,2.86,9.22,8,9.44,10s-1.62,9.22-2.66,13H53.83C55.92,57,59.82,47.78,58.29,44.86ZM49.73,38.5c1.57,2.07,3.73,5.17,4,6.9.34,2.07-.46,11.5-.89,16.1H44.16c2.25-4,6.89-12.79,5.84-16a25.41,25.41,0,0,0-4.36-7ZM38,38.5h6.64c1.16,2.25,2.5,5.21,2.5,6.8,0,2.17-2.5,11.94-3.61,16.2H38a33,33,0,0,0,2-11A43.6,43.6,0,0,0,38,38.5Zm45.1,23c3.13-3,7.22-8,6.58-9.11-1.23-2.1-11.76-9.83-18.09-13.89h33.72C100.81,42.24,93.63,48.44,92.43,51c-1.05,2.24-1.78,8.57,1.36,12.27L91,61.5ZM91.43,125H77.3c3.76-3.75,7.52-7.58,11.15-11.36l13.63,1.29C97.09,119.91,92.76,123.82,91.43,125Zm28.4-31.54-14.58-.89q.75-1.37,1.44-2.76l15.15-1.15a26.58,26.58,0,0,1-1.19,3.21C120.4,92.39,120.12,92.92,119.83,93.46Z"}),h=a.a.createElement("rect",{fill:"#fff",x:255,y:36.5,width:14.69,height:15,rx:1.5,ry:1.5}),f=a.a.createElement("rect",{fill:"#fff",x:258.07,y:55.56,width:8.54,height:106.97}),T=a.a.createElement("polygon",{fill:"#fff",points:"364.01 35.88 317.88 151.85 274.33 42.9 274.33 64.8 313.82 162.53 321.72 162.53 368.93 45.7 368.93 162.53 377.47 162.53 377.47 35.88 364.01 35.88"}),E=function(e){var t=e.svgRef,n=e.title,r=o(e,["svgRef","title"]);return a.a.createElement("svg",i({id:"Layer_1","data-name":"Layer 1",viewBox:"0 0 500 180",ref:t},r),void 0===n?s:n?a.a.createElement("title",null,n):null,c,u,l,d,h,f,T)},p=a.a.forwardRef((function(e,t){return a.a.createElement(E,i({svgRef:t},e))}));n.p},68:function(e,t,n){"use strict";n.d(t,"a",(function(){return O}));var r,a=n(30),i=n(3),o=n(4),s=n(6),c=n(5),u=n(10),l=n.n(u),d=n(0),h=n.n(d),f=n(25),T=n(12),E=n(2),p=n.n(E),v=(n(184),T.NodeType);!function(e){e.Header="header",e.Footer="footer",e.Whole="whole"}(r||(r={}));var g=function(){},A=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){var e=this,t=this.props,a=t.node,i=t.selectedNode,o=t.selectedPart,s=t.expandedNodes,c=t.onSelect,u=t.onSelectPart,h=t.onExpansionChange,f=t.onMouseEnter,T=t.onMouseOut;if(!a)return null;var E=o,g=s.indexOf(a.id)>-1||a.isRoot;g&&E===r.Whole&&(E=r.Header);var A,m=i===a,_=function(e){return function(t){t.stopPropagation(),c(a),u(e)}},N={onMouseEnter:function(e){e.stopPropagation(),f(a)},onMouseOut:function(e){e.stopPropagation(),T(a)}},y=null;return l.a.isEmpty(a.children)?"text"===a.type&&(y=a.content):y=d.createElement("div",{key:"children",className:"children"},l.a.map(a.children,(function(t,r){return d.createElement(n,Object.assign({},e.props,{key:r,node:t}))}))),a.type===v.TEXT?d.createElement("div",Object.assign({className:p()("text",{selected:m}),onClick:_(r.Whole)},N),'"',a.content,'"'):a.type===v.ENTITY||a.isBlock||a.isWrappingTag?(1===a.children.length&&a.firstChild.type===v.TEXT&&(A=a.firstChild.content),d.createElement("div",Object.assign({className:p()("block",{expanded:g,selected:m&&E===r.Whole,"node-selected":m}),onClick:g?void 0:_(r.Whole)},N),a.type!==v.ROOT&&d.createElement("span",{className:"indicator",onClick:function(e){e.stopPropagation(),h(a,!g)}},"\u25be"),d.createElement("span",{className:p()("header",{selected:m&&E===r.Header}),onClick:g?_(r.Header):void 0},a.openDescriptorStart,a.labels.map((function(e){return d.createElement("span",{key:e,className:"prop label"},"#",e)})),l.a.keys(a.attributes).map((function(e){var t=a.attributes[e];return d.createElement("span",{key:e,className:"prop attribute"},d.createElement("span",{className:"key"},e),d.createElement("span",{className:"assignment"},"="),d.createElement("span",{className:"value"},JSON.stringify(t)))})),a.openDescriptorEnd),g?y:d.createElement("span",{className:"ellipsis"},l.a.truncate(A,{length:10})||"..."),d.createElement("span",{className:p()("footer",{selected:m&&E===r.Footer}),onClick:g?_(r.Footer):void 0},a.closingDescriptor))):null}}]),n}(d.Component);A.defaultProps={node:void 0,expandedNodes:[],selectedNode:void 0,selectedPart:r.Whole,onSelect:g,onSelectPart:g,onExpansionChange:g,onMouseEnter:g,onMouseOut:g};var m=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){var e=this.props,t=e.selected,n=e.node,r=e.onClick;return n?h.a.createElement("span",{className:p()("zaml-tree-path-item",n.type,{selected:t}),onClick:r},n.descriptor):null}}]),n}(h.a.Component);m.defaultProps={selected:!1,node:void 0,onClick:function(){}};var _=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).state={nodeList:r.buildNodeList(e.selectedNode)},r}return Object(o.a)(n,[{key:"componentWillReceiveProps",value:function(e){var t=this.state.nodeList,n=e.selectedNode;n?l.a.includes(t,n)||this.setState({nodeList:this.buildNodeList(n)}):this.setState({nodeList:[]})}},{key:"buildNodeList",value:function(e){for(var t=[];e;)t.unshift(e),e=e.parent;return t}},{key:"render",value:function(){var e=this.props,t=e.selectedNode,n=e.onSelect,r=this.state.nodeList;return h.a.createElement("div",{className:"zaml-tree-path"},r.map((function(e){return h.a.createElement(m,{key:e.id,selected:e===t,node:e,onClick:function(){return n(e)}})})))}}]),n}(h.a.Component);_.defaultProps={selectedNode:void 0,onSelect:function(){}};var N=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(i.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={},e}return Object(o.a)(n,[{key:"render",value:function(){return h.a.createElement("div",{className:"zaml-tree-toolbar"},"toolbar")}}]),n}(h.a.Component);N.defaultProps={};n(185),n(186);var y,b=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){var e=this.props,t=e.tabs,n=e.selectedTab,r=e.onTabChange,a=e.children;return h.a.createElement("div",{className:"tab-view"},h.a.createElement("ul",{className:"tabs"},t.map((function(e){return h.a.createElement("li",{key:e,className:p()("tab",{selected:e===n}),onClick:function(){return r(e)}},h.a.createElement("span",{className:"label"},e))}))),h.a.createElement("div",{className:"content"},a))}}]),n}(h.a.Component);!function(e){e.Labels="Labels",e.Attributes="Attributes",e.Metadata="Metadata"}(y||(y={}));var S=l.a.values(y),R=S[0],k=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(i.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={selectedTab:R,editingIndex:-1,inlineError:""},e.editingElement=null,e}return Object(o.a)(n,[{key:"componentWillReceiveProps",value:function(e){e.node!==this.props.node&&this.setState({selectedTab:R,editingIndex:-1})}},{key:"renderValue",value:function(e){return e instanceof T.Node?e.toSource():JSON.stringify(e)}},{key:"renderEmptyTip",value:function(){return h.a.createElement("div",{className:"select-tip"},"Please select a node")}},{key:"renderTabContent",value:function(){var e=this.props.node,t=this.state.selectedTab;if(!e)return this.renderEmptyTip();switch(t){case y.Labels:return this.renderLabelEditor(e);case y.Attributes:return this.renderAttributeEditor(e,e.attributes);case y.Metadata:return this.renderAttributeEditor(e,e.metadata)}}},{key:"focusEditingElement",value:function(){this.editingElement&&(this.editingElement.focus(),this.editingElement.select())}},{key:"handleLabelEdit",value:function(e){var t=this;this.setState({editingIndex:e},(function(){t.focusEditingElement()}))}},{key:"handleLabelUpdate",value:function(e){var t=this.props,n=t.node,r=t.onChange,a=this.state.editingIndex;if(n){var i=n.labels[a]||"";if(e!==i){try{T.parse("{INLINE #".concat(e,"}TESTING{/INLINE}"))}catch(o){return void this.setState({inlineError:"Invalid label"})}a===n.labels.length?n.addLabel(e):""===e||n.labels.indexOf(e)>=0?n.removeLabel(i):n.labels[a]=e}this.cancelLabelEditing(),r(n)}}},{key:"cancelLabelEditing",value:function(){this.setState({editingIndex:-1,inlineError:""})}},{key:"renderLabelEditor",value:function(e){var t=this,n=this.state,r=n.editingIndex,i=n.inlineError,o=[].concat(Object(a.a)(e.labels),[""]);return h.a.createElement("div",{className:"label-editor"},h.a.createElement("table",null,h.a.createElement("tbody",null,o.map((function(e,n){return h.a.createElement("tr",{key:e,className:p()({error:n===r&&i})},h.a.createElement("td",{className:"marker"},e||n===r?"#":""),n===r?h.a.createElement("td",null,h.a.createElement("input",{ref:function(e){return t.editingElement=e},defaultValue:e,onBlur:function(e){t.handleLabelUpdate(e.currentTarget.value)},onKeyDown:function(e){"Enter"===e.key?t.handleLabelUpdate(e.currentTarget.value):"Escape"===e.key&&t.cancelLabelEditing()}})):h.a.createElement("td",{className:"editable",onClick:function(){return t.handleLabelEdit(n)}},e))})))))}},{key:"renderAttributeEditor",value:function(e,t){var n=this,r=Object.keys(t);return h.a.createElement("div",{className:"attribute-editor"},h.a.createElement("table",null,h.a.createElement("tbody",null,r.map((function(e){return h.a.createElement("tr",{key:e},h.a.createElement("th",null,e),h.a.createElement("td",null,n.renderValue(t[e])))})))))}},{key:"render",value:function(){var e=this,t=this.state.selectedTab;return h.a.createElement("div",{className:"zaml-prop-editor"},h.a.createElement(b,{tabs:S,selectedTab:t,onTabChange:function(t){return e.setState({selectedTab:t})}},this.renderTabContent()))}}]),n}(h.a.Component);k.defaultProps={onChange:function(){}};n(187);var I=function(){},O=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];return(e=t.call.apply(t,[this].concat(o))).state={selectedPart:r.Header,expandedNodes:[]},e}return Object(o.a)(n,[{key:"handleExpansionChange",value:function(e,t){var n=this.props.selectedNode,i=this.state.expandedNodes;n===e&&this.setState({selectedPart:t?r.Header:r.Whole}),t&&!l.a.includes(i,e.id)?this.setState({expandedNodes:[].concat(Object(a.a)(i),[e.id])}):!t&&l.a.includes(i,e.id)&&this.setState({expandedNodes:l.a.without(i,e.id)})}},{key:"componentWillReceiveProps",value:function(e){var t=e.selectedNode;if(t&&t!==this.props.selectedNode){var n=this.state.expandedNodes,r=t.path.map((function(e){return e.id}));this.setState({expandedNodes:l.a.union(n,r)})}}},{key:"render",value:function(){var e=this,t=this.props,n=t.root,r=t.selectedNode,a=t.onSelect,i=t.onHover,o=t.onChange,s=this.state,c=s.expandedNodes,u=s.selectedPart;return h.a.createElement("div",{className:"zaml-tree-view"},h.a.createElement(f.a,{split:"horizontal",defaultSize:"60%",minSize:200},h.a.createElement("div",{className:"tree-container"},h.a.createElement(N,null),h.a.createElement("div",{className:"tree"},h.a.createElement(A,{node:n,selectedNode:r,selectedPart:u,expandedNodes:c,onSelect:a,onSelectPart:function(t){return e.setState({selectedPart:t})},onMouseEnter:i,onMouseOut:function(){return i()},onExpansionChange:function(t,n){return e.handleExpansionChange(t,n)}})),h.a.createElement(_,{selectedNode:r,onSelect:a})),h.a.createElement(k,{node:r,onChange:o})))}}]),n}(h.a.Component);O.defaultProps={onSelect:I,onHover:I,onChange:I}},69:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var r=n(3),a=n(4),i=n(6),o=n(5),s=n(0),c=n.n(s),u=n(63),l=(n(151),n(152),n(153),n(28)),d=n.n(l);n(154);d.a.defineSimpleMode("zaml",{start:[{regex:/#[^#\s\n}]+/,token:"variable-3"},{regex:/{\/?([^\s}]+)}/,token:"keyword"},{regex:/[^\s{\n]+(?=[:\uff1a=][^\n])/,token:"variable-2"},{regex:/{|}/,token:"def"},{regex:/(?={)[^\s}]+/,token:"keyword"},{regex:/\[[^\]]+\]/,token:"string"},{regex:/(?:BLOCK|INLINE)\b/,token:"keyword"},{regex:/true|false|null|undefined/,token:"atom"},{regex:/0x[a-f\d]+|[-+]?(?:\.\d+|\d+\.?\d*)(?:e[-+]?\d+)?/i,token:"number"},{regex:/~[^~].*/,token:"comment"},{regex:/~~~/,token:"comment",next:"comment"},{regex:/\/(?:[^\\]|\\.)*?\//,token:"variable-3"},{regex:/[{]/,indent:!0},{regex:/[}]/,dedent:!0}],comment:[{regex:/.*?~~~/,token:"comment",next:"start"},{regex:/.*/,token:"comment"}],meta:{dontIndentStates:["comment"],lineComment:"~"}});var h={mode:"zaml",lineNumbers:!0,lineWrapping:!0},f=function(e){Object(i.a)(n,e);var t=Object(o.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).editor=void 0,a.state={value:e.value},a}return Object(a.a)(n,[{key:"componentWillReceiveProps",value:function(e){this.editor&&(e.height!==this.props.height&&this.editor&&this.editor.setSize(null,e.height),e.value!==this.props.value&&this.editor.setValue(e.value))}},{key:"render",value:function(){var e=this,t=this.props.onChange,n=this.state.value;return c.a.createElement("div",{className:"zaml-source"},c.a.createElement(u.Controlled,{value:n,options:h,onBeforeChange:function(t,n,r){return e.setState({value:r})},onChange:function(e,n,r){return t(r)},editorDidMount:function(t){return e.editor=t}}))}}]),n}(c.a.Component);f.defaultProps={value:"",height:-1,onChange:function(){}}},70:function(e,t,n){"use strict";n.d(t,"a",(function(){return _}));var r,a,i,o=n(3),s=n(4),c=n(6),u=n(5),l=n(0),d=n.n(l),h=n(12),f=n(193),T=n(10),E=n.n(T),p=n(2),v=n.n(p),g=(n(155),h.NodeType),A=function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"render",value:function(){var e,t=this,r=this.props,a=r.node,i=r.selectedNode;if(!a)return null;var o=a===i,s=[];if(a.type===g.ROOT)e="div";else if(a.type===g.PARAGRAPH)e="p";else if(a.type===g.TEXT)e="span";else if(a.type===g.ENTITY){if("LINK"===a.name)return d.a.createElement("a",{className:"zaml-entity","node-name":"link","node-id":a.id,href:a.attributes.url},d.a.createElement(n,Object.assign({"node-id":a.children[0].id},this.props,{node:a.children[0]})));e="span"}else e=a.type===g.TAG?a.isBlock?"div":"span":null;return e?(E.a.isEmpty(a.children)?"text"===a.type&&s.push(a.content):s.push(d.a.createElement("span",{key:"children",className:"children"},E.a.map(a.children,(function(e,r){return d.a.createElement(n,Object.assign({},t.props,{key:r,node:e}))})))),d.a.createElement(e,{className:v()("zaml-node","".concat(a.type),{block:a.isBlock,selected:o}),"node-name":a.name&&a.name.toLowerCase(),"node-id":a.id},s)):null}}]),n}(d.a.Component),m=(n(156),n(157),h.NodeType),_=Object(f.a)((i=a=function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(e){var r;return Object(o.a)(this,n),(r=t.call(this,e)).currentNode=void 0,r.handleContextMenu=function(e,t){r.currentNode=t,r.setState({node:t})},r.state={},r}return Object(s.a)(n,[{key:"handleDoubleClick",value:function(e){var t=window.getSelection();if(t&&0!==t.rangeCount){var n=t.getRangeAt(0),r=n.startContainer,a=r.textContent;if(a){e.preventDefault(),e.stopPropagation();for(var i=/[!?:;\u3002\uff01\uff1f\uff1a\uff1b]/g,o=0,s=a.length,c=0;i.exec(a);)if(o=c,c=i.lastIndex,i.lastIndex++,c>n.startOffset){s=c;break}n.setStart(r,o),n.setEnd(r,s)}}}},{key:"handleCreateBlock",value:function(){var e=this.props,t=e.root,n=e.onChange,r=window.getSelection();if(r&&0!==r.rangeCount){var a=r.getRangeAt(0),i=this.getNodeByElement(a.commonAncestorContainer),o=this.getNodeByElement(a.startContainer),s=this.getNodeByElement(a.endContainer);if(i&&o&&s){var c=h.Node.createBlockByRange({startNode:o,startOffset:a.startOffset,endNode:s,endOffset:a.endOffset});r.removeAllRanges(),n(t,c)}}}},{key:"handleRemoveBlock",value:function(e){if(e){var t=this.props,n=t.root;(0,t.onChange)(n,e.flatten())}}},{key:"handleCreateEntity",value:function(e,t){if(t){var n=this.props,r=n.root,a=n.onChange,i=window.getSelection();if(i&&0!==i.rangeCount)if(i.anchorNode===i.focusNode){if(0!==i.rangeCount){var o=i.getRangeAt(0);a(r,e.createEntities([{type:t,start:o.startOffset,end:o.endOffset}])[0])}}else alert("Entity is only allowed in pure text!")}}},{key:"handleRemoveEntity",value:function(e){if(e){var t=this.props,n=t.root;(0,t.onChange)(n,e.removeEntity())}}},{key:"handleInspect",value:function(e){(0,this.props.onSelect)(e)}},{key:"handleSplitSentences",value:function(e){if(e){var t=this.props,n=t.root,r=t.onChange;e.splitText("\uff1a\u3002\uff01\uff1f","SENTENCE"),r(n)}}},{key:"getNodeByElement",value:function(e){var t=this.props.root;if(t){if(e.nodeType===e.TEXT_NODE||e.classList.contains("children")){if(!e.parentElement)return;e=e.parentElement}var n=e.getAttribute("node-id");if(n)return t.getNodeById(n)}}},{key:"render",value:function(){var e=this,t=this.props,n=t.root,r=t.selectedNode;return d.a.createElement("div",{className:"zaml-visual-editor",onDoubleClick:function(t){return e.handleDoubleClick(t)}},d.a.createElement(A,{node:n,selectedNode:r}))}},{key:"renderContextMenu",value:function(e){var t=this,n=this.props.commonEntityNames,r=this.getNodeByElement(e.target),a=r;if(r&&(r.type===m.TEXT&&(a=r.parent),a)){var i=a;return d.a.createElement(f.b,{id:"menu"},d.a.createElement(f.d,{disabled:!0,text:a.descriptor}),d.a.createElement(f.c,null),d.a.createElement(f.d,{text:"Create Block",onClick:function(){return t.handleCreateBlock()}}),a.isWrappingTag&&d.a.createElement(f.d,{text:"Remove Block",onClick:function(){return t.handleRemoveBlock(a)}}),a.isBlock&&d.a.createElement(f.d,{text:"Split Sentences",onClick:function(){return t.handleSplitSentences(a)}}),r.type===m.TEXT&&r.parent&&r.parent.type!==m.ENTITY&&d.a.createElement(f.d,{text:"Create Entity"},n&&n.map((function(e){return d.a.createElement(f.d,{key:e,text:e,onClick:function(){return t.handleCreateEntity(r,e)}})})),d.a.createElement(f.d,{text:"other...",onClick:function(){return t.handleCreateEntity(r,prompt("Please input entity type","PER"))}})),a.type===m.ENTITY&&d.a.createElement(f.d,{text:"Remove Entity",onClick:function(){return t.handleRemoveEntity(a)}}),d.a.createElement(f.c,null),d.a.createElement(f.d,{text:"Inspect",onClick:function(){return t.handleInspect(i)}}))}}}]),n}(d.a.Component),a.defaultProps={commonEntityNames:["PER","ORG","LOC","DATE"],onSelect:function(){},onChange:function(){}},r=i))||r}},[[122,1,2]]]);
//# sourceMappingURL=main.62545216.chunk.js.map